const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/m9aklkujr89s52e5.js","assets/lklglvrzltpv3f05.js","assets/ntw4l0fkgqdiln85.js","assets/ltrr4mhf6s4m7a72.js","assets/root-bh5spu2n.css","assets/conversation-small-iybhw0ps.css","assets/p8eg3euad9gvin3k.js","assets/hzzlkn5ny7a6v61q.js","assets/iixfvp0jk4jlyycs.js","assets/hzpananrr846548p.js","assets/k2lb722xh4lhsrhu.js","assets/jkn3f4gmwmxymccj.js"])))=>i.map(i=>d[i]);
import{r as d,j as e,M as k,c as M,a as oe}from"./lklglvrzltpv3f05.js";import{cI as E,L as S,cJ as W,bX as ce,K,bY as le,cQ as z,jC as de,jD as ue,jE as me,O as he,cV as fe,jF as V,jG as R,gf as xe,c$ as ge,jH as be,jI as _,jJ as Se,gI as pe,hH as w,aL as P,jK as J,jL as ve,jM as A,jN as I,hF as je,gJ as ye,jO as Ce,H as Ie,jP as Oe,J as Ne,bU as Fe,jQ as Le,jR as Q,M as Te,jS as _e,cu as Ae}from"./ntw4l0fkgqdiln85.js";import{bp as Y,d9 as X,ao as j,as as F,dd as L,S as ke,y as Me,cv as Ee,ag as $,ew as q,e6 as Z,d5 as ze,aN as ee,aO as se,L as te,d3 as Re,aX as ne,gY as v,X as we,Y as Pe,f_ as De,dc as N,fH as Ge,fI as He,f as Be}from"./ltrr4mhf6s4m7a72.js";import{u as D,e as Ue}from"./hzzlkn5ny7a6v61q.js";import{G as ae,g as We,D as Ke,E as U}from"./c84k0nbcah46qpzd.js";import{e as Ve,P as Je}from"./gruuolgwd1up46vp.js";import{C as Qe}from"./p8eg3euad9gvin3k.js";function Ye(t){const{clientThreadId:r}=D(),n=d.useRef(t);n.current=t;const l=d.useRef(null);d.useEffect(()=>{const s=l.current;return l.current=r,()=>{r!==s&&n.current?.(r,s)}},[r])}function Xe({currentGizmoId:t,gizmos:r,onClick:n}){const{isSidebarFlyoutOpen:l,onSidebarFlyoutOpenChange:s}=E(),a=l(S.Gizmo),c=Y();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(X,{onOpenChange:m=>s(S.Gizmo,m),side:c?"bottom":"right",sideOffset:4,open:a,contentAlign:"end",triggerButton:e.jsxs("button",{className:j("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",a&&"bg-token-main-surface-secondary"),onClick:n,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(W,{className:j("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(k,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(F,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(ae,{gizmo:r,currentGizmoId:t,hideOverflowMenu:!0})})})})})})}function $e({currentGizmoId:t}){const{data:{gizmos:r}={}}=ce();let n=r;const l=L(),s=K(),a=l.get("include_revised_sidebar_ia",!1);s&&(n=r?.filter(m=>!le(m.resource)));const{needsToCollapseItems:c}=We({gizmos:n??[],isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(z,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(k,{id:"ZT2HVu",defaultMessage:"GPTs"})}),hideHeader:a,isLastInGroup:!a,children:[a&&e.jsx(Ke,{isNewConversation:!0}),!a&&e.jsx(U,{}),e.jsx(ae,{gizmo:n??[],currentGizmoId:t,maxToShowOnLoad:de}),c&&e.jsx(F,{children:e.jsx(Xe,{currentGizmoId:t,gizmos:n??[]})}),a&&e.jsx(U,{})]})})}function qe({onClick:t}){const{clientThreadId:r}=D(),{isSidebarFlyoutOpen:n,onSidebarFlyoutOpenChange:l}=E(),s=Y(),a=n(S.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(X,{onOpenChange:c=>{c&&ke.logEvent("chatgpt_web_more_conversation_history_opened"),l(S.Conversation,c)},side:s?"bottom":"right",sideOffset:4,open:a,contentAlign:"start",triggerButton:e.jsxs("button",{className:j("flex flex-1 select-none items-center gap-2 px-2 py-2",ue,a&&me),onClick:t,children:[e.jsx(W,{className:j("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(k,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(F,{children:e.jsx(he,{activeId:r,hideOverflowMenu:!0})})})})})}function Ze({clientThreadId:t}){const r=Me(),n=M(),l=oe(),s=fe(),c=L().get("include_revised_sidebar_ia",!1),{recentConversationLimit:m}=V(),[g,h]=d.useState(!1),x=d.useRef(!1),{conversations:b,data:o,isLoading:i,isError:f,refetch:p}=R({recentConversationLimit:m}),[u,y]=d.useState(!0),G=d.useCallback(function(ie){ie===void 0&&y(!1),p({cancelRefetch:!0})},[p,y]),H=f||o===void 0&&!i&&x.current,re=!H&&(o===void 0||i);o===void 0&&!i&&!x.current&&(x.current=!0,G(!0)),d.useMemo(()=>{Ee.publish({kind:"refreshHistory",conversations:b})},[b]);const O=s!=null&&s.kind==="conversation"&&s.gizmoId!=null&&xe(s.gizmoId),T=d.useRef(0),B=e.jsx(e.Fragment,{children:re&&e.jsx(ze,{className:"sticky top-4 z-30 mt-4 justify-self-center"})});return e.jsxs("div",{onDragOver:C=>{C.preventDefault(),O&&h(!0)},onDrop:C=>{C.preventDefault(),O&&(h(!1),ge(r,n,l,s.conversationId,null,s.gizmoId))},onDragEnter:C=>{C.preventDefault(),O&&(T.current+=1)},onDragLeave:C=>{C.preventDefault(),O&&(T.current-=1,T.current===0&&h(!1))},className:j(g&&"opacity-50"),children:[H&&e.jsx(be,{showRetry:u,refetch:G}),!c&&e.jsx(ss,{clientThreadId:t,loadingIndicator:B}),c&&e.jsx(es,{clientThreadId:t,loadingIndicator:B})]})}function es({clientThreadId:t,loadingIndicator:r}){const{conversations:n,buckets:l,isLoading:s,fetchNextPage:a,isFetchingNextPage:c}=R({buckets:!0,recentConversationLimit:1}),m=!0,g=n.length===0,h=$(),x=q(t),b=Z().activeServerThreadIds,o=h?void 0:x,i=d.useRef(null),f=d.useCallback(p=>{s||p==null||(i.current?.disconnect(),i.current=new IntersectionObserver(u=>{u[0].isIntersecting&&m&&a()},{rootMargin:"0px 0px 350px 0px",threshold:.1}),i.current.observe(p))},[s,m,a]);return d.useEffect(()=>()=>{i.current?.disconnect()},[]),g?r:e.jsxs(e.Fragment,{children:[l.map(p=>e.jsx(z,{header:p.label,condensed:!0,children:p.items.map((u,y)=>e.jsx(_,{item:u,isActiveInMainWindow:u.id===o,isActive:b.has(u.id),testId:`history-item-${y}`},u.id))},p.key)),!g&&m&&!c&&e.jsx("div",{className:"h-1","data-testid":"infinite-scroll-trigger",ref:f}),r]})}function ss({clientThreadId:t,loadingIndicator:r}){const{isCollapsible:n,recentConversationLimit:l}=V(),{conversations:s,recents:a}=R({recentConversationLimit:l}),c=s.length===0,m=$(),g=q(t),h=Z().activeServerThreadIds,x=m?void 0:g,b=s.find(o=>o.id===x)??null;return e.jsxs(e.Fragment,{children:[!c&&e.jsxs(z,{header:a.label,isLastInGroup:!0,ulClassName:"screen-arch:mb-5",children:[a.items.map((o,i)=>e.jsx(_,{item:o,isActiveInMainWindow:o.id===x,isActive:h.has(o.id),testId:`history-item-${i}`},o.id)),b&&!a.items.some(o=>o.id===x)&&e.jsx(_,{item:b,isActiveInMainWindow:!0,isActive:!0}),n&&e.jsx(F,{children:e.jsx(qe,{})})]}),r]})}const ts=ee(()=>se(()=>import("./m9aklkujr89s52e5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(t=>t.SnorlaxSidebarList));function ns({clientThreadId:t}){const r=te(),n=Re(t),{isUnauthenticated:l}=ne(),s=L(),a=K(),c=s.get("include_revised_sidebar_ia",!1),m=!1;if(l)return null;const g=a&&e.jsx(ts,{includeRevisedSidebarIa:c,currentGizmoId:n}),h=m,x=e.jsx(Ze,{clientThreadId:t}),b=r?.canInteractWithGizmos()?e.jsx($e,{currentGizmoId:n}):null,o=e.jsx(Se,{}),i=c?e.jsxs(e.Fragment,{children:[b,g,h,x]}):e.jsxs(e.Fragment,{children:[g,h,x,o,b]});return e.jsx("div",{className:j(v.screenContent,"group/sidebar"),children:i})}function as(){const t=te(),r=t?.data==null,{isUnauthenticated:n}=ne(),{openSettings:l}=pe(),s=L(),[a]=d.useState(()=>{const i=we.getCookie(Pe.Workspace);return typeof i=="string"&&i!==De}),c=M(),{useStore:m,actions:g}=w(),h=m(i=>i.mode),[x,b]=d.useState(!0);if(d.useEffect(()=>{b(!1)},[]),!t&&x||a&&r)return null;const o=n?e.jsx(Ve,{}):e.jsx(Ue,{onClickSettings:()=>l()});return e.jsxs(P,{name:"user-profile-bar",className:"relative z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)] px-sidebar-inline md:pb-1.5 md:pt-2.5",type:"primary",disableSizeTracking:!0,trailing:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[o,s.get("include_floating_state",!1)&&e.jsx("div",{className:v.togglePinWrapper,children:e.jsx(J,{tooltipSideOffset:14,className:v.pinSidebarAction,icon:e.jsx(ve,{}),onActivate:i=>{i.preventDefault(),i.persist(),A.togglePinSidebar(i,g,h===I.Floating?I.Pinned:I.Floating)},label:h===I.Floating?c.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):c.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:N.FloatingOrPinned})})]})}function rs(){return e.jsx(P,{className:"z-10 mb-[0.5px] px-sidebar-inline empty:hidden md:pb-1.5 md:pt-2.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Je,{})})}function is(){return e.jsxs(je,{className:j(v.screenTrailingBarContainer),children:[e.jsx(ye,{}),e.jsx(rs,{}),e.jsx(as,{})]})}const os=ee(()=>se(()=>import("./iixfvp0jk4jlyycs.js"),__vite__mapDeps([8,1,2,3,4,5,9,10,11])).then(t=>t.FannyPackIconButton));function cs({onNewThread:t}){const r=M(),n=d.useRef(null),l=Ge(),{useStore:s,actions:a}=w(),c=s(u=>u.isSidebarOpen),m=s(u=>u.mode),g=He("include_revised_sidebar_ia"),{isSidebarFlyoutOpen:h}=E(),x=h(S.Conversation),b=h(S.Gizmo),o=h(S.Snorlax),i=c&&!x&&!b&&!o;function f(){Q(n.current)&&document.getElementById(N.OpenOrClosed)?.click()}Ce({checkElement:u=>u?.tagName==="NAV",enabled:i,onLightDismiss:f});const{isFannyPackEnabled:p}=Ie();return e.jsxs(e.Fragment,{children:[e.jsx(P,{type:"primary",className:j(v.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between px-[var(--sidebar-inline-padding)]",ref:n,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(J,{className:j(v.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:u=>{A.closeSidebar(u,a,m)},onActivate:u=>{A.closeSidebar(u,a,m)},icon:e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:j(v.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(Ne,{className:j(v.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:r.formatMessage(ls.closeSidebar),htmlFor:N.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[p&&e.jsx(Fe,{children:e.jsx(os,{className:v.searchAction,icon:e.jsx(Le,{className:v.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),!l&&e.jsx(Qe,{location:"sidebar",onNewThread:t})]})]})}),e.jsx("div",{className:j(v.leadingBar,v.leadingBarScrollAnimation,g()&&"h-full",!g()&&"h-[calc(100%+var(--sidebar-sticky-header-height,40px))]","pointer-events-none absolute inset-0"),children:" "})]})}const ls=Be({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function Ss(){const{clientThreadId:t,onNewThread:r}=D(),[n,l]=d.useState(!1),[s,a]=d.useState(!1),[c,m]=d.useState(!1),{useStore:g}=w(),h=g(f=>f.isSidebarOpen),x=g(f=>f.mode),b=d.useCallback(f=>f===S.Conversation?n:f===S.Gizmo?s:f===S.Snorlax?c:!1,[n,s,c]),o=d.useCallback((f,p)=>{const u=y=>{f===S.Conversation?l(y):f===S.Gizmo?a(y):f===S.Snorlax&&m(y)};p?u(!0):setTimeout(()=>{u(!1)},100)},[]),i=d.useRef(null);return Ye(()=>{o(S.Conversation,!1),o(S.Gizmo,!1),o(S.Snorlax,!1);const f=window.matchMedia("(max-width: 700px)").matches,p=Q(i.current);f&&h&&(x===I.Floating||p)&&setTimeout(()=>{document.getElementById(N.OpenOrClosed)?.click()},100)}),e.jsxs(Te,{value:{isSidebarFlyoutOpen:b,onSidebarFlyoutOpenChange:o},children:[e.jsx(_e,{}),e.jsx(Ae,{anchor:"vertical",className:j(v.screen,"popover sidebar flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(cs,{onNewThread:r}),ref:i,trackLeading:!0,trailing:e.jsx(is,{}),children:e.jsx(ns,{clientThreadId:t})})]})}export{Ss as C};
//# sourceMappingURL=i9ntb1zjwbcuz2uj.js.map
