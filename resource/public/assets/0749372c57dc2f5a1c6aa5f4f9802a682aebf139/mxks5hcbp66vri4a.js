import{r as L,c as v,j as m}from"./lklglvrzltpv3f05.js";import{ao as p,d5 as y,g4 as A,f as R}from"./ltrr4mhf6s4m7a72.js";import{dU as b,dV as N,dW as S}from"./ntw4l0fkgqdiln85.js";import{a as E,I as T}from"./iro7h84l3u0i9whz.js";import"./dmls56e1re49jwsn.js";function z({asset:s,contextConnectorSourceUrl:f,isSingle:o,className:d}){const[g,n]=L.useState(!1),{gizmoEditorData:a}=b(),u=N(),r=v(),{data:e,isLoading:c,error:w}=E(s,a?.id),{url:x,width:i,height:l}=e??{},I=c||!g,h=i&&l?{Landscape:i>l,Portrait:i<l,Square:i===l}:void 0,t=["overflow-hidden rounded-lg"];o&&(t.push("w-full h-full"),h?.Landscape?t.push("max-w-96 max-h-64"):h?.Portrait?t.push("max-h-96 max-w-64"):t.push("max-w-64 max-h-64")),d&&t.unshift(d);let M;return x!=null&&(M=m.jsx(T,{alt:r.formatMessage(j.imageAltText),className:p("max-w-full",!o&&"aspect-square","object-cover object-center",t),src:x,width:i,height:l,onLoad:()=>n(!0)}),u||(M=m.jsx(S,{src:x,alt:r.formatMessage(j.imageAltText),contextConnectorSourceUrl:f,className:p(t),children:M}))),m.jsx("div",{className:p(t),children:m.jsx("div",{className:p("relative flex h-auto w-full max-w-lg items-center justify-center overflow-hidden bg-token-main-surface-secondary text-token-text-tertiary",!o&&"aspect-square"),children:x!=null?M:m.jsx("div",{className:"flex items-center justify-center",style:{aspectRatio:`${i} / ${l}`,width:i},title:I?r.formatMessage(j.loadingImage):r.formatMessage(j.errorLoadingImage),children:I?m.jsx(y,{}):w?m.jsx(A,{className:"icon-sm"}):null})})})}const j=R({loadingImage:{id:"textMessage.loadingImage",defaultMessage:"Loading..."},errorLoadingImage:{id:"textMessage.errorLoadingImage",defaultMessage:"Could not load image"},imageAltText:{id:"textMessage.imageAltText",defaultMessage:"Uploaded image"},targetedReply:{id:"textMessage.targetedReply",defaultMessage:"Replying to:"}});function C({assets:s,attachments:f}){const o=s.length===1,{containerClassname:d,imageClassnames:g}=C.computeClassnames(s.length);return m.jsx("div",{className:p("flex w-[var(--user-chat-width,70%)] flex-row items-center justify-end gap-1",d),children:s.map((n,a)=>{const u=f?.find(r=>r.id&&n.asset_pointer.includes(r.id));return m.jsx(z,{asset:n,isSingle:o,contextConnectorSourceUrl:u?.context_connector_info?.source_url,className:g[a]},a)})})}C.computeClassnames=s=>{if(s<2)return{containerClassname:null,imageClassnames:[]};let f=s>=4?"flex-wrap":"";const o=Array(s),d=e=>{o.fill(e)},g=e=>{f+=` ${e}`},n=(e,c)=>{o[e]=p(o[e],c)},a=s<=4&&s%2===0?2:3,u=Math.ceil(s/a),r=s%a!==0;a===2?(d("h-32 w-32"),g("max-w-72")):u<=2?(d("h-24 w-24 sm:h-32 sm:w-32"),g("max-w-80 sm:max-w-100")):(d("h-16 w-16"),g("max-w-52"));for(let e=0;e<s;e++){const c=Math.floor(e/a),w=e%a,x=Math.min(s-c*a,a),i=c===0,l=c===u-1,I=c===u-2,h=w===0,t=w===x-1;i&&h&&n(e,"rounded-tl-2xl"),i&&t&&n(e,"rounded-tr-2xl"),l&&h&&n(e,"rounded-bl-2xl"),l&&t&&n(e,"rounded-br-sm"),r&&h&&I&&n(e,"rounded-bl-2xl")}return{containerClassname:f,imageClassnames:o}};export{C as TextMessageImageGroup};
//# sourceMappingURL=mxks5hcbp66vri4a.js.map
