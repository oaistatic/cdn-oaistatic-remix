import{y as S,N as E,dv as u,dw as h}from"./ltrr4mhf6s4m7a72.js";import{X as O,e as C,r as a}from"./lklglvrzltpv3f05.js";function b(){const{pluginId:e}=O(),t=C(),l=a.useRef(!1),[p,d]=a.useState(""),{code:r,error:n,error_description:i,state:c}=Object.fromEntries(new URLSearchParams(p.substring(1)).entries());a.useEffect(()=>{d(window.location.hash)},[]),a.useEffect(()=>{if(l.current)return;if(e&&r&&c)l.current=!0;else{t("/");return}async function R(){const m=window.location.origin+`/ccc/${e}/oauth/callback`;if(!(!e||!r||!c))try{const s=await E.connectorOauthCallback(e,r,m,c);if(s.success){const o=new URL(u(h.OAUTH_SUCCESS,s.redirect_path),location.origin);o.searchParams.set("oauth_success","true"),t(o.pathname+o.search+o.hash)}else t(u(h.CUSTOM_ERROR,s.redirect_path,s.error??s.message))}catch{t(u(h.CUSTOM_ERROR))}}R()},[e,r,c,t]);const f=S();return a.useEffect(()=>{n&&f.danger(`${n}${i?`: ${i}`:""}`)},[n,i,f]),null}export{b as default};
//# sourceMappingURL=fk2eyy1ojbvd3jgd.js.map
