const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/7sm8fd147dnxzohb.js","assets/ltrr4mhf6s4m7a72.js","assets/lklglvrzltpv3f05.js","assets/root-bh5spu2n.css","assets/ntw4l0fkgqdiln85.js","assets/conversation-small-iybhw0ps.css","assets/epxmj2fvgbujtwgi.js","assets/iro7h84l3u0i9whz.js","assets/dmls56e1re49jwsn.js","assets/i6vhcfa9ey9k9tjp.js","assets/c4bxzbp1808foto4.js","assets/kqs0d9q6go77jiiq.js","assets/gruuolgwd1up46vp.js","assets/hzzlkn5ny7a6v61q.js","assets/jebvbwlsp750x4d4.js","assets/m9aklkujr89s52e5.js","assets/p8eg3euad9gvin3k.js","assets/emuaj61pmpol8zzg.js","assets/m5cd4p680vhusvsg.js","assets/dz00r7qlzgek59uu.js","assets/bwsmtgh34vk8igjb.js","assets/vyarha3ckzwu9yf1.js","assets/lnovrxcizvfadwta.js","assets/n7xaphlc0h5m9xjk.js","assets/lweu58rz02vpanvm.js","assets/hags0lzrfk4kk50a.js","assets/i9ntb1zjwbcuz2uj.js","assets/c84k0nbcah46qpzd.js","assets/bp78dzwfe9v1jkaa.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{e6 as W,cg as z,ew as G,d$ as _,gz as y,aN as f,aO as x,ag as H,a2 as K,d4 as T,r as C,D as Q,cn as q,co as B,dA as Y,fG as J,N as X}from"./ltrr4mhf6s4m7a72.js";import{r as o,j as e,ad as k,e as $,a as Z,c as ee,ac as u,d as I,f as se,u as ae}from"./lklglvrzltpv3f05.js";import{hR as te,hS as A,hT as re,hU as ie,hV as E,hW as h,hg as oe,bN as m,bO as N,m as ne,hX as de,k as ce,cy as le,T as ue,o as he,w as me,hY as fe,cm as xe,hZ as ge,h_ as pe,cN as ve,cO as S,h$ as je,aJ as be,i0 as we,i1 as ye,bw as Te,cx as Ce,dE as Ie,i2 as Ee,i3 as Ne,i4 as Se,dF as Pe,i5 as _e,i6 as ke,cn as Ae}from"./ntw4l0fkgqdiln85.js";import{C as Oe}from"./kqs0d9q6go77jiiq.js";import{a as O,u as F}from"./hzzlkn5ny7a6v61q.js";import{C as Fe}from"./n7xaphlc0h5m9xjk.js";import{a as Ve}from"./m5cd4p680vhusvsg.js";import{C as De}from"./hags0lzrfk4kk50a.js";function Le(){const a=te(t=>t.notifications),{activeThreadIds:s}=W();return o.useEffect(()=>{a.filter(r=>r.clientThreadId===void 0||s.has(r.clientThreadId)).map(r=>r.id).filter(r=>r!==void 0).forEach(r=>A(r))},[s,a]),a.length===0||z?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(k,{children:a.map(t=>e.jsx(Me,{...t},t.id))})})}function Me({...a}){const s=$(),t=Z(),r=ee(),n=G(a.clientThreadId),d=()=>{n&&ie(s,t,n),a.id&&A(a.id)};return e.jsxs(u.div,{onClick:d,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(re,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:a.title??r.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:a.subtitle??r.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const P=450;function Re({children:a,clientThreadId:s,isOpen:t,onClose:r}){const n=_();return e.jsxs(k,{children:[t&&n&&e.jsx(O,{clientThreadId:s,children:e.jsx(y,{children:e.jsx(E.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(u.div,{className:"h-full w-full bg-token-main-surface-secondary",...h}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(u.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:P},...h,children:e.jsx(Fe,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:a})]})]})})})}),t&&!n&&e.jsx(y,{children:e.jsx(E.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(u.div,{className:"h-full w-full bg-token-main-surface-secondary",...h}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(u.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:P},...h,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Ve,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const Ue=f(()=>x(()=>import("./7sm8fd147dnxzohb.js"),__vite__mapDeps([0,1,2,3,4,5]))),We=f(()=>x(()=>import("./epxmj2fvgbujtwgi.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27])).then(a=>a.ImageEditor));function ze({clientThreadId:a}){const s=oe();o.useEffect(()=>{m.close()},[a]);let t;return s?.type===N.ADAVisualization?t=e.jsx(Ue,{clientThreadId:a,visualization:s.visualization}):s?.type===N.Image&&(t=e.jsx(We,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(Re,{clientThreadId:a,isOpen:s!=null,onClose:m.close,children:t})}function Ge(){const{clientThreadId:a,resetThread:s}=F();return ne({resetThreadAction:s,clientThreadId:a}),null}function He(){const{clientThreadId:a,currentModelId:s,isCompanionWindow:t}=F();return e.jsx(de,{conversationId:a,currentModelId:s,isActiveWindow:!t})}function Ke({clientThreadId:a,urlThreadId:s}){return ce({clientThreadId:a}),e.jsxs(le,{children:[e.jsx(He,{}),e.jsx(Ge,{}),e.jsxs(ue,{clientThreadId:a,children:[e.jsx(he,{clientThreadId:a,urlThreadId:s}),e.jsx(me,{}),e.jsx(De,{})]})]})}var Qe={};const qe=f(()=>x(()=>import("./bp78dzwfe9v1jkaa.js"),__vite__mapDeps([28,2,1,3,4,5,13,23,18,19,20,21,22,16,24,14,15,12,29])));function ts(a){const{urlThreadId:s,clientThreadId:t,prefetchSearch:r}=a;Be();const n=H(),d=I(),[g]=se(),[i,l]=o.useState(()=>s!==void 0?K.getClientNewThreadIdForServerThreadId(s)??s:t!==void 0?t:T());s!==void 0&&i!==s&&(C.getServerThreadId(i)===s||l(s));const V=fe(I());o.useEffect(()=>{s===void 0&&C.getServerThreadId(i)!==void 0&&l(T())},[s,i,V]);const D=xe(Ae.workspaceId),L=_(),{eligible:p,isLoading:v,markAsViewed:j}=ge(),b=pe();o.useEffect(()=>{(d.pathname==="/"||d.pathname.startsWith("/c/"))&&ve({namespace:S.ChatPageLoad})==null&&(je({namespace:S.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),Q.addTiming("chatgpt.web.chatPage.mounted"))},[]);const w=be();o.useEffect(()=>{q(!0).then(c=>{c.force_login&&w({authType:"login"}),we.initializeAndGatherData(c),B.initializeAndGatherData(c)})},[w]),o.useEffect(()=>{const c=g.get(ye)==="true";n!==c&&Y.setIsTemporaryChatEnabled(c)},[n,g]),o.useEffect(()=>{d.state?.focusObject&&m.setFocusedObject(d.state.focusObject)},[d.state?.focusObject]),o.useEffect(()=>{!v&&p&&(j(),b())},[p,v,j,b]);const{isOpen:M,isLoading:R}=Te(),U=L?Ke:Oe;return e.jsx(J.Provider,{value:null,children:e.jsx(Ce,{children:e.jsxs(Ie,{clientThreadId:i,children:[e.jsx(Ee,{clientThreadId:i},D),!R&&M&&e.jsx(qe,{clientThreadId:i,setClientThreadId:l}),e.jsx(Ne,{}),e.jsx(Se,{}),e.jsx(O,{clientThreadId:i,setClientThreadId:l,prefetchSearch:r,children:e.jsx(U,{urlThreadId:s,clientThreadId:i,setClientThreadId:l,prefetchSearch:r})}),e.jsx(ze,{clientThreadId:i}),e.jsx(Pe,{clientThreadId:i}),e.jsx(_e,{}),e.jsx(Le,{}),e.jsx(ke,{})]})})})}function Be(){ae({queryKey:["pingEdge"],queryFn:()=>X.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Qe.GOKU_SERVICE);export{ts as C,P as F};
//# sourceMappingURL=myjrgpm0gs628bnj.js.map
