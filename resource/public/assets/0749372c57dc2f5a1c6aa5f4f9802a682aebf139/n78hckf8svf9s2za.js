import{r as a,e as x,j as i,c as C}from"./lklglvrzltpv3f05.js";import{C as E,a as v}from"./h5trlduqenfzemx8.js";import{aq as w,fN as c,dY as T,d$ as b,bb as g,dT as I,ba as u,gA as M,gB as _,fO as H}from"./ltrr4mhf6s4m7a72.js";import{a as Z}from"./hzzlkn5ny7a6v61q.js";import{u as W}from"./ve8i8plaqaug1tfx.js";import"./f940fsjggqf82j7i.js";import{hb as B,hc as D}from"./ntw4l0fkgqdiln85.js";import{c as S}from"./d4su7smarm0gzmcj.js";import"./hags0lzrfk4kk50a.js";import"./i9ntb1zjwbcuz2uj.js";import"./c84k0nbcah46qpzd.js";import"./p8eg3euad9gvin3k.js";import"./gruuolgwd1up46vp.js";import"./n7xaphlc0h5m9xjk.js";import"./m5cd4p680vhusvsg.js";import"./dz00r7qlzgek59uu.js";import"./bwsmtgh34vk8igjb.js";import"./vyarha3ckzwu9yf1.js";import"./lnovrxcizvfadwta.js";import"./lweu58rz02vpanvm.js";import"./jebvbwlsp750x4d4.js";import"./m9aklkujr89s52e5.js";const O=S("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]),j=s=>a.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("path",{d:"M6.5 3.00015C6.77614 3.00015 7 2.77629 7 2.50015C7 2.22401 6.77614 2.00015 6.5 2.00015V3.00015ZM14 9.50015V9.00015H13V9.50015H14ZM9.42819 8.57196L9.78174 8.92551V8.92551L9.42819 8.57196ZM8.40621 9.11891L8.30815 8.62862L8.40621 9.11891ZM6.5 9.50015L6.00971 9.40209C5.97692 9.56602 6.02823 9.73549 6.14645 9.8537C6.26466 9.97192 6.43413 10.0232 6.59806 9.99044L6.5 9.50015ZM6.88124 7.59394L6.39095 7.49588L6.88124 7.59394ZM7.42819 6.57196L7.78174 6.92551L7.42819 6.57196ZM11.5 2.50015L11.1464 2.1466L11.5 2.50015ZM6.5 2.00015H4V3.00015H6.5V2.00015ZM2 4.00015V12.0002H3V4.00015H2ZM4 14.0002H12V13.0002H4V14.0002ZM14 12.0002V9.50015H13V12.0002H14ZM12 14.0002C13.1046 14.0002 14 13.1047 14 12.0002H13C13 12.5524 12.5523 13.0002 12 13.0002V14.0002ZM2 12.0002C2 13.1047 2.89543 14.0002 4 14.0002V13.0002C3.44772 13.0002 3 12.5524 3 12.0002H2ZM4 2.00015C2.89543 2.00015 2 2.89558 2 4.00015H3C3 3.44787 3.44772 3.00015 4 3.00015V2.00015ZM13.1464 4.1466L9.07464 8.21841L9.78174 8.92551L13.8536 4.8537L13.1464 4.1466ZM8.30815 8.62862L6.40194 9.00986L6.59806 9.99044L8.50427 9.6092L8.30815 8.62862ZM6.99029 9.59821L7.37153 7.692L6.39095 7.49588L6.00971 9.40209L6.99029 9.59821ZM7.78174 6.92551L11.8536 2.8537L11.1464 2.1466L7.07464 6.21841L7.78174 6.92551ZM7.37153 7.692C7.42961 7.40161 7.57234 7.13492 7.78174 6.92551L7.07464 6.21841C6.72563 6.56741 6.48775 7.01191 6.39095 7.49588L7.37153 7.692ZM9.07464 8.21841C8.86524 8.42781 8.59854 8.57054 8.30815 8.62862L8.50427 9.6092C8.98824 9.5124 9.43274 9.27452 9.78174 8.92551L9.07464 8.21841ZM13.1464 2.8537C13.5035 3.21073 13.5035 3.78957 13.1464 4.1466L13.8536 4.8537C14.6011 4.10616 14.6011 2.89414 13.8536 2.1466L13.1464 2.8537ZM13.8536 2.1466C13.106 1.39905 11.894 1.39905 11.1464 2.1466L11.8536 2.8537C12.2106 2.49668 12.7894 2.49668 13.1464 2.8537L13.8536 2.1466Z",fill:"currentColor"})),y=s=>a.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("path",{d:"M13.5 5.5V4C13.5 3.17157 12.8284 2.5 12 2.5H3C2.17157 2.5 1.5 3.17157 1.5 4V11C1.5 11.8284 2.17157 12.5 3 12.5H5.5M4.5 7.5V5.5H6.5M9.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V9.5C14.5 8.94772 14.0523 8.5 13.5 8.5H9.5C8.94772 8.5 8.5 8.94772 8.5 9.5V12.5C8.5 13.0523 8.94772 13.5 9.5 13.5Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}));function p(s,r){return s/r}function L(){const[t,n]=a.useState({titleBarHeight:32,buttonWidth:46,iconSize:16}),{value:o}=g("842034403");return a.useEffect(()=>{if(!o)return;const e=async()=>{const l=await window.getScreenDetails(),h=window.devicePixelRatio/l.currentScreen.devicePixelRatio;n({titleBarHeight:p(32,h),buttonWidth:p(46,h),iconSize:p(16,h)})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o]),t}function V({onNewThread:s,onOpenInMainWindow:r,onClose:d}){const t=C(),{titleBarHeight:n,buttonWidth:o,iconSize:e}=L(),l=t.formatMessage({id:"DAjGx7",defaultMessage:"New chat"}),h=t.formatMessage({defaultMessage:"Open in main window",id:"CompanionWindow.openInMainWindow1"}),m=t.formatMessage({id:"/LZfgc",defaultMessage:"Close"});return!I()&&i.jsxs("div",{className:"draggable no-draggable-children fixed top-0 z-10 flex w-full justify-between",style:{height:`${n}px`},children:[i.jsx(u,{label:l,sideOffset:4,side:"bottom",children:i.jsx(f,{onClick:s,"aria-label":l,style:{height:`${n}px`,width:`${o}px`},children:i.jsx(j,{style:{height:`${e}px`,width:`${e}px`}})})}),i.jsx(u,{label:h,sideOffset:4,side:"bottom",className:"ml-auto",children:i.jsx(f,{onClick:r,"aria-label":h,style:{height:`${n}px`,width:`${o}px`},children:i.jsx(y,{style:{height:`${e}px`,width:`${e}px`}})})}),i.jsx(u,{label:m,sideOffset:4,side:"bottom",children:i.jsx(A,{onClick:d,"aria-label":m,style:{height:`${n}px`,width:`${o}px`},children:i.jsx(O,{style:{height:`${e}px`,width:`${e}px`}})})})]})}const f=w.button`flex items-center justify-center cursor-default hover:bg-gray-200 active:bg-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-700`,A=w.button`flex items-center justify-center cursor-default hover:bg-red-500 hover:text-white active:bg-red-400 active:text-white`;function R({onNewThread:s,onOpenInMainWindow:r,onClose:d,children:t}){const n=a.useRef(null),{titleBarHeight:o}=L(),e=b();return i.jsxs("div",{className:"flex h-full w-full flex-col",style:{paddingTop:e?void 0:`${o}px`,"--screen-titlebar-height":`${o}px`,"--screen-height-override":"calc(100dvh - var(--screen-titlebar-height))","--screen-scrollbar-gutter-override":"stable both-edges","--screen-inline-padding-override":"0px","--screen-inline-padding-offset-override":"0px","--conversation-turn-wrapper-padding-left-override":"1.25rem","--conversation-turn-wrapper-padding-right-override":"1.25rem"},ref:n,children:[i.jsx(V,{onNewThread:s,onOpenInMainWindow:r,onClose:d}),t]})}function $({clientThreadId:s}){const r=c.useStore(),d=x(),t=T();return a.useEffect(()=>{if(!t)return;function n(e){e.key==="Escape"&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&c.hide()}function o(){t&&B()&&c.hide()}return t.document.addEventListener("keydown",n),t.addEventListener("blur",o),()=>{t.document.removeEventListener("keydown",n),t.removeEventListener("blur",o)}},[t]),i.jsx(R,{onNewThread:()=>{r.newThread(!0)},onOpenInMainWindow:()=>{d(`/c/${s}`),r.newThread(!0),c.focusMainWindow()},onClose:()=>{c.hide()},children:i.jsx(E,{clientThreadId:s})})}function ce(){const{value:s}=g("3653083604"),{isOpen:r}=D(),d=W(l=>l.isVoiceModeActive),t=s&&!r&&!d,{clientThreadId:n}=c.useState(),o=c.useStore();a.useEffect(()=>{t&&!n&&o.newThread(!1)},[t,n,o]);const e=a.useCallback(l=>{o.setThreadId(l,!0)},[o]);if(!(!t||!n))return i.jsx(v,{features:`${M}=${_.COMPANION}`,children:i.jsx(Z,{clientThreadId:n,setClientThreadId:e,children:i.jsx(H,{children:i.jsx($,{clientThreadId:n})})})})}export{ce as DesktopCompanionWindowController};
//# sourceMappingURL=n78hckf8svf9s2za.js.map
