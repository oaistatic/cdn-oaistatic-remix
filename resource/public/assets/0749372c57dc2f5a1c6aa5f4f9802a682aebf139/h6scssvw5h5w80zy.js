const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/hbh77i9kr2gbjtug.js","assets/lklglvrzltpv3f05.js","assets/ltrr4mhf6s4m7a72.js","assets/root-bh5spu2n.css","assets/k2lb722xh4lhsrhu.js","assets/jkn3f4gmwmxymccj.js","assets/ntw4l0fkgqdiln85.js","assets/conversation-small-iybhw0ps.css","assets/oj1mgpwaxus4k3qs.js","assets/lm9w2i5kkk5oax0d.js","assets/eoh3qcov0jni3wda.js","assets/peo8ghqw4ce4uq0z.js"])))=>i.map(i=>d[i]);
import{y as X,ch as Ia,bQ as oe,bP as R,N as F,d5 as Re,dz as po,dx as Jt,X as xs,Y as Ms,aq as ke,bu as Et,bm as H,f as V,aX as at,D as Be,dL as fo,L as Se,bS as Pt,ao as ts,P as k,j as w,aa as re,d6 as At,ca as ho,B as nt,S as te,a$ as yt,hC as xo,bC as ls,bB as fs,c as Fa,aQ as ot,ba as ve,g4 as Da,bd as Tt,hD as Mo,d9 as Oa,bT as bs,dq as De,bj as Nt,bO as Ua,cJ as bo,bA as Co,gn as _t,f7 as yo,ey as Cs,en as J,be as jo,aW as it,h0 as vo,bb as vs,hE as So,fP as hs,fQ as ea,hF as Ba,cf as Ws,dv as jt,dw as vt,hG as ko,cc as Je,d8 as wo,fF as Eo,hH as Po,gf as Ao,bn as sa,bo as _s,q as Oe,dk as Lt,bM as ys,bL as Ra,dn as Xs,dl as To,hI as ta,hJ as No,dA as _o,aN as Wa,aO as Ga}from"./ltrr4mhf6s4m7a72.js";import{c as v,r as d,j as e,M as n,u as Ne,a as Ye,ac as It,L as K,b as cs,e as Ss,ad as Ha,d as Va,f as Lo,k as Gs,h as Io}from"./lklglvrzltpv3f05.js";import{bx as Ft,U as Me,ci as Fo,aX as js,cm as Is,aJ as Ka,cG as Js,y as Ae,bg as Ya,x as et,ow as Do,ox as Oo,oy as Uo,fX as st,oz as Bo,oA as Ro,oB as za,oC as $a,oD as qa,oE as Qa,oF as Za,oG as St,oH as lt,oI as Os,oJ as rt,cg as kt,oK as Xa,oL as ge,oM as Ja,oN as ct,oO as dt,nj as Fs,fI as B,ir as Wo,nz as Go,oP as Dt,gH as Ho,im as Vo,b1 as en,oQ as Ko,oR as Yo,oS as aa,oT as zo,oU as $o,oV as qo,jf as je,dp as Qo,jd as Zo,j9 as Xo,je as na,jh as Jo,cj as ei,ji as si,jj as oa,oW as ti,oX as sn,oY as tn,oZ as ai,fo as ni,o_ as oi,o$ as ii,fm as an,p0 as li,p1 as ri,p2 as ci,p3 as nn,fx as ut,p4 as di,fF as Ke,fG as ae,jk as on,b5 as Ot,p5 as M,du as ln,p6 as Ee,p7 as ui,i as Hs,dA as gi,dC as mi,f6 as Ut,d1 as pi,dk as fi,gI as Us,f9 as Bt,p8 as hi,a$ as rn,fA as wt,p9 as xi,pa as xt,pb as Mi,pc as bi,pd as Ci,A as cn,dm as ee,pe as yi,fb as dn,kw as ji,dn as un,pf as vi,ie as Si,id as gn,ky as ki,ot as wi,gs as Ei,mU as Pi,kA as Ai,oq as Ti,jy as Ni,jA as _i,pg as Li,ph as Ii,fk as Fi,pi as mn,b0 as Ds,cJ as Di,dI as Oi,cn as Zs,pj as Ui,dr as Bi,nF as pn,pk as Ri,ch as Wi,e4 as Gi,e5 as Hi,Z as Vi,fa as Ki,eQ as Yi,fH as He,pl as zi,gt as $i,ic as ia,H as qi,pm as Qi,pn as Zi}from"./ntw4l0fkgqdiln85.js";import{R as Xi,I as Ji}from"./fz325pbgpjkh5w1d.js";import{S as ne,B as el}from"./hzqr5if7i3daaxip.js";import{P as me,p as E,u as gt,m as T}from"./bpohfx1xnu3xzig2.js";import{e as sl,a as fn,b as Rt,u as tl,d as al,c as hn,S as nl}from"./bf56avhsporbrci9.js";import{C as la}from"./j60v91uv8yx3ab7u.js";import{c as ol}from"./iej0cupg2dqkmejt.js";import{S as il}from"./da2k7j3rsrmehnit.js";import{S as ll}from"./m1w997decqdgni3k.js";import{S as ra}from"./df0qxunm628pb8pz.js";import{H as xn,M as rl}from"./g4tl5lt9yqf20m4s.js";import{j as cl}from"./jk8w36bsokizpx57.js";import{S as dl}from"./lrqm1ostopufphid.js";import{M as ul,a as gl,R as ml}from"./ckygfojr7gh4ys1w.js";import{S as pl}from"./eoh3qcov0jni3wda.js";import"./c4bxzbp1808foto4.js";import"./et8bgtraglvdyxgt.js";import"./lr2wtvbk3k0uolp8.js";function fl(s){return Ne({queryKey:["workspace",s,"owner_count"],queryFn:async()=>await F.getWorkspaceOwnerCount(s)})}function hl({workspace:s}){const t=v(),a=X(),o=Ft(),[i,l]=d.useState(""),r=s.isOwnerOfAccount(),u=fl(s.id),{data:c}=Ia(),[g,p]=d.useState(!1),[m,f]=d.useState(!1);if(!c)return null;const b=c.accountItems.find(S=>S.id!=s.id),C=()=>{Me.setLeaveWorkspaceData(null)},y=async()=>{if(o!=null){f(!0);try{await F.removeWorkspaceUser(s.id,o.id),p(!0)}catch{a.danger(t.formatMessage({id:"leaveWorkspaceModal.leaveFailed",defaultMessage:"Failed to leave workspace"}))}f(!1)}};if(g)return e.jsx(bl,{workspace:s,fallbackWorkspace:b,onClose:C});if(!u.data)return e.jsx(xl,{onClose:C});const N=u.data.total_count,A=u.data.owner_count;if(r&&A<2)return e.jsx(Ml,{workspace:s,onClose:C});const L=e.jsx(oe.Button,{onClick:()=>{Me.setLeaveWorkspaceData(null)},title:t.formatMessage({id:"leaveWorkspaceModal.cancel",defaultMessage:"Cancel"})}),I=e.jsx(oe.Button,{color:"danger",disabled:o==null||m||i==""||i.toLowerCase()!=o?.email?.toLowerCase(),title:t.formatMessage({id:"leaveWorkspaceModal.leaveButton",defaultMessage:"Leave workspace"}),onClick:()=>{y()}}),U=t.formatMessage({id:"leaveWorkspaceModal.leaveButton",defaultMessage:"Leave workspace"});return e.jsx(R,{isOpen:!0,onClose:C,showCloseButton:!0,type:"danger",title:t.formatMessage({id:"leaveWorkspaceModal.leaveWorkspace",defaultMessage:"Leave the {workspaceName} workspace"},{workspaceName:s.data.name}),primaryButton:I,secondaryButton:L,children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsx(Fo,{size:"large",src:s.data.profilePictureUrl}),e.jsxs("div",{className:"flex flex-col justify-around",children:[e.jsx("div",{className:"text-base font-semibold",children:s.data.name}),e.jsx("div",{className:"text-sm text-token-text-tertiary",children:e.jsx(n,{id:"leaveWorkspaceModal.memberCount",defaultMessage:`{memberCount, plural,
                  one {1 member}
                  other {{memberCount} members}
                }`,values:{memberCount:N}})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base font-semibold",children:e.jsx(n,{id:"leaveWorkspaceModal.leaveAreYouSure",defaultMessage:"Are you sure?"})}),e.jsxs("ul",{className:"ml-3 list-disc text-sm text-token-text-secondary",children:[e.jsx("li",{className:"mb-2",children:e.jsx(n,{id:"leaveWorkspaceModal.leaveWorkspaceWarning1",defaultMessage:"This will remove you from your workspace and you won't be able to access all data, including profile, settings, and chat history."})}),e.jsx("li",{children:e.jsx(n,{id:"leaveWorkspaceModal.leaveWorkspaceWarning2",defaultMessage:"You will lose access to all channels and messages in this workspace."})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base",children:U}),e.jsx(js,{ariaLabel:U,name:"typeEmailConfirm",value:i,onChange:S=>{l(S.target.value)}})]})]})})}function xl({onClose:s}){return e.jsx(R,{isOpen:!0,onClose:s,showCloseButton:!0,type:"warning",children:e.jsx("div",{className:"flex flex-row justify-center",children:e.jsx(Re,{})})})}function Ml({workspace:s,onClose:t}){const a=v(),o=e.jsx(oe.Button,{onClick:()=>{Me.setLeaveWorkspaceData(null)},title:a.formatMessage({id:"leaveWorkspaceModal.ok",defaultMessage:"OK"})});return e.jsx(R,{isOpen:!0,onClose:t,showCloseButton:!0,type:"danger",title:a.formatMessage({id:"leaveWorkspaceModal.cantLeaveWorkspace",defaultMessage:"Couldn't leave the {workspaceName} workspace"},{workspaceName:s.data.name}),secondaryButton:o,children:e.jsx(n,{id:"leaveWorkspaceModal.lastOwnerWarning",defaultMessage:"Because you're the only owner in the {workspaceName} workspace, assign the owner role to another member before leaving.",values:{workspaceName:s.data.name}})})}function bl({workspace:s,fallbackWorkspace:t,onClose:a}){const o=Ye(),i=v(),l=X(),r=Is(p=>p.currentWorkspace),u=Ka(),c=()=>{if(t!=null&&r)if(Me.setLeaveWorkspaceData(null),r.id==s.id){const{willRedirect:p}=po(o,t.id,u,i,l);p||Jt()}else o.invalidateQueries({queryKey:["account-status"]});else Me.setLeaveWorkspaceData(null),xs.deleteCookie(Ms.Workspace),xs.deleteCookie(Ms.WorkspaceResidencyRegion),Jt();a()},g=t!=null?e.jsx(oe.Button,{color:"primary",onClick:c,title:i.formatMessage({id:"leaveWorkspaceModal.done",defaultMessage:"Done"})}):e.jsx(oe.Button,{color:"primary",onClick:c,title:i.formatMessage({id:"leaveWorkspaceModal.startPersonalAccount",defaultMessage:"Start using ChatGPT for free"})});return e.jsx(R,{isOpen:!0,onClose:c,primaryButton:g,type:"success",title:i.formatMessage({id:"leaveWorkspaceModal.leftWorkspaceTitle",defaultMessage:"Successfully left the {workspaceName} workspace"},{workspaceName:s.data.name}),children:e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx("p",{children:t!=null?e.jsx(n,{id:"leaveWorkspaceModal.leftWorkspaceDescription",defaultMessage:"You have successfully left the {workspaceName} workspace.",values:{workspaceName:s.data.name}}):e.jsx(n,{id:"leaveWorkspaceModal.leftWorkspaceDescriptionNoOtherWorkspaces",defaultMessage:"You have successfully left the {workspaceName} workspace. This will create your personal workspace automatically.",values:{workspaceName:s.data.name}})})})})}function Cl(){const s=v(),t=Js(o=>o.activeModals.has(Ae.AgeVerificationInterstitial));return e.jsxs(R,{type:"success",isOpen:t,onClose:Et,title:s.formatMessage(Ue.title),children:[e.jsxs("div",{className:"text-token-text-secondary",children:[e.jsx("p",{className:"mb-4",children:e.jsx(n,{...Ue.description0})}),e.jsx(ca,{children:e.jsx(n,{...Ue.subtitle1})}),e.jsxs("ol",{className:"mb-4 ml-4 list-decimal",children:[e.jsx("li",{className:"",children:e.jsx(n,{...Ue.description1Bullet1})}),e.jsx("li",{children:e.jsx(n,{...Ue.description1Bullet2})})]}),e.jsx("p",{className:"mb-4 font-semibold",children:e.jsx(n,{...Ue.description1a})}),e.jsx("p",{className:"mb-4",children:e.jsx(n,{...Ue.description1b})}),e.jsx(ca,{children:e.jsx(n,{...Ue.subtitle2})}),e.jsx("p",{className:"mb-4",children:e.jsx(n,{...Ue.description2,values:{learnMoreLink:o=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:o})}})})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(H,{color:"primary",as:"link",to:"https://platform.openai.com/verify-age",openNewTab:!0,onClick:()=>Me.closeModal(Ae.AgeVerificationInterstitial),icon:Ya,children:e.jsx(n,{...Ue.redirect})})})]})}const ca=ke.h3`text-token-text-primary text-base mb-1`,Ue=V({title:{id:"AgeVerificationInterstitial.title",defaultMessage:"Please verify your age"},redirect:{id:"AgeVerificationInterstitial.redirect",defaultMessage:"Sign in on platform.openai.com"},description0:{id:"AgeVerificationInterstitial.description0",defaultMessage:"To continue using ChatGPT, you need to complete a brief age verification check"},subtitle1:{id:"AgeVerificationInterstitial.title1",defaultMessage:"What will happen next?"},description1Bullet1:{id:"AgeVerificationInterstitial.description1",defaultMessage:"You will be redirected to platform.openai.com where you will need to sign in."},description1Bullet2:{id:"AgeVerificationInterstitial.description2",defaultMessage:"You will then be redirected to Yoti, our age verification provider, to verify your age."},description1a:{id:"AgeVerificationInterstitial.description1a",defaultMessage:"If you are between the ages of 13 and 17, your parent or guardian must complete the age verification check on your behalf."},description1b:{id:"AgeVerificationInterstitial.description1b",defaultMessage:"The process is quick and secure."},subtitle2:{id:"AgeVerificationInterstitial.title2",defaultMessage:"Why do I need to do this?"},description2:{id:"AgeVerificationInterstitial.description2-v3",defaultMessage:"We are required to verify that our users in Italy are old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."}});function yl(){return et(Ae.CookieManagement)?e.jsx(jl,{onClose:()=>{Me.closeModal(Ae.CookieManagement)}}):null}function jl({onClose:s}){const t=v(),a=X(),{isUnauthenticated:o}=at(),{data:i}=Do(),l=i?.serverPrimedAllowBrowserStorageValue??!1,r=i?.isStorageComplianceEnabled??!1,u=Oo({serverPrimedAllowBrowserStorageValue:l,enabled:r&&!o}),[c,g]=d.useState(l),p=o?c:u,m=h=>{xs.setCookie(Ms.AllowNonessential,h,{maxAge:Bo,domain:fo}),o?g(h):f.mutateAsync({analytics_cookies_accepted:h},{onSuccess(){a.success(t.formatMessage(we.updateSuccess))},onError(){a.danger(t.formatMessage(we.updateFailure))}})};d.useEffect(()=>{if(o){const h=xs.getCookie(Ms.AllowNonessential)??l;g(h)}},[o,l]),d.useEffect(()=>{Be.addAction("privacy_policy.show_manage_cookies_modal")},[]);const f=Uo();return e.jsx(R,{type:"success",isOpen:!0,onClose:s,title:t.formatMessage(we.title),showCloseButton:!0,children:e.jsxs("div",{className:"text-sm text-token-text-secondary",children:[e.jsx(n,{...we.description,values:{cookiePolicy:h=>e.jsx("a",{className:"underline",href:"https://openai.com/policies/privacy-policy",children:h})}}),e.jsxs(da,{children:[e.jsxs(ua,{children:[e.jsx(ga,{children:t.formatMessage(we.preference1title)}),e.jsx(ma,{children:t.formatMessage(we.preference1desc)})]}),e.jsx(st,{onChange:Et,enabled:!0,disabled:!0,label:t.formatMessage(we.preference1toggle)})]}),e.jsxs(da,{children:[e.jsxs(ua,{children:[e.jsx(ga,{children:t.formatMessage(we.preference2title)}),e.jsx(ma,{children:t.formatMessage(we.preference2desc)})]}),e.jsx(st,{onChange:m,enabled:!!p,label:t.formatMessage(we.preference2toggle)})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-black/10 pt-4 dark:border-white/10",children:[e.jsx(H,{color:"secondary",onClick:()=>m(!1),children:e.jsx(n,{...we.reject})}),e.jsx(H,{color:"secondary",onClick:()=>m(!0),children:e.jsx(n,{...we.accept})})]})]})})}const da=ke.div`flex gap-4 border-t last:border-b border-black/10 dark:border-white/10 py-4 mt-4 text-token-text-secondary`,ua=ke.div`flex gap-2 flex-col `,ga=ke.p`font-semibold text-sm text-token-text-primary`,ma=ke.p`text-xs`,we=V({title:{id:"ManageCookiesModal.title",defaultMessage:"Manage cookies"},description:{id:"ManageCookiesModal.description",defaultMessage:"OpenAI uses cookies to improve your experience and analyze site traffic. For more information, read our <cookiePolicy>cookie policy</cookiePolicy>."},preference1title:{id:"ManageCookiesModal.preference1title",defaultMessage:"Essential"},preference1desc:{id:"ManageCookiesModal.preference1desc.0",defaultMessage:"These cookies are required to operate our Services. For example, they allow us to authenticate users or enable specific features within the Services, including for security purposes."},preference1toggle:{id:"ManageCookiesModal.preference1toggle",defaultMessage:"Allow essential cookies"},preference2title:{id:"ManageCookiesModal.preference2title",defaultMessage:"Analytics"},preference2desc:{id:"ManageCookiesModal.preference2desc.0",defaultMessage:"These cookies help us analyze and understand how our Services perform and are used, such as the number of users, how they interact with our Services, and time spent using the Services."},preference2toggle:{id:"ManageCookiesModal.preference2toggle",defaultMessage:"Allow analytics cookies"},reject:{id:"ManageCookiesModal.reject",defaultMessage:"Reject all"},accept:{id:"ManageCookiesModal.accept",defaultMessage:"Accept all"},updateSuccess:{id:"ManageCookiesModal.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"ManageCookiesModal.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}});function Wt(){const s=Se(),{layer:t}=Pt("468168202");return{isSplitBetweenPersonalAndBusinessEnabled:t.get("is_split_between_personal_and_business_enabled",!1),isModalFullscreen:t.get("is_modal_fullscreen",!1),isTeamEnabled:t.get("is_team_enabled",!0)||s?.isTeam(),isV2ToggleLabelsEnabled:t.get("is_v2_toggle_labels_enabled",!1)}}function vl({ariaLabel:s,className:t,leftItem:a,onChange:o,rightItem:i,value:l}){const r=v(),u=l===a.value;return e.jsx(Xi,{type:"single","aria-label":r.formatMessage(s),onClick:()=>{o(u?i.value:a.value)},value:l,className:ts("cursor-pointer select-none rounded-full border border-solid border-token-border-light bg-token-main-surface-tertiary p-0.5",t),children:e.jsxs("div",{className:"relative grid grid-cols-2",children:[e.jsx(pa,{...a,isSelected:l===a.value}),e.jsx(pa,{...i,isSelected:l===i.value})]})})}function pa({ariaLabel:s,isSelected:t,label:a,value:o}){const i=v();return e.jsxs("div",{className:"relative z-10 px-3 py-1.5 text-center text-sm font-semibold",children:[e.jsx(Ji,{"aria-label":i.formatMessage(s),className:ts({"text-token-text-primary":t,"text-token-text-tertiary":!t}),value:o,children:e.jsx(n,{...a})}),t?e.jsx(It.div,{transition:{duration:.05},layoutId:"SegmentedControlToggleItem-selectedBackground",className:"absolute inset-0 -z-10 rounded-full bg-token-main-surface-primary"}):null]})}function fa({value:s,onChange:t}){const{isV2ToggleLabelsEnabled:a}=Wt();return e.jsx(vl,{value:s,onChange:t,ariaLabel:Ve.toggleArialabel,leftItem:{ariaLabel:a?Ve.toggleForIndividualsArialabel:Ve.togglePersonalArialabel,label:a?Ve.toggleForIndividualsLabel:Ve.togglePersonalLabel,value:"personal"},rightItem:{ariaLabel:a?Ve.toggleForTeamsArialabel:Ve.toggleBusinessArialabel,label:a?Ve.toggleForTeamsLabel:Ve.toggleBusinessLabel,value:"business"}})}const Ve=V({toggleArialabel:{id:"U4v2Gf",defaultMessage:"Toggle for switching between Personal and Business plans"},togglePersonalArialabel:{id:"6Wikht",defaultMessage:"Toggle for switching to Personal plans"},toggleForIndividualsArialabel:{id:"DNEy0d",defaultMessage:"Toggle for switching to plans for individuals"},toggleBusinessArialabel:{id:"uzlEV0",defaultMessage:"Toggle for switching to Business plans"},toggleForTeamsArialabel:{id:"ADnxet",defaultMessage:"Toggle for switching to plans for teams"},togglePersonalLabel:{id:"cGDsaD",defaultMessage:"Personal"},toggleForIndividualsLabel:{id:"FLfLeO",defaultMessage:"For Individuals"},toggleBusinessLabel:{id:"sgisa2",defaultMessage:"Business"},toggleForTeamsLabel:{id:"VKVfzi",defaultMessage:"For Teams"}});function Sl({value:s,onValueChange:t,displayNameFormatterFn:a,testId:o}){const i=[s],l=Ro.filter(r=>r!=s);return e.jsx("div",{"data-testid":o,children:e.jsxs(ne.Root,{value:s,onValueChange:t,children:[e.jsxs(ne.Trigger,{children:[e.jsx(ne.Value,{}),e.jsx(ne.Icon,{})]}),e.jsx(ne.Portal,{children:e.jsxs(ne.Content,{side:void 0,sideOffset:void 0,position:"popper",style:{maxHeight:480},children:[i.map(r=>e.jsx(ne.Item,{value:r,children:a(r)},r)),e.jsx(ne.Separator,{}),l.map(r=>e.jsx(ne.Item,{value:r,children:a(r)},r))]})})]})})}const Mn=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 19C6.44772 19 6 18.5523 6 18C6 16.3077 6.81186 15.0179 7.98298 14.1851C9.12436 13.3734 10.5892 13 12 13C13.4108 13 14.8756 13.3734 16.017 14.1851C17.1881 15.0178 18 16.3076 18 18C18 18.5523 17.5523 19 17 19C15.6012 19 8.39878 19 7 19Z",fill:"currentColor"}),d.createElement("path",{d:"M19.5 18C19.5 18 19.5 18 19.5 18C19.5 16.0565 18.6712 14.498 17.4529 13.4137C18.0999 13.1329 18.8086 13 19.5 13C20.5581 13 21.6567 13.3112 22.5128 13.9875C23.3911 14.6815 24 15.7564 24 17.1667C24 17.6269 23.6642 18 23.25 18H19.5Z",fill:"currentColor"}),d.createElement("path",{d:"M6.54712 13.4137C5.32885 14.498 4.5 16.0564 4.5 18C4.5 18 4.5 18 4.5 18L0.75 18C0.335786 18 0 17.6269 0 17.1667C0 15.7564 0.608892 14.6815 1.48723 13.9875C2.34327 13.3112 3.44193 13 4.5 13C5.19138 13 5.90009 13.1329 6.54712 13.4137Z",fill:"currentColor"}),d.createElement("path",{d:"M12 5C10.067 5 8.5 6.567 8.5 8.5C8.5 10.433 10.067 12 12 12C13.933 12 15.5 10.433 15.5 8.5C15.5 6.567 13.933 5 12 5Z",fill:"currentColor"}),d.createElement("path",{d:"M4.5 7C3.11929 7 2 8.11929 2 9.5C2 10.8807 3.11929 12 4.5 12C5.88071 12 7 10.8807 7 9.5C7 8.11929 5.88071 7 4.5 7Z",fill:"currentColor"}),d.createElement("path",{d:"M19.5 7C18.1193 7 17 8.11929 17 9.5C17 10.8807 18.1193 12 19.5 12C20.8807 12 22 10.8807 22 9.5C22 8.11929 20.8807 7 19.5 7Z",fill:"currentColor"})),Bs=()=>{k.logEvent(w.clickAccountPaymentGetHelp)};function kl(s,t){switch(s){case re.FREE:return"green";case re.PLUS:return"green";case re.TEAM:return t?"primary":"blue";case re.PRO:return"primary";case re.ENTERPRISE:return"secondary";case re.EDU:return"secondary";case re.QUORUM:return"secondary"}}function ss({isCurrentPlan:s,planType:t,disabled:a,onClick:o,children:i,testId:l,isProduceDesign:r,activeColor:u,...c}){return e.jsx(H,{fullWidth:!0,size:"large",color:s?"secondary":u||kl(t,r),disabled:a,onClick:o,"data-testid":l,className:r&&a?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary":r?"font-semibold":"",...c,children:i})}const wl=ke.div`${s=>s.plusInactiveProduce?"mt-4":""} text-sm relative flex-1 flex gap-5 flex-col border-token-border-light ${s=>{const t=s.isModalFullscreen?"border-t border-l border-r border-b rounded-xl md:min-h-[30rem] md:rounded-none md:border-r-0 md:last:border-r md:first:rounded-tl-xl md:first:rounded-bl-xl md:last:rounded-tr-xl md:last:rounded-br-xl md:max-w-96 justify-center px-6 pt-6 pb-10 md:pb-6":"md:border-r last:border-r-0 md:border-t-0 border-t py-4 px-6",a=s.plusInactiveProduce?"border-t border-l border-r border-b rounded-xl md:first:rounded-tl-xl md:first:rounded-bl-xl md:last:rounded-tr-xl md:last:rounded-br-xl md:max-w-96 justify-center px-6 pt-6 pb-10 md:pb-6 md:min-h-[20rem] -mt-4 -mb-4 border-green-600 bg-green-600 bg-opacity-5":"";return`${s.plusInactiveProduce?a:t}`}}`,Vs=ke.div`
  relative flex flex-col ${s=>s.plusInactiveProduce?"":"bg-token-main-surface-primary"}
`,El=ke.div`flex flex-col flex-grow gap-2`,Pl=ke.div`
  relative ${s=>s.plusInactiveProduce?"":"bg-token-main-surface-primary"}
`,ha=ke.div`
  relative flex flex-col text-xs text-token-text-secondary ${s=>s.plusInactiveProduce?"":"bg-token-main-surface-primary"}
`,ks=({planName:s,pricingPlan:t,callToActionButton:a,className:o,showForLine:i=!0,icon:l=void 0,additionalLinks:r=[],plusInactive:u=!1,billingDetails:c})=>{const{isModalFullscreen:g}=Wt(),{layer:p}=Pt("3768341700"),m=p.get("is_produce_design",!1),f=u&&m,h=At(),[b,C,y]=Al(t,c.currency),N=v();return e.jsxs(wl,{className:o,"data-testid":`${s}-pricing-modal-column`,isModalFullscreen:g,plusInactiveProduce:f,children:[m?e.jsx(Vs,{plusInactiveProduce:f,className:f?"mt-4":"",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center gap-2 text-2xl font-semibold",children:[m?"":l??"",e.jsx(n,{...t.name}),f&&e.jsx("span",{className:"ml-1 rounded border border-green-600 px-1 py-0 text-xs font-bold text-green-600",children:e.jsx(n,{id:"popular",defaultMessage:"POPULAR"})})]}),b&&e.jsx("div",{className:"ml-4 mt-2 flex items-baseline gap-1.5",children:e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"absolute -left-4 -top-0 text-2xl text-token-text-secondary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{...y.sign})}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("p",{className:"text-5xl text-token-text-primary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{...b})}),e.jsxs("div",{className:"flex flex-col items-start justify-center",children:[e.jsx("p",{className:"absolute mb-6 text-xs text-token-text-tertiary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{id:"PricingModalColumn.currencyCodeWithSlash",defaultMessage:"{currencyCode}/",values:{currencyCode:N.formatMessage(y.code)}})}),e.jsx("p",{className:"text-xs text-token-text-tertiary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{id:"frequency",defaultMessage:"month"})})]})]})]})}),C&&h?e.jsx("p",{className:"mb-3 mt-6 text-sm text-token-text-tertiary","data-testid":`${s}-pricing-column-cost-subtitle`,children:e.jsx(n,{...C})}):null,t.summary?e.jsx("p",{className:"mr-2 mt-2 text-base text-token-text-primary","data-testid":`${s}-pricing-column-cost-subtitle`,children:e.jsx(n,{...t.summary})}):null]})}):e.jsx(Vs,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center gap-2 text-xl font-semibold",children:[l??"",e.jsx(n,{...t.name})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("p",{className:"text-base text-token-text-tertiary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{...b})}),C?e.jsx("p",{className:"text-xs text-token-text-tertiary","data-testid":`${s}-pricing-column-cost-subtitle`,children:e.jsx(n,{...C})}):null]})]})}),e.jsx(Vs,{children:a}),e.jsxs(El,{children:[i&&t.forLine&&e.jsx(Vs,{children:e.jsx("p",{className:"text-l font-semibold",children:e.jsx(n,{...t.forLine})})}),t.advertisedFeatures?.map((A,L)=>e.jsx(Pl,{plusInactiveProduce:f,children:e.jsxs("div",{className:"text-l flex justify-start gap-2",children:[e.jsx(ho,{className:"mt-0.5 h-4 w-4 shrink-0"}),e.jsx("span",{children:e.jsx(n,{...A,values:{link:I=>e.jsx(K,{className:"underline",target:"_blank",rel:"noreferrer",to:A.link??"",children:I}),article:I=>e.jsx(K,{className:"underline",target:"_blank",rel:"noreferrer",to:A.article??"",children:I}),modelName:"GPT‑4o"}})})]})},L))]}),e.jsxs("div",{children:[r.length>0&&e.jsx(ha,{plusInactiveProduce:f,children:r.map((A,L)=>e.jsx("div",{children:A},L))}),t.disclaimer&&e.jsx(ha,{plusInactiveProduce:f,className:"px-2",children:e.jsx("div",{children:e.jsx(n,{...t.disclaimer,values:{link:A=>e.jsx(K,{className:"underline",target:"_blank",rel:"noreferrer",to:t.disclaimer?.link??"",children:A}),article:A=>e.jsx(K,{className:"underline",target:"_blank",rel:"noreferrer",to:t?.disclaimer?.article??"",children:A})}})})})]})]})};function Al(s,t){return t==za?[s.cost.costInEuros,s.cost.costInEurosSubtitle,$a]:t==qa?[s.cost.costInPounds,s.cost.costInPoundsSubtitle,Qa]:[s.cost.costInDollars,s.cost.costInDollarsSubtitle,Za]}const xa=re.ENTERPRISE,Tl={[me.Default]:E.enterprise,[me.Scallion]:E.enterprise,[me.Chive]:E.enterprise,[me.ProduceDesign]:E.enterpriseProduceExp},bn=({isProduceDesign:s=!1,enterprisePricingPlanProduce:t=null,billingDetails:a})=>{const i=Se()?.isEnterprisey(),l=gt(),r=t||nt(Tl[l]);return e.jsx(ks,{icon:e.jsx(Mn,{className:"icon-md text-brand-purple"}),planName:"enterprise",pricingPlan:r,showForLine:!0,callToActionButton:i?e.jsx(H,{color:"secondary",disabled:!0,size:"large",className:s?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:e.jsx(n,{...E.free.callToAction.inactive})}):e.jsx(ss,{planType:xa,as:"link",to:St,openNewTab:!0,onClick:()=>{k.logEvent(w.clickEnterpriseContactSalesButton),te.logEvent("chatgpt_account_payment_modal_enterprise_sales_button_clicked",xa)},isCurrentPlan:!1,testId:"select-plan-button-enterprise",isProduceDesign:s,children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(n,{...E.enterprise.callToAction.inactive})})}),billingDetails:a})},Nl={[me.Default]:E.freeDefault,[me.Scallion]:E.freeNeptune,[me.Chive]:E.freeChive,[me.ProduceDesign]:E.freeProduceExp},Cn=({isProduceDesign:s=!1,freePricingPlanProduce:t=null,billingDetails:a})=>{const o=lt(),i=gt(),l=t||nt(Nl[i]);return e.jsx(ks,{planName:"free",pricingPlan:l,icon:e.jsx(sl,{className:"icon-md"}),showForLine:!o,callToActionButton:e.jsx(H,{color:"secondary",disabled:!0,size:"large",className:s?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:e.jsx(n,{...E.free.callToAction.inactive})}),additionalLinks:[e.jsx(n,{..._l.haveExistingPlan,values:{link:r=>e.jsx(K,{target:"_blank",to:Os,onClick:Bs,className:"underline",children:r},"row-plus-plan-help-link")}},"existing-plan-help")],billingDetails:a})},_l=V({haveExistingPlan:{id:"FreeColumn.haveExistingPlan",defaultMessage:"Have an existing plan? See <link>billing help</link>"}}),Ll=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.22222 20C1.54721 20 1 19.4563 1 18.7857C1 16.7307 1.99227 15.1645 3.42364 14.1533C4.81866 13.1677 6.60907 12.7143 8.33333 12.7143C10.0576 12.7143 11.848 13.1677 13.243 14.1533C14.6744 15.1645 15.6667 16.7307 15.6667 18.7857C15.6667 19.4563 15.1195 20 14.4444 20C12.7348 20 3.93184 20 2.22222 20Z",fill:"currentColor"}),d.createElement("path",{d:"M17.5 18.7857C17.5 16.4257 16.487 14.5332 14.998 13.2166C15.7888 12.8756 16.655 12.7143 17.5 12.7143C18.7932 12.7143 20.136 13.0921 21.1823 13.9134C22.2558 14.7561 23 16.0613 23 17.7738C23 18.3327 22.5896 18.7857 22.0833 18.7857H17.5Z",fill:"currentColor"}),d.createElement("path",{d:"M8.33333 2.99998C5.97078 2.99998 4.05556 4.90277 4.05556 7.24998C4.05556 9.5972 5.97078 11.5 8.33333 11.5C10.6959 11.5 12.6111 9.5972 12.6111 7.24998C12.6111 4.90277 10.6959 2.99998 8.33333 2.99998Z",fill:"currentColor"}),d.createElement("path",{d:"M17.5 5.42856C15.8125 5.42856 14.4444 6.78769 14.4444 8.46427C14.4444 10.1408 15.8125 11.5 17.5 11.5C19.1875 11.5 20.5556 10.1408 20.5556 8.46427C20.5556 6.78769 19.1875 5.42856 17.5 5.42856Z",fill:"currentColor"})),Te=V({sendEmailFailure:{id:"emailVerify.sendEmailFailure",defaultMessage:"Could not send email verification code, please try again later."},sendEmailFailureInvalidEmail:{id:"emailVerify.invalidEmail",defaultMessage:'The email address "{email}" is not formatted correctly.'},sendEmailFailureInvalidEmailEmpty:{id:"emailVerify.invalidEmailEmpty",defaultMessage:"Please enter a valid email address to continue."},sendEmailFailureRateLimited:{id:"emailVerify.sendEmailFailure.rateLimited",defaultMessage:"You've sent too many requests. Please try again later."},verifyOtpFailure:{id:"emailVerify.verifyOtpFailure",defaultMessage:"Something went wrong, please try again later."},verifyOtpFailureInvalidOtp:{id:"emailVerify.verifyOtpFailure.invalidOtp",defaultMessage:"The code you entered is invalid. Please try again."},verifyOtpFailureInvalidFormat:{id:"emailVerify.verifyOtpFailure.invalidFormat",defaultMessage:"The code you entered is formatted incorrectly."},verifyOtpFailureEmailAlreadyLinked:{id:"emailVerify.verifyOtpFailure.emailAlreadyLinked",defaultMessage:'{branch, select, email {"{emailValue}"} other {Your email}} is already linked to another account.'},verifyOtpFailureRateLimited:{id:"emailVerify.verifyOtpFailure.rateLimited",defaultMessage:"You've sent too many requests. Please try again later."},verifyOtpSuccess:{id:"emailVerify.verifyOtpSuccess",defaultMessage:"Email confirmed."}});class Ma extends Error{constructor(t){super(t),this.name="EmailValidationError"}}const Il=(s,t)=>t.trim()===""?s.formatMessage(Te.sendEmailFailureInvalidEmailEmpty):/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)?null:s.formatMessage(Te.sendEmailFailureInvalidEmail,{email:t}),yn=(s,t)=>{switch(t.status){case 429:throw new Error(s.formatMessage(Te.sendEmailFailureRateLimited));default:return}};function Fl(s){const t=X(),a=v(),o=cs({mutationFn:async i=>{try{const l=Il(a,i);if(l)throw new Ma(l);return await F.addEmailBegin(i)}catch(l){throw l instanceof Ma?l:(l instanceof yt&&yn(a,l),new Error(a.formatMessage(Te.sendEmailFailure)))}},onSuccess:()=>{s.setStep("verifyOtp")},onError:i=>{t.danger(i.message)}});return e.jsx("form",{onSubmit:i=>{i.preventDefault(),o.mutate(s.email)},noValidate:!0,children:e.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[e.jsx("p",{className:"text-3xl font-semibold",children:s.title?s.title:e.jsx(n,{id:"emailVerify.enterEmailTitle",defaultMessage:"Add your email"})}),s.description&&e.jsx("p",{className:"text-center text-base text-token-text-primary",children:s.description}),e.jsx(js,{ariaLabel:a.formatMessage({id:"emailVerify.emailAddress",defaultMessage:"Email Address"}),placeholder:a.formatMessage({id:"emailVerify.emailAddressPlaceholder",defaultMessage:"Email Address"}),name:"email",type:"email",className:"mt-6 w-full",value:s.email,onChange:i=>s.onEmailChange(i.target.value),autoFocus:!0,autoComplete:"email"}),e.jsx(H,{className:"w-full rounded-md",color:"green",type:"submit",loading:o.isPending,disabled:o.isPending,children:e.jsx(n,{id:"emailVerify.continue",defaultMessage:"Continue"})}),s.cancelFlowButton]})})}class ba extends Error{constructor(t){super(t),this.name="OtpValidationError"}}const Dl=(s,t)=>{if(t.length!==6)return s.formatMessage(Te.verifyOtpFailureInvalidFormat);try{parseInt(t)}catch{return s.formatMessage(Te.verifyOtpFailureInvalidFormat)}return null},Ol=(s,t,a)=>{switch(a.status){case 403:throw new Error(s.formatMessage(Te.verifyOtpFailureEmailAlreadyLinked,{branch:t?"email":"other",emailValue:t}));case 429:throw new Error(s.formatMessage(Te.verifyOtpFailureRateLimited));case 422:throw new Error(s.formatMessage(Te.verifyOtpFailureInvalidOtp));default:return}};function Ul(s){const t=v(),a=X(),o=Ye(),i=d.useCallback(u=>{const c=u.target.value.trim();if(typeof c=="string"){if(c.match(/\D/)){u.preventDefault();return}s.onOtpChange(c.substring(0,6))}},[s]),l=cs({mutationFn:async u=>{try{return await F.addEmailBegin(u)}catch(c){throw c instanceof yt&&yn(t,c),new Error(t.formatMessage(Te.sendEmailFailure))}},onSuccess:()=>{s.setStep("verifyOtp")},onError:u=>{a.danger(u.message)}}),r=cs({mutationFn:async u=>{try{const c=Dl(t,u.code);if(c)throw new ba(c);await F.addEmailVerify(u.email,u.code),await xo(o)}catch(c){throw c instanceof ba?c:(c instanceof yt&&Ol(t,s.email,c),new Error(t.formatMessage(Te.verifyOtpFailure)))}},onSuccess:()=>{a.success(t.formatMessage(Te.verifyOtpSuccess)),s.onVerified?.()},onError:u=>{a.danger(u.message)}});return e.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[e.jsx("p",{className:"text-3xl font-semibold",children:e.jsx(n,{id:"verifyOtp.title",defaultMessage:"Check your email"})}),e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"text-base text-token-text-primary",children:e.jsx(n,{id:"verifyOtp.description",defaultMessage:"Enter the verification code we just sent to"})}),s.email&&e.jsx("br",{}),e.jsx("span",{className:`text-base leading-snug text-token-text-primary ${s.email&&"font-semibold"}`,children:e.jsx(n,{id:"verifyOtp.email",defaultMessage:"{branch, select, email {{emailValue}} other { your email.}}",values:{branch:s.email?"email":"other",emailValue:s.email}})})]}),e.jsxs("form",{onSubmit:u=>{u.preventDefault(),r.mutate({code:s.otp,email:s.email??""})},className:"flex w-full flex-col items-center gap-3",children:[e.jsx(js,{ariaLabel:t.formatMessage({id:"emailVerify.otpAriaLabel",defaultMessage:"OTP"}),value:s.otp,onChange:i,name:"otp",type:"text",placeholder:"XXXXXX",className:"mt-6 w-full",autoComplete:"off",autoFocus:!0}),e.jsx(H,{className:"w-full rounded-md",color:"green",type:"submit",loading:r.isPending,disabled:r.isPending,children:e.jsx(n,{id:"verifyOtp.continue",defaultMessage:"Continue"})}),s.cancelFlowButton]}),e.jsxs("div",{className:"mt-6 flex w-full flex-col items-center gap-3",children:[e.jsx("p",{className:"text-sm text-token-text-primary",children:e.jsx(n,{id:"verifyOtp.resendMessage",defaultMessage:"Didn’t receive the code?"})}),e.jsx(H,{className:"w-full rounded-md",color:"secondary",onClick:()=>l.mutate(s.email??""),loading:l.isPending,disabled:l.isPending,children:e.jsx(n,{id:"verifyOtp.resend",defaultMessage:"Resend code"})}),e.jsx(H,{className:"w-full rounded-md",color:"secondary",onClick:()=>s.setStep("enterEmail"),children:e.jsx(n,{id:"verifyOtp.changeEmail",defaultMessage:"Change email"})})]})]})}function mt(s){const[t,a]=d.useState(s.initialStep??"enterEmail"),[o,i]=d.useState(""),[l,r]=d.useState(""),u=s.email?{email:s.email,onEmailChange:s.onEmailChange}:{email:o,onEmailChange:i},c=s.otp?{otp:s.otp,onOtpChange:s.onOtpChange}:{otp:l,onOtpChange:r};return t==="enterEmail"?e.jsx(Fl,{title:s.enterEmailTitle,description:s.enterEmailDescription,cancelFlowButton:s.cancelFlowButton,step:t,setStep:a,...u}):e.jsx(Ul,{email:u.email,onVerified:s.onVerified,cancelFlowButton:s.cancelFlowButton,step:t,setStep:a,...c})}const Bl=ls.HasDismissedUpgradeInviteModal,Rl={hasDismissedUpgradeInviteModal:!!fs.getItem(Bl)};Fa()(()=>({...Rl}));const Wl=()=>{const{isUnauthenticated:s,isLoading:t}=at();return Ne({queryKey:["updateInvites",s],queryFn:async()=>s?{plus:null,team:null}:await F.getUpgradeInvites(),enabled:!t})},Ca=V({plusWaitlistSignupSuccess:{id:"pricingPlanConstants.plusWaitlistSignupSuccess",defaultMessage:"You've been added to the waitlist to upgrade to Plus"},teamWaitlistSignupSuccess:{id:"pricingPlanConstants.teamWaitlistSignupSuccess",defaultMessage:"You've been added to the waitlist to upgrade to Team"}}),Gl={[re.PLUS]:{localStorageKeyByVersion:{V1:ls.HasSignedUpForPlusUpgradeWaitlistV1,V2:ls.HasSignedUpForPlusUpgradeWaitlistV2},onSuccessMessage:Ca.plusWaitlistSignupSuccess},[re.TEAM]:{localStorageKeyByVersion:{V1:ls.HasSignedUpForTeamUpgradeWaitlistV1,V2:ls.HasSignedUpForTeamUpgradeWaitlistV2},onSuccessMessage:Ca.teamWaitlistSignupSuccess}},Gt=s=>{const t=v(),a=X(),{localStorageKeyByVersion:o,onSuccessMessage:i}=Gl[s],l=o.V1,r=o.V2,[u]=d.useState(!!fs.getItem(l)),[c,g]=d.useState(!!fs.getItem(r)),{data:p}=Wl(),m=()=>{g(!0),fs.setItem(r,!0),a.success(t.formatMessage(i),{hasCloseButton:!0,duration:5}),k.logEvent(w.upgradePlanWaitlistSignup,{plan:s})};return{hasSignedUpForWaitlist:u||c,isEligibleToUpgrade:!!p?.plus||u,signUpForWaitlist:m}},gs=re.TEAM,jn=({analyticsParams:s,isPlanLoading:t,isProduceDesign:a=!1,teamPricingPlanProduce:o=null,billingDetails:i})=>{const{data:l,refetch:r}=Ne(rt),c=ot()?.includes("disable_team_upgrade_ui"),g=v(),p=Se(),m=Ss(),[f,h]=d.useState(!1),{hasSignedUpForWaitlist:b,signUpForWaitlist:C}=Gt(gs),y=p&&p.isTeam(),N=p&&p.isPlus(),A={...s,planType:gs,isUpgradeUiDisabled:c},L=!!l?.email,I=lt(),U=o||(a?E.teamsProduceExp:I?E.teamsNeptune:E.teams),S=$=>{if(!L&&!$){h(!0);return}k.logEvent(w.clickAccountPaymentCheckout,A),te.logEvent("chatgpt_account_payment_modal_upgrade_button_click",gs),Me.setPurchaseWorkspaceData({minimumSeats:kt,billingDetails:i}),Xa(m)};return e.jsxs(e.Fragment,{children:[e.jsx(ks,{planName:"team",pricingPlan:U,icon:e.jsx(Ll,{className:"icon-md text-brand-blue-800"}),callToActionButton:e.jsxs("div",{className:"flex flex-col gap-2",children:[y&&e.jsx(ss,{planType:gs,isCurrentPlan:!0,disabled:t||y,onClick:()=>S(),testId:"select-plan-button-teams-upgrade",isProduceDesign:a,children:g.formatMessage(E.teams.callToAction.active)}),c?e.jsx("div",{className:"relative w-full",children:e.jsx(ve,{side:"bottom",sideOffset:20,label:g.formatMessage(E.disabledHighDemand.hoverText),children:e.jsx(ss,{planType:gs,isCurrentPlan:!1,disabled:b,onClick:C,testId:"select-plan-button-teams-waitlist",isProduceDesign:a,children:e.jsx(n,{...b?E.signUpForWaitlist.inactive:E.signUpForWaitlist.active})})})}):e.jsx("div",{className:"w-full",children:e.jsx(ss,{planType:gs,isCurrentPlan:!1,disabled:t,onClick:()=>S(),testId:"select-plan-button-teams-create",isProduceDesign:a,children:y||N?g.formatMessage(U.callToAction.create):g.formatMessage(U.callToAction.inactive)})})]}),billingDetails:i}),e.jsx(R,{isOpen:f,onClose:()=>h(!1),type:"success",className:"max-w-sm",children:e.jsx(mt,{enterEmailDescription:g.formatMessage(Hl.addEmailDescription),onVerified:()=>{h(!1),r(),S(!0)}})})]})},Hl=V({addEmailDescription:{id:"AccountPaymentModal.addEmailDescriptionTeam",defaultMessage:"To upgrade to Team, please add your email."},cancelAddEmail:{id:"AccountPaymentModal.cancelAddEmail",defaultMessage:"Cancel"}}),z=V({freeAdvertisedFeaturesProduce1:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce1",defaultMessage:"Limited access to GPT-4o"},plusAdvertisedFeaturesProduce3:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce3",defaultMessage:"Limited access to o1 and o1-mini"},plusAdvertisedFeaturesProduce4:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce4",defaultMessage:"Opportunities to test new features"},plusAdvertisedFeaturesProduce5:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce5",defaultMessage:"Limited access to Sora video generation"},plusInactiveProduce:{id:"pricingPlanConstants.plus.callToAction.inactivePaymentProduce",defaultMessage:"Get Plus"},teamPlanInactiveProduce:{id:"pricingPlanConstants.teams.callToAction.inactivePaymentProduce",defaultMessage:"Get Team"},enterpriseAdvertisedFeaturesProduce0:{id:"pricingPlanConstants.enterprise.enterpriseAdvertisedFeaturesProduce0",defaultMessage:"Everything in Team"},enterpriseAdvertisedFeaturesProduce3:{id:"pricingPlanConstants.enterprise.enterprisePlanAdvertisedFeaturesproduce3",defaultMessage:"Most intelligent models with longer context windows"},enterpriseAdvertisedFeaturesProduce4:{id:"pricingPlanConstants.enterprise.enterprisePlanAdvertisedFeaturesProduce4",defaultMessage:"No peak hour limits for ChatGPT"},proName:{id:"pricingPlanConstants.pro.name",defaultMessage:"Pro"},proActive:{id:"pricingPlanConstants.pro.callToAction.active",defaultMessage:"Your current plan"},proInactive:{id:"pricingPlanConstants.pro.callToAction.inactive",defaultMessage:"Get Pro"},proSummary:{id:"pricingPlanConstants.pro.proPlanSummary",defaultMessage:"Get the best of OpenAI with the highest level of access"},proCost:{id:"pricingPlanConstants.pro.costInDollars",defaultMessage:"200"},proCostInPounds:{id:"pricingPlanConstants.pro.costInPounds",defaultMessage:"200"},proCostInEuros:{id:"pricingPlanConstants.pro.costInEuros",defaultMessage:"229"},proAdvertisedFeatures0:{id:"pricingPlanConstants.pro.proAdvertisedFeatures0",defaultMessage:"Everything in Plus"},proAdvertisedFeatures1:{id:"pricingPlanConstants.pro.proAdvertisedFeatures1",defaultMessage:"Unlimited access to o1, o1-mini, GPT-4o, and advanced voice (audio only)"},proAdvertisedFeatures2:{id:"pricingPlanConstants.pro.proAdvertisedFeatures2",defaultMessage:"Higher limits for video and screensharing in advanced voice"},proAdvertisedFeatures3:{id:"pricingPlanConstants.pro.proAdvertisedFeatures3",defaultMessage:"Access to o1 pro mode, which uses more compute for the best answers to the hardest questions"},proAdvertisedFeatures4:{id:"pricingPlanConstants.pro.proAdvertisedFeatures4",defaultMessage:"Extended access to Sora video generation"},proPricingDisclaimer:{id:"pricingPlanConstants.pro.proPricingDisclaimer",defaultMessage:"Unlimited subject to abuse guardrails. <link>Learn more</link>",link:"https://help.openai.com/en/articles/9793128-what-is-chatgpt-pro"}}),vn=[z.proAdvertisedFeatures0,z.proAdvertisedFeatures1,z.proAdvertisedFeatures2,z.proAdvertisedFeatures3,z.proAdvertisedFeatures4],Sn=[T.plusAdvertisedFeaturesProduce0,T.plusAdvertisedFeaturesProduce1,T.plusAdvertisedFeaturesProduce2,z.plusAdvertisedFeaturesProduce3,z.plusAdvertisedFeaturesProduce4,T.plusAdvertisedFeaturesNeptune4,z.plusAdvertisedFeaturesProduce5],Vl={...E.freeChive,summary:T.freeSummary,cost:{costInDollars:T.freeCostProduce,costInPounds:T.freeCostInPoundsProduce,costInEuros:T.freeCostInEurosProduce},advertisedFeatures:[T.basicModelAccess,T.freeAdvertisedFeaturesProduce0,z.freeAdvertisedFeaturesProduce1,T.freeAdvertisedFeaturesProduce2,T.freeAdvertisedFeaturesProduce3]},Kl={...E.plusChiveForPlusUsers,callToAction:{active:T.plusActive,create:T.plusActive,inactive:z.plusInactiveProduce},summary:T.plusSummary,cost:{costInDollars:T.plusCostProduce,costInPounds:T.plusCostInPoundsProduce,costInEuros:T.plusCostInEurosProduce},forLine:void 0,advertisedFeatures:Sn},Yl={...E.teamsNeptune,forLine:void 0,summary:T.teamPlanSummary,cost:{costInDollars:T.teamPlanCostProduce,costInPounds:T.teamPlanCostInPoundsProduce,costInEuros:T.teamPlanCostInEurosProduce},advertisedFeatures:[T.teamsAdvertisedFeaturesDefault0,z.plusAdvertisedFeaturesProduce3,T.plusAdvertisedFeaturesProduce2,T.teamsAdvertisedFeaturesNeptune1,T.teamsAdvertisedFeaturesNeptune2,T.teamsAdvertisedFeaturesNeptune3],disclaimer:T.teamPricingDisclaimerProduce,callToAction:{active:T.teamPlanActive,create:T.teamPlanCreate,inactive:z.teamPlanInactiveProduce}},zl={...E.enterprise,summary:T.enterpriseSummary,forLine:void 0,cost:{costInDollars:void 0,costInPounds:void 0,costInEuros:void 0,costInDollarsSubtitle:T.enterpriseCost,costInPoundsSubtitle:T.enterpriseCostInPounds,costInEurosSubtitle:T.enterpriseCostInEuros},advertisedFeatures:[z.enterpriseAdvertisedFeaturesProduce0,T.enterpriseAdvertisedFeatures1,T.enterpriseAdvertisedFeatures2,T.enterpriseAdvertisedFeatures3,T.enterpriseAdvertisedFeatures4,T.enterpriseAdvertisedFeatures5]},Ks={name:z.proName,callToAction:{active:z.proActive,create:z.proActive,inactive:z.proInactive},forLine:void 0,summary:z.proSummary,cost:{costInDollars:z.proCost,costInPounds:z.proCostInPounds,costInEuros:z.proCostInEuros},advertisedFeatures:vn,disclaimer:z.proPricingDisclaimer},$l=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.35825 8.64117L6.41363 3.58579C6.7887 3.21071 7.29741 3 7.82785 3H16.171C16.7014 3 17.2101 3.21071 17.5852 3.58579L22.6407 8.64128C23.3997 9.40032 23.4242 10.6232 22.6961 11.412L13.4699 21.4079C12.678 22.2658 11.3227 22.2659 10.5307 21.408L1.30291 11.412C0.574744 10.6232 0.599167 9.40025 1.35825 8.64117ZM8.21892 6.70217L7.79183 7.98345C7.58583 8.60146 7.10088 9.08641 6.48287 9.29241L5.20159 9.71951C4.93203 9.80936 4.93203 10.1906 5.20158 10.2805L6.48287 10.7076C7.10088 10.9136 7.58583 11.3985 7.79183 12.0166L8.21892 13.2978C8.30878 13.5674 8.69006 13.5674 8.77991 13.2978L9.207 12.0166C9.41301 11.3985 9.89796 10.9136 10.516 10.7076L11.7973 10.2805C12.0668 10.1906 12.0668 9.80936 11.7973 9.71951L10.516 9.29241C9.89796 9.08641 9.41301 8.60146 9.207 7.98345L8.77991 6.70217C8.69006 6.43261 8.30878 6.43261 8.21892 6.70217Z",fill:"currentColor"}));function Ht({isOpen:s,onClose:t,onContinue:a}){return e.jsx(R,{isOpen:s,onClose:t,type:"warning",icon:Da,title:e.jsx(n,{...Ys.checkSubscriptionHeader}),primaryButton:e.jsx(oe.Button,{title:Ys.dismissModal.defaultMessage,color:"primary",onClick:t}),secondaryButton:e.jsx(oe.Button,{title:Ys.continueToNextStep.defaultMessage,color:"secondary",onClick:a}),children:e.jsx("span",{className:"gap-2 text-gray-600",children:Ys.checkSubscriptionBody.defaultMessage})})}const Ys=V({checkSubscriptionHeader:{id:"mobileSubscriptionWarningModal.checkSubscriptionHeader",defaultMessage:"Check your App Store subscription"},checkSubscriptionBody:{id:"mobileSubscriptionWarningModal.checkSubscriptionBody",defaultMessage:"Your subscription through the Apple App Store is currently on pause due to a payment issue. Please resolve that issue to resume using ChatGPT Plus and avoid duplicate charges."},dismissModal:{id:"mobileSubscriptionWarningModal.dismissModal",defaultMessage:"Cancel"},continueToNextStep:{id:"mobileSubscriptionWarningModal.continueToNextStep",defaultMessage:"I understand, continue anyways"}}),kn=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{d:"M6.394 4.444c.188-.592 1.024-.592 1.212 0C8.4 8.9 9.1 9.6 13.556 10.394c.592.188.592 1.024 0 1.212C9.1 12.4 8.4 13.1 7.606 17.556c-.188.592-1.024.592-1.212 0C5.6 13.1 4.9 12.4.444 11.606c-.592-.188-.592-1.024 0-1.212C4.9 9.6 5.6 8.9 6.394 4.444Zm8.716 9.841a.41.41 0 0 1 .78 0c.51 2.865.96 3.315 3.825 3.826.38.12.38.658 0 .778-2.865.511-3.315.961-3.826 3.826a.408.408 0 0 1-.778 0c-.511-2.865-.961-3.315-3.826-3.826a.408.408 0 0 1 0-.778c2.865-.511 3.315-.961 3.826-3.826Zm2.457-12.968a.454.454 0 0 1 .866 0C19 4.5 19.5 5 22.683 5.567a.454.454 0 0 1 0 .866C19.5 7 19 7.5 18.433 10.683a.454.454 0 0 1-.866 0C17 7.5 16.5 7 13.317 6.433a.454.454 0 0 1 0-.866C16.5 5 17 4.5 17.567 1.317Z",fill:"currentColor"})),ql=re.PLUS;function wn({isOpen:s,onClose:t,onCancelationComplete:a,analyticsParams:o}){const i=v(),l=X(),r=Se(),{data:u,isLoading:c}=fn(),g=Rt(r?.id),p=d.useMemo(()=>({...o,planType:ql}),[o]),m=d.useCallback(()=>{t(),g.isSuccess||k.logEventWithStatsig(w.cancelPlusAbort,"cancel_plus_modal_abort",p)},[t,g.isSuccess,p]),f=async()=>{if(!r)throw new Error("No account!");k.logEventWithStatsig(w.cancelPlusConfirm,"cancel_plus_modal_confirm",p),await g.mutateAsync(r?.id,{onError:()=>{l.danger(i.formatMessage(ye.cancelFailure),{duration:2}),k.logEventWithStatsig(w.cancelPlusError,"cancel_plus_modal_error",p)},onSuccess:()=>{k.logEventWithStatsig(w.cancelPlusSuccess,"cancel_plus_modal_success",p),a?.(),l.info(i.formatMessage(ye.cancelSuccess),{duration:2}),t()}})};d.useEffect(()=>{g.isSuccess},[g.isSuccess,t]);const h=u?.active_until;return e.jsx(R,{type:"success",onClose:m,isOpen:s,className:"",title:e.jsx(n,{...ye.cancelPlan}),children:c||!r?e.jsx(Re,{}):g.isSuccess?e.jsx(n,{...ye.cancelSuccess}):e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm",children:[!!h&&e.jsx("p",{className:"mb-4",children:e.jsx(n,{...ye.planActiveUntil,values:{expirationDate:new Date(h)}})}),e.jsx("p",{className:"mb-2",children:e.jsx(n,{...ye.cancelListHeader})}),e.jsx("div",{children:Xl.map(b=>e.jsxs("div",{className:"text-l mb-2 flex justify-start gap-2",children:[e.jsx(Tt,{className:"h-5 w-5 flex-shrink-0 align-top text-gray-500"}),e.jsx("span",{children:e.jsx(n,{...b,values:{learnMoreLink:Ql,mainModel:Zl}})})]},b.id))})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(H,{onClick:m,color:"secondary",children:e.jsx(n,{...ye.closeModal})}),e.jsx(H,{color:"danger",onClick:f,disabled:g.isPending||g.isSuccess,children:e.jsx(n,{...g.isPending?ye.cancellingInProgress:ye.cancelButton})})]})]})})}const Ql=s=>e.jsx("a",{target:"_blank",href:"https://help.openai.com/en/articles/9280126-what-happens-to-my-gpts-if-i-cancel-my-subscription",rel:"noreferrer",className:"underline",children:s}),Zl="GPT-4",ye=V({cancelPlan:{id:"cancelPlusModal.cancelPlan",defaultMessage:"Cancel your Plus subscription?"},cancelListHeader:{id:"cancelPlusModal.cancelText",defaultMessage:"When your subscription ends, you'll no longer have:"},planActiveUntil:{id:"cancelPlusModal.planActiveUntil",defaultMessage:"If you cancel your subscription, you’ll be downgraded to the free plan on {expirationDate, date, long}."},cancelButton:{id:"cancelPlusModal.cancelButton",defaultMessage:"Cancel subscription"},cancellingInProgress:{id:"cancelPlusModal.cancellingInProgress",defaultMessage:"Cancelling..."},cancelSuccess:{id:"cancelPlusModal.cancelSuccess",defaultMessage:"Successfully cancelled your plan. Sorry to see you go!"},cancelFailure:{id:"cancelPlusModal.cancelFailure",defaultMessage:"Something went wrong while cancelling your plan. Please reach out to support"},lostFeatureGPTModels:{id:"0w7d5w",defaultMessage:"Access to {mainModel} and {liteModel}"},lostFeatureGPTModelSingular:{id:"cancelPlusModal.lostFeature.gptModelSingular",defaultMessage:"Access to {mainModel}"},lostFeatureNewModelUsageLimits:{id:"TjftEV",defaultMessage:"Higher usage limits for {limitedModel}"},lostFeatureDataAnalysisV2:{id:"cancelPlusModal.lostFeature.dataAnalysisV2",defaultMessage:"Access to advanced data analysis, file uploads, vision, and web browsing"},lostFeatureDataAnalysisLimits:{id:"dlGufV",defaultMessage:"Higher usage limits for advanced data analysis, file uploads, vision, and web browsing"},lostFeatureImageGeneration:{id:"cancelPlusModal.lostFeature.imageGeneration",defaultMessage:"DALL·E image generation"},lostFeatureCustomGPTs:{id:"cancelPlusModal.lostFeature.customGPTs",defaultMessage:"Custom GPT creation"},lostFeaturePersonalGPTs:{id:"cancelPlusModal.lostFeature.personalGPTs",defaultMessage:"GPTs you’ve created (<learnMoreLink>learn more</learnMoreLink>)"},closeModal:{id:"cancelPlusModal.close",defaultMessage:"Close"}}),Xl=[ye.lostFeatureGPTModelSingular,ye.lostFeatureDataAnalysisV2,ye.lostFeatureImageGeneration,ye.lostFeatureCustomGPTs,ye.lostFeaturePersonalGPTs],En=()=>Ne({queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:async()=>await F.hasAppStoreSubscriptionInBillingRetryResponse()}),Jl={[me.Default]:E.plusDefaultForFreeUsers,[me.Scallion]:E.plusNeptuneForFreeUsers,[me.Chive]:E.plusChiveForFreeUsers,[me.ProduceDesign]:E.plusProduceForFreeUsersExp},er={[me.Default]:E.plusDefaultForPlusUsers,[me.Scallion]:E.plusNeptuneForPlusUsers,[me.Chive]:E.plusChiveForPlusUsers,[me.ProduceDesign]:E.plusProduceForPlusUsersExp},Pn=({currentAccount:s,pricingType:t})=>{const{data:{subscriptionStatus:a}}=s;return a.hasPaidSubscription&&a.subscriptionPlan===Mo.PLUS?a.billingPeriod==="yearly"?E.plusYearly:er[t]:Jl[t]},ms=re.PLUS,sr=({analyticsParams:s,currentAccount:t,isPlanLoading:a,onSubmit:o,setIsPlanLoading:i,shouldShowAdditionalLinks:l=!0,upgradeButtonText:r=E.plus.callToAction.inactive,isProduceDesign:u=!1,plusPricingPlanProduce:c=null,billingDetails:g})=>{const{data:p,refetch:m}=Ne(rt),f=!!p?.email,{data:h,isError:b}=En(),C=t.features,y=v(),N=X(),[A,L]=d.useState(!1),[I,U]=d.useState(!1),[S,$]=d.useState(!1),[pe,q]=d.useState(!1),Y=[],D=t.isOrWasPaidCustomer(),W=t.hasPaidSubscription()&&t.isPlus(),P=t.getLastActiveSubscription(),{hasSignedUpForWaitlist:_,signUpForWaitlist:O}=Gt(ms),ce=lt(),fe=C.includes("disable_plus_upgrade_ui")&&!D,Q=C.includes("show_cancel_plus_ui"),j={...s,planType:ms,isUpgradeUiDisabled:fe},be=async We=>{if(!f&&!We){q(!0);return}i(!0),k.logEvent(w.clickAccountPaymentCheckout,j),te.logEvent("chatgpt_account_payment_modal_upgrade_button_click",ms);try{const qe=await F.getCheckoutLink(C);o?.(),k.logEvent(w.navigatingToAccountPaymentCheckout,{...j,url:qe.url}),te.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",ms,{url:qe.url}),window.location.href=qe.url}catch{N.warning(y.formatMessage(ue.paymentErrorWarning),{hasCloseButton:!0})}i(!1)},_e=()=>{L(!0),k.logEventWithStatsig(w.cancelPlusStart,"cancel_plus_start",{...j,cancel_start_source:"manage plan"})},Ce=async()=>{i(!0),k.logEvent(w.clickAccountCustomerPortal,j);try{const We=await F.fetchCustomerPortalUrl();k.logEvent(w.navigatingToAccountCustomerPortal,j),location.href=We.url}catch{N.warning(y.formatMessage(ue.accountErrorWarning),{hasCloseButton:!0})}i(!1)},Z=()=>{k.logEvent(w.clickAccountManageIos,j)},ze=()=>{k.logEvent(w.clickAccountManageAndroid,j)},ie=W&&P.purchase_origin_platform===ge.MOBILE_IOS,Le=W&&P.purchase_origin_platform===ge.MOBILE_ANDROID,as=(P.purchase_origin_platform===ge.WEBAPP||P.purchase_origin_platform===ge.GRANTED)&&t?.hasCustomerObject(),ds=as&&!I&&W&&t.willRenewSubscription(),us=gt(),ws=c||nt(Pn({currentAccount:t,pricingType:us}));ce&&!W&&Y.push(e.jsx(K,{to:Ja,target:"_blank",className:"px-2 underline",children:e.jsx(n,{...ue.limitsApply})},"row-plus-plan-usage-limits")),ie&&Y.push(e.jsx(K,{to:ct,target:"_blank",onClick:Z,className:"px-2 underline",children:y.formatMessage(E.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),Le&&Y.push(e.jsx(K,{to:dt,target:"_blank",onClick:ze,children:y.formatMessage(E.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),as&&(Y.push(e.jsx(K,{to:"#",onClick:Ce,className:"px-2 underline",children:e.jsx(n,{...E.manageSubscriptionWeb.callToAction})},"row-manage-subscription-link")),ds&&Q&&Y.push(e.jsxs("button",{children:[e.jsx("span",{onClick:_e,className:"cursor-pointer px-2 underline",children:e.jsx(n,{...E.cancelSubscriptionWeb.callToAction})}),e.jsx(wn,{isOpen:A,onClose:()=>L(!1),onCancelationComplete:()=>U(!0),analyticsParams:j})]},"row-cancel-subscription-link"))),D&&Y.push(e.jsx(K,{target:"_blank",to:Os,onClick:Bs,className:"px-2 underline",children:e.jsx(n,{...ue.billingHelp})},"row-plus-plan-help-link"));const $e=function(){$(!S)},Es=b||!h||!h.value?be:()=>{$e()};return e.jsxs(e.Fragment,{children:[e.jsx(ks,{planName:"plus",pricingPlan:ws,icon:e.jsx(kn,{className:"icon-md text-green-600"}),showForLine:!W&&!ce,callToActionButton:fe?e.jsx("div",{className:"relative w-full",children:e.jsx(ve,{side:"bottom",sideOffset:20,label:y.formatMessage(E.disabledHighDemand.hoverText),children:e.jsx(ss,{planType:ms,disabled:_,onClick:O,isCurrentPlan:W,testId:"select-plan-button-plus-waitlist",isProduceDesign:u,children:e.jsx(n,{..._?E.signUpForWaitlist.inactive:E.signUpForWaitlist.active})})})}):e.jsxs("div",{children:[e.jsx(ss,{planType:ms,isCurrentPlan:W,disabled:W||a,onClick:Es,testId:"select-plan-button-plus-upgrade",isProduceDesign:u,children:W?y.formatMessage(E.plus.callToAction.active):y.formatMessage(r)}),e.jsx(Ht,{isOpen:S,onClose:$e,onContinue:be})]}),additionalLinks:l?Y:[],billingDetails:g}),e.jsx(R,{isOpen:pe,onClose:()=>q(!1),type:"success",className:"max-w-sm",children:e.jsx(mt,{enterEmailDescription:y.formatMessage(ue.addEmailDescription),onVerified:()=>{q(!1),m(),be(!0)},cancelFlowButton:e.jsx(H,{className:"w-full rounded-md",color:"secondary",onClick:()=>q(!1),children:e.jsx(n,{...ue.cancelAddEmail})})})})]})},ue=V({addEmailDescription:{id:"AccountPaymentModal.addEmailDescriptionPlus",defaultMessage:"To upgrade to Plus, please add your email."},cancelAddEmail:{id:"AccountPaymentModal.cancelAddEmail",defaultMessage:"Cancel"},haveExistingPlan:{id:"AccountPaymentModal.haveExistingPlan",defaultMessage:"Have an existing plan?"},billingHelp:{id:"AccountPaymentModel.billingHelp",defaultMessage:"I need help with a billing issue"},paymentErrorWarning:{id:"AccountPaymentModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},accountErrorWarning:{id:"AccountPaymentModal.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},limitsApply:{id:"xda4i3",defaultMessage:"Limits apply"}}),Vt=Fa(s=>({recentlyDowngraded:!1,recentlyUpgraded:!1,recentlyCanceled:!1,setRecentlyDowngraded:t=>s({recentlyDowngraded:t}),setRecentlyUpgraded:t=>s({recentlyUpgraded:t}),setRecentlyCanceled:t=>s({recentlyCanceled:t})}));var he=(s=>(s.FREE="free",s.PLUS="plus",s.PRO="pro",s.ENTERPRISE="enterprise",s.TEAM="team",s.EDU="edu",s.QUORUM="quorum",s))(he||{});function tr({currentAccount:s}){const t=Ss(),a=s.data.subscriptionStatus.planType,o=s.willRenewSubscription(),i=a==="plus"?e.jsx(n,{id:"hLd2Ar",defaultMessage:"Upgrade plan"}):a==="pro"&&o?e.jsx(n,{id:"/4GuNx",defaultMessage:"Change plan"}):e.jsx(n,{id:"4Bc5M+",defaultMessage:"View plans"}),l=()=>{en(t,"Subscription settings manage button")};return e.jsxs(bs.Item,{className:"flex items-center pl-2 pr-0 font-normal",onClick:l,children:[e.jsx(Ho,{className:"h-5 w-5"}),i]})}function ar({currentAccount:s,onCancelSubscriptionClick:t}){const a=s.willRenewSubscription(),o=s.willPlanChange();return!a||o?null:e.jsxs(e.Fragment,{children:[e.jsx(bs.Separator,{className:"px-1"}),e.jsxs(bs.Item,{className:"flex items-center pl-2 pr-3 font-normal text-token-text-error",onClick:t,children:[e.jsx(Tt,{className:"h-5 w-5"}),e.jsx(n,{id:"icBiUI",defaultMessage:"Cancel Subscription"})]})]})}function nr(s,t){return s==="free"||s==="plus"&&t==="pro"}function or({currentAccount:s,onRenewSubscriptionClick:t}){const a=s.data.subscriptionStatus.planType,o=Fs(a.toLowerCase()),i=s.willRenewSubscription(),l=s.getNextPlanType();if(!(!i||l&&nr(l,a)))return null;const u=()=>{t()};return e.jsx(e.Fragment,{children:e.jsxs(bs.Item,{className:"flex items-center pl-2 pr-3 font-normal text-token-text-primary",onClick:u,children:[e.jsx(Vo,{className:"h-5 w-5"}),e.jsx(n,{id:"L6UCRY",defaultMessage:"Renew {planName} Plan",values:{planName:o}})]})})}function ir({currentAccount:s,onCancelSubscriptionClick:t,onRenewSubscriptionClick:a}){return e.jsxs(Oa,{triggerButton:e.jsxs(H,{onClick:()=>{},color:"secondary",children:[e.jsx(n,{id:"g3k4Zt",defaultMessage:"Manage"}),e.jsx(Go,{className:"-mr-1 ml-1 h-4 w-4"})]}),contentAlign:"end",size:"auto",sideOffset:2,contentClassName:"py-1",children:[e.jsx(tr,{currentAccount:s}),e.jsx(or,{currentAccount:s,onRenewSubscriptionClick:a}),e.jsx(ar,{currentAccount:s,onCancelSubscriptionClick:t})]})}function lr({currentAccount:s}){const t=s.subscriptionAnalyticsParams,o=s.getLastActiveSubscription().purchase_origin_platform,i=X(),l=v(),r=async()=>{k.logEvent(w.clickAccountCustomerPortal,t);try{const c=await F.fetchCustomerPortalUrl();k.logEvent(w.navigatingToAccountCustomerPortal,t),location.href=c.url}catch{i.warning(l.formatMessage(es.accountErrorWarning),{hasCloseButton:!0})}},u=(c,g)=>e.jsx(K,{to:c,target:"_blank",className:"inline-block",children:e.jsx(H,{onClick:()=>k.logEvent(g,t),color:"secondary",children:e.jsx(n,{id:"eQL80k",defaultMessage:"Manage"})})});switch(o){case ge.MOBILE_IOS:return u(ct,w.clickAccountManageIos);case ge.MOBILE_ANDROID:return u(dt,w.clickAccountManageAndroid);default:if(s.hasCustomerObject())return e.jsx(H,{onClick:r,color:"secondary",children:e.jsx(n,{id:"eQL80k",defaultMessage:"Manage"})});break}}function rr({currentAccount:s,onCancelSubscriptionClick:t,onRenewSubscriptionClick:a}){const o=v(),i=s.data.subscriptionStatus.planType,l=s.willRenewSubscription(),r=s.willPlanChange(),u=s.getDaysUntilPlanChanges(),c=s.getDaysUntilPlanExpires(),g=s.getNextPlanType(),p=b=>{const C=Dt(new Date,b);return new Intl.DateTimeFormat(o.locale,{year:"numeric",month:"short",day:"numeric"}).format(C)},m=Fs(i.toLowerCase()),f=g?Fs(g.toLowerCase()):null,h=i==="pro"?vn:Sn;return e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-bold",children:e.jsx(n,{...es.subscriptionTitle,values:{planName:m}})}),e.jsxs("div",{className:"text-token-text-secondary",children:[r&&u&&f&&e.jsx("span",{children:e.jsx(n,{...es.planChangeMessage,values:{planName:f,date:p(u)}})}),l&&!r&&c&&e.jsx("span",{children:e.jsx(n,{...es.renewMessage,values:{date:p(c)}})}),!l&&!r&&c&&e.jsx("span",{children:e.jsx(n,{...es.planCanceledMessage,values:{date:p(c)}})})]})]}),e.jsx(ir,{currentAccount:s,onCancelSubscriptionClick:t,onRenewSubscriptionClick:a})]}),e.jsxs("div",{className:"mt-4 rounded-lg bg-gray-50 p-4 text-token-text-secondary dark:bg-gray-900",children:[e.jsx(n,{...es.thanksMessage,values:{planName:m}}),h?.map((b,C)=>e.jsxs("div",{className:"text-l mt-2 flex justify-start gap-2",children:[e.jsx(Wo,{className:"mt-0.5 h-4 w-4 shrink-0 text-token-text-primary"}),e.jsx("span",{children:e.jsx(n,{...b,values:{link:y=>e.jsx(K,{className:"underline",target:"_blank",rel:"noreferrer",to:b.link??"",children:y}),article:y=>e.jsx(K,{className:"underline",target:"_blank",rel:"noreferrer",to:b.article??"",children:y}),modelName:"GPT‑4o"}})})]},C))]})]}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-base",children:e.jsx(n,{...es.managePaymentTitle,values:{planName:m}})}),e.jsx(lr,{currentAccount:s})]}),e.jsx(K,{target:"_blank",to:Os,onClick:Bs,className:"-mb-2 pt-3 text-sm text-token-link",children:e.jsx(n,{...es.billingHelp})},"row-plus-plan-help-link")]})})]})}const es=V({subscriptionTitle:{id:"settingsModal.subscriptionTitle",defaultMessage:"ChatGPT {planName}"},managePaymentTitle:{id:"settingsModal.managePaymentTitle",defaultMessage:"Payment"},billingHelp:{id:"settingsModal.billingHelp",defaultMessage:"Need help with billing?"},accountErrorWarning:{id:"AccountPaymentModal.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},planChangeMessage:{id:"settingsModal.planChangeMessage",defaultMessage:"Your plan changes to {planName} on {date}"},planCanceledMessage:{id:"settingsModal.planCanceledMessage",defaultMessage:"Your plan will be canceled on {date}"},renewMessage:{id:"settingsModal.renewMessage",defaultMessage:"Your plan auto-renews on {date}"},thanksMessage:{id:"settingsModal.thanksMessage",defaultMessage:"Thanks for subscribing to ChatGPT {planName}! Your {planName} plan includes:"},paymentMethodMessage:{id:"settingsModal.paymentMethodMessage",defaultMessage:"Payment method"}}),cr={[he.FREE]:"chatgptfreeplan",[he.PLUS]:"chatgptplusplan",[he.PRO]:"chatgptpro",[he.ENTERPRISE]:"chatgptenterpriseplan",[he.TEAM]:"chatgptteamplan",[he.EDU]:"chatgpteduplan",[he.QUORUM]:"chatgptquorumplan"};function Kt({isOpen:s,onClose:t,accountId:a,initialPlanType:o,updatedPlanType:i,billingDetails:l}){const r=v(),u=X(),c=Se(),[g,p]=d.useState(!1),m=o===i,f=o===he.PLUS&&i===he.PRO,h=cr[i];d.useEffect(()=>{k.logTogglePlanManagementModal({isOpen:!0})},[]);const b=()=>{k.logTogglePlanManagementModal({isOpen:!1}),t()},C=tl(a),y=al(a),N=Rt(a),{data:A,isError:L,isLoading:I}=hn(a,void 0,h);!m&&L&&(c?.planType===he.TEAM?u.warning(r.formatMessage({id:"planManagement.errorUpgradingTeam",defaultMessage:"Updates to Pro aren't yet supported for users with Team subscriptions"}),{hasCloseButton:!0}):u.warning(r.formatMessage({id:"planManagement.errorFetchingPreview",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),t());const U=Q=>{const j=Dt(new Date,Q);return new Intl.DateTimeFormat(r.locale,{year:"numeric",month:"short",day:"numeric"}).format(j)},S=c?.getDaysUntilPlanExpires(),$=S?U(S):"N/A",{recentlyCanceled:pe,setRecentlyUpgraded:q,setRecentlyDowngraded:Y}=Vt(),D=c?.willRenewSubscription()||pe,[se,W]=d.useState(!1),P=Ye();if(!c)return null;const _=async Q=>{p(!0);try{if(m)await y.mutateAsync(a),u.success(r.formatMessage({id:"planManagement.successfullyRenewedSubscription",defaultMessage:"Your subscription has been renewed. Your subscription will auto-renew on {expirationDate}."},{expirationDate:$}),{hasCloseButton:!0}),k.logEvent(w.renewPlanSuccess,{planType:Q}),te.logEvent("chatgpt_renew_plan_success",null,{planType:Q});else{if(D||(await y.mutateAsync(a),W(!0)),await C.mutateAsync({accountId:a,updatedPlan:h,updatedPriceInterval:void 0,updatedSeats:void 0}),Q!==i){const Ce=f?w.upgradePlanSuccess:w.downgradePlanSuccess,Z=f?"chatgpt_upgrade_plan_success":"chatgpt_downgrade_plan_success";k.logEvent(Ce,{fromPlan:Q,toPlan:i}),te.logEvent(Z,null,{fromPlan:Q,toPlan:i}),f?q(!0):Y(!0)}const be=A?.renewal_date?new Date(A?.renewal_date).toLocaleDateString(r.locale,{year:"numeric",month:"long",day:"numeric"}):"N/A",_e=f?r.formatMessage({id:"planManagement.successfullyUpdatedSubscription",defaultMessage:"You're now subscribed to ChatGPT Pro"}):r.formatMessage({id:"planManagement.updatedSubscriptionToPlus",defaultMessage:"Your subscription has been updated. Your subscription will change to Plus on {renewalDateFormatted}."},{renewalDateFormatted:be});localStorage.setItem(`subscriptionUpdateMessage_${c.id}`,_e)}P.invalidateQueries({queryKey:["account-status"]});const j=fs.getItem(ls.CheckoutFrom);j&&la[j]&&(fs.removeItem(ls.CheckoutFrom),window.location.href=la[j]),t()}catch(j){j?.detail?.error_type==="card_declined"?u.warning(r.formatMessage({id:"planManagement.cardDeclinedError",defaultMessage:"Payment error. Your card may be invalid or authentication may be needed."}),{hasCloseButton:!0}):u.warning(r.formatMessage({id:"planManagement.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),se&&await N.mutateAsync(a),t()}finally{p(!1)}},[O,ce,fe]=Mr(l.currency);return e.jsx(R,{type:"success",isOpen:s,onClose:b,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:r.formatMessage({id:"planManagementModal.title",defaultMessage:"Confirm changes"}),isProduceDesign:!0,children:I?e.jsx(An,{}):m&&c?e.jsx(xr,{account:c,expirationDate:$,handleUpdate:()=>_(o),isUpdating:g,onClose:b,plusCost:O,proCost:ce,currencySymbol:fe}):L||!A?null:f?e.jsx(ur,{accountId:a,handleUpdate:()=>_(o),isUpdating:g,onClose:b,currencySymbol:fe}):e.jsx(hr,{renewalDate:A.renewal_date,handleUpdate:()=>_(o),isUpdating:g,onClose:b,plusCost:O,currencySymbol:fe})})}function An(){return e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsx(Re,{})})}function dr({adjustmentMessage:s,proratedCreditMessage:t,proratedCreditInfoMessage:a}){return e.jsxs("div",{children:[e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:s}),e.jsx("span",{className:"font-semibold text-green-600",children:t})]}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:a})]})}function ur({accountId:s,handleUpdate:t,isUpdating:a,onClose:o,currencySymbol:i}){const l=v(),{data:r,isError:u,isLoading:c}=hn(s,void 0,he.PRO);if(c)return e.jsx(An,{});if(u||!r)return null;const g=gr(r,l,i);return e.jsxs("div",{className:"p-6",children:[e.jsx(mr,{data:r,currencySymbol:i}),g.filter(p=>p.value!==0).map((p,m)=>e.jsx(dr,{adjustmentMessage:p.adjustmentMessage,proratedCreditMessage:p.proratedCreditMessage,proratedCreditInfoMessage:p.proratedCreditInfoMessage},m)),e.jsx("hr",{className:"mb-4 mt-4"}),e.jsx(pr,{data:r,currencySymbol:i}),r.default_payment_method&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"mb-4 mt-4"}),e.jsx(fr,{defaultPaymentMethod:r.default_payment_method})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(De,{title:l.formatMessage({id:"planUpgradeModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:o}),e.jsx(De,{title:l.formatMessage({id:"planUpgradeModal.payNow",defaultMessage:"Pay now"}),color:"primary",onClick:t,loading:a})]})]})}function gr(s,t,a){return[{adjustmentMessage:e.jsx(n,{id:"planUpgradeModal.adjustment",defaultMessage:"Adjustment"}),proratedCreditMessage:e.jsx(n,{id:"planUpgradeModal.proratedCredit",defaultMessage:"-{currencySign}{adjustment}",values:{currencySign:t.formatMessage(a.sign),adjustment:(-s.negative_line_item_total/100).toFixed(2)}}),proratedCreditInfoMessage:e.jsx(n,{id:"planUpgradeModal.proratedCreditInfo",defaultMessage:"Prorated credit for the remainder of your Plus subscription"}),value:s.negative_line_item_total},{adjustmentMessage:e.jsx(n,{id:"planUpgradeModal.discount",defaultMessage:"Adjustment"}),proratedCreditMessage:e.jsx(n,{id:"planUpgradeModal.discountAmount",defaultMessage:"-{currencySign}{discount}",values:{currencySign:t.formatMessage(a.sign),discount:(s.discount_amount/100).toFixed(2)}}),proratedCreditInfoMessage:e.jsx(n,{id:"planUpgradeModal.discountInfo",defaultMessage:"Account discount applied"}),value:s.discount_amount},{adjustmentMessage:e.jsx(n,{id:"planUpgradeModal.credits",defaultMessage:"Adjustments"}),proratedCreditMessage:e.jsx(n,{id:"planUpgradeModal.creditsAmount",defaultMessage:"-{currencySign}{credits}",values:{currencySign:t.formatMessage(a.sign),credits:(s.applied_balance/100).toFixed(2)}}),proratedCreditInfoMessage:e.jsx(n,{id:"planUpgradeModal.creditsInfo",defaultMessage:"Credits applied"}),value:s.applied_balance}]}function mr({data:s,currencySymbol:t}){const a=v();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.subscription",defaultMessage:"ChatGPT Pro subscription"})}),e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.subscriptionCost",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:a.formatMessage(t.sign),totalCost:(s.positive_line_item_total/100).toFixed(2)}})})]}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(n,{id:"planUpgradeModal.billingCycle",defaultMessage:"Billed monthly, starting today"})})]})}function pr({data:s,currencySymbol:t}){const a=v();return e.jsxs(e.Fragment,{children:[s.amount_due.tax_amount>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.subTotal",defaultMessage:"Subtotal"})}),e.jsx("span",{children:e.jsx(n,{id:"planUpgradeModal.subtotalPrice",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:a.formatMessage(t.sign),totalCost:(s.amount_due.amount_excluding_tax/100).toFixed(2)}})})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsxs("span",{className:"font-semibold",children:[e.jsx(n,{id:"planUpgradeModal.tax",defaultMessage:"Tax"}),e.jsx("span",{className:"font-normal text-token-text-secondary",children:e.jsx(n,{id:"planUpgradeModal.taxPercent",defaultMessage:" {taxPercent}%",values:{taxPercent:(s.amount_due.tax_amount/s.amount_due.amount_excluding_tax*100).toFixed(0)}})})]}),e.jsx("span",{children:e.jsx(n,{id:"planUpgradeModal.taxAmount",defaultMessage:"{currencySign}{tax}",values:{currencySign:a.formatMessage(t.sign),tax:(s.amount_due.tax_amount/100).toFixed(2)}})})]})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.totalDueToday",defaultMessage:"Total due today"})}),e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.totalDueTodayAmount",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:a.formatMessage(t.sign),totalCost:(s.amount_due.amount/100).toFixed(2)}})})]})]})}function fr({defaultPaymentMethod:s}){return e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.paymentMethod",defaultMessage:"Payment Method"})}),e.jsxs("span",{className:"text-token-text-secondary",children:[s.card_brand.toUpperCase()," *",s.card_last4]})]})}function hr({renewalDate:s,handleUpdate:t,isUpdating:a,onClose:o,plusCost:i,currencySymbol:l}){const r=v(),u=s?new Date(s).toLocaleDateString(r.locale,{year:"numeric",month:"long",day:"numeric"}):"N/A";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planDowngradeModal.currentSubscription",defaultMessage:"Your current Pro subscription will remain active until {renewalDateFormatted}, when it will change to Plus.",values:{renewalDateFormatted:u}})}),e.jsxs("div",{className:"mt-4 rounded-md bg-token-main-surface-secondary p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planDowngradeModal.newPlan",defaultMessage:"ChatGPT Plus"})}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planDowngradeModal.newPlanCost",defaultMessage:"{currencyCode} {currencySign}{plusCost}/month",values:{currencyCode:r.formatMessage(l.code),currencySign:r.formatMessage(l.sign),plusCost:r.formatMessage(i)}})})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planDowngradeModal.billingStart",defaultMessage:"Billing will start on {renewalDateFormatted}",values:{renewalDateFormatted:u}})})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(De,{title:r.formatMessage({id:"planDowngradeModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:o}),e.jsx(De,{title:r.formatMessage({id:"planDowngradeModal.confirm",defaultMessage:"Confirm"}),color:"primary",onClick:t,loading:a})]})]})})}function xr({account:s,expirationDate:t,handleUpdate:a,isUpdating:o,onClose:i,plusCost:l,proCost:r,currencySymbol:u}){const c=v(),g=s.data.subscriptionStatus.planType,p=Fs(g.toLowerCase()),m=p==="Pro"?r:l;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planRenewalModal.currentSubscription",defaultMessage:"Your current {planName} subscription will auto-renew on {expirationDate}.",values:{planName:p,expirationDate:t}})}),e.jsxs("div",{className:"mt-4 rounded-md bg-token-main-surface-secondary p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planRenewalModal.newPlan",defaultMessage:"ChatGPT {planName}",values:{planName:p}})}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planRenewalModal.newPlanCost",defaultMessage:"{currencyCode} {currencySign}{planCost}/month",values:{currencyCode:c.formatMessage(u.code),currencySign:c.formatMessage(u.sign),planCost:c.formatMessage(m)}})})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planRenewalModal.billingStart",defaultMessage:"Billing will auto-renew on {expirationDate}",values:{expirationDate:t}})})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(De,{title:c.formatMessage({id:"planRenewalModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:i}),e.jsx(De,{title:c.formatMessage({id:"planRenewalModal.confirm",defaultMessage:"Confirm"}),color:"primary",onClick:a,loading:o})]})]})})}function Mr(s){return s==za?[T.plusCostInEurosProduce,z.proCostInEuros,$a]:s==qa?[T.plusCostInPoundsProduce,z.proCostInPounds,Qa]:[T.plusCostProduce,z.proCost,Za]}const ns=re.PLUS;function Tn(s,t){const a=s.data.subscriptionStatus.planType,o=s.getNextPlanType();let i=s.getDaysUntilPlanChanges(),l=o===re.PLUS&&a===he.PRO;return t&&!l&&(i=s.getDaysUntilPlanExpires(),l=!0),{daysUntilPlanChanges:i,isDowngradeScheduled:l}}function Nn(s,t){const a=Dt(new Date,s);return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(a)}const br=({analyticsParams:s,currentAccount:t,isPlanLoading:a,onSubmit:o,setIsPlanLoading:i,shouldShowAdditionalLinks:l=!0,isProduceDesign:r=!0,plusPricingPlanProduce:u=null,billingDetails:c})=>{const{data:g,refetch:p}=Ne(rt),{data:m,isError:f}=En(),h=t.features,b=v(),C=X(),[y,N]=d.useState(!1),[A,L]=d.useState(!1),[I,U]=d.useState(!1),[S,$]=d.useState(!1),{recentlyDowngraded:pe,recentlyCanceled:q,setRecentlyCanceled:Y}=Vt(),D=[],se=t.isOrWasPaidCustomer(),W=t.hasPaidSubscription(),P=W&&t.isPlus(),_=W&&!(t.isPlus()||t.isWorkspacePlan()),O=t.getLastActiveSubscription(),{hasSignedUpForWaitlist:ce,signUpForWaitlist:fe}=Gt(ns),Q=lt(),j=h.includes("disable_plus_upgrade_ui")&&!se,be=h.includes("show_cancel_plus_ui"),{daysUntilPlanChanges:_e,isDowngradeScheduled:Ce}=Tn(t,pe),Z={...s,planType:ns,isUpgradeUiDisabled:j},ze=!!g?.email,ie=async Ze=>{if(!ze&&!Ze){$(!0);return}i(!0),k.logEvent(w.clickAccountPaymentCheckout,Z),te.logEvent("chatgpt_account_payment_modal_upgrade_button_click",ns);try{const Ge=await F.getCheckoutLink(h);o?.(),k.logEvent(w.navigatingToAccountPaymentCheckout,{...Z,url:Ge.url}),te.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",ns,{url:Ge.url}),window.location.href=Ge.url}catch{C.warning(b.formatMessage(ue.paymentErrorWarning),{hasCloseButton:!0})}i(!1)},Le=()=>{N(!0),k.logEventWithStatsig(w.cancelPlusStart,"cancel_plus_start",{...Z,cancel_start_source:"manage plan"})},as=async()=>{i(!0),k.logEvent(w.clickAccountCustomerPortal,Z);try{const Ze=await F.fetchCustomerPortalUrl();k.logEvent(w.navigatingToAccountCustomerPortal,Z),location.href=Ze.url}catch{C.warning(b.formatMessage(ue.accountErrorWarning),{hasCloseButton:!0})}i(!1)},ds=()=>{k.logEvent(w.clickAccountManageIos,Z)},us=()=>{k.logEvent(w.clickAccountManageAndroid,Z)},ws=P&&O.purchase_origin_platform===ge.MOBILE_IOS,$e=P&&O.purchase_origin_platform===ge.MOBILE_ANDROID,Es=P&&(O.purchase_origin_platform===ge.WEBAPP||O.purchase_origin_platform===ge.GRANTED)&&t?.hasCustomerObject(),We=Es&&!q&&P&&t.willRenewSubscription(),qe=gt(),Ps=u||nt(Pn({currentAccount:t,pricingType:qe}));Q&&!P&&D.push(e.jsx(K,{to:Ja,target:"_blank",className:"px-2 underline",children:e.jsx(n,{...ue.limitsApply})},"row-plus-plan-usage-limits")),ws&&D.push(e.jsx(K,{to:ct,target:"_blank",onClick:ds,className:"px-2 underline",children:b.formatMessage(E.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),$e&&D.push(e.jsx(K,{to:dt,target:"_blank",onClick:us,children:b.formatMessage(E.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),Es&&(D.push(e.jsx(K,{to:"#",onClick:as,className:"px-2 underline",children:e.jsx(n,{...E.manageSubscriptionWeb.callToAction})},"row-manage-subscription-link")),We&&be&&D.push(e.jsxs("button",{children:[e.jsx("span",{onClick:Le,className:"cursor-pointer px-2 underline",children:e.jsx(n,{...E.cancelSubscriptionWeb.callToAction})}),e.jsx(wn,{isOpen:y,onClose:()=>N(!1),onCancelationComplete:()=>Y(!0),analyticsParams:Z})]},"row-cancel-subscription-link"))),P&&se&&D.push(e.jsx(K,{target:"_blank",to:Os,onClick:Bs,className:"px-2 underline",children:e.jsx(n,{...ue.billingHelp})},"row-plus-plan-help-link"));const Qe=function(){L(!A)},Rs=()=>{_?(k.logEvent(w.clickAccountPaymentCheckout,Z),te.logEvent("chatgpt_account_payment_modal_upgrade_button_click",ns),U(!0)):ie()},pt=f||!m||!m.value?Rs:()=>{Qe()},As=(Ze,Ge)=>e.jsx(ss,{planType:ns,isCurrentPlan:P,disabled:Ze,onClick:Ge,testId:"select-plan-button-plus-upgrade",isProduceDesign:r,activeColor:_?"secondary":void 0,children:a&&!I?e.jsx(Re,{}):P?b.formatMessage(Ps.callToAction.active):b.formatMessage(Ps.callToAction.inactive)});return e.jsxs(e.Fragment,{children:[e.jsx(ks,{planName:"plus",pricingPlan:Ps,icon:e.jsx(kn,{className:"icon-md text-green-600"}),showForLine:!P&&!Q,callToActionButton:j?e.jsx("div",{className:"relative w-full",children:e.jsx(ve,{side:"bottom",sideOffset:20,label:b.formatMessage(E.disabledHighDemand.hoverText),children:e.jsx(ss,{planType:ns,disabled:ce,onClick:fe,isCurrentPlan:P,testId:"select-plan-button-plus-waitlist",isProduceDesign:r,activeColor:_?"secondary":void 0,children:e.jsx(n,{...ce?E.signUpForWaitlist.inactive:E.signUpForWaitlist.active})})})}):e.jsxs("div",{children:[_e&&Ce?e.jsx(ve,{side:"top",sideOffset:20,label:e.jsx(n,{id:"8/N1rV",defaultMessage:"Your subscription will change to Plus on {date}.",values:{date:Nn(_e,b.locale)}}),children:As(!0,()=>{})}):e.jsx("div",{className:P?"":"bg-green-600 bg-opacity-5",children:As(P||a,pt)}),e.jsx(Ht,{isOpen:A,onClose:Qe,onContinue:ie}),I&&e.jsx(Kt,{isOpen:I,onClose:()=>U(!1),accountId:t.id,initialPlanType:he.PRO,updatedPlanType:re.PLUS,billingDetails:c})]}),additionalLinks:l?D:[],plusInactive:!W,billingDetails:c}),e.jsx(R,{isOpen:S,onClose:()=>$(!1),type:"success",className:"max-w-sm",children:e.jsx(mt,{enterEmailDescription:b.formatMessage(ue.addEmailDescription),onVerified:()=>{p(),$(!1),ie(!0)},cancelFlowButton:e.jsx(H,{className:"w-full rounded-md",color:"secondary",onClick:()=>$(!1),children:e.jsx(n,{...ue.cancelAddEmail})})})})]})},Cr=()=>Ne({queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:async()=>await F.hasAppStoreSubscriptionInBillingRetryResponse()}),zs="pro",yr=({analyticsParams:s,currentAccount:t,isPlanLoading:a,onSubmit:o,setIsPlanLoading:i,upgradeButtonText:l=Ks.callToAction.inactive,billingDetails:r})=>{const{data:u,isError:c}=Cr(),g=t.features,{data:p,refetch:m}=Ne(rt),f=v(),h=X(),[b,C]=d.useState(!1),[y,N]=d.useState(!1),[A,L]=d.useState(!1),I=t.getLastActiveSubscription(),U=t.isOrWasPaidCustomer(),S=t.hasPaidSubscription()&&!(t.isPlus()||t.isWorkspacePlan()),$=!!p?.email,{recentlyDowngraded:pe}=Vt(),{daysUntilPlanChanges:q,isDowngradeScheduled:Y}=Tn(t,pe),D=Ks,se=[],W={...s,planType:zs},P=S&&I.purchase_origin_platform===ge.MOBILE_IOS,_=S&&I.purchase_origin_platform===ge.MOBILE_ANDROID,O=S&&(I.purchase_origin_platform===ge.WEBAPP||I.purchase_origin_platform===ge.GRANTED)&&t?.hasCustomerObject(),ce=async ie=>{if(!$&&!ie){L(!0);return}i(!0),k.logEvent(w.clickAccountPaymentCheckout,W),te.logEvent("chatgpt_account_payment_modal_upgrade_button_click",zs);try{const Le=await F.getCheckoutLink(g,{plan_name:"chatgptpro"});o?.(),k.logEvent(w.navigatingToAccountPaymentCheckout,{...W,url:Le.url}),te.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",zs,{url:Le.url}),window.location.href=Le.url}catch{h.warning(f.formatMessage(ue.paymentErrorWarning),{hasCloseButton:!0})}i(!1)},fe=async()=>{i(!0),k.logEvent(w.clickAccountCustomerPortal,W);try{const ie=await F.fetchCustomerPortalUrl();k.logEvent(w.navigatingToAccountCustomerPortal,W),location.href=ie.url}catch{h.warning(f.formatMessage(ue.accountErrorWarning),{hasCloseButton:!0})}i(!1)},Q=()=>{k.logEvent(w.clickAccountManageIos,W)},j=()=>{k.logEvent(w.clickAccountManageAndroid,W)};P&&se.push(e.jsx(K,{to:ct,target:"_blank",onClick:Q,className:"px-2 underline",children:f.formatMessage(E.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),_&&se.push(e.jsx(K,{to:dt,target:"_blank",onClick:j,children:f.formatMessage(E.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),O&&se.push(e.jsx(K,{to:"#",onClick:fe,className:"px-2 underline",children:e.jsx(n,{...E.manageSubscriptionWeb.callToAction})},"row-manage-subscription-link")),U&&se.push(e.jsx(K,{target:"_blank",to:Os,onClick:Bs,className:"px-2 underline",children:e.jsx(n,{...ue.billingHelp})},"row-plus-plan-help-link"));const be=function(){C(!b)},_e=function(){N(!y)},{value:Ce}=Nt("1382475798"),Z=async()=>{let ie=t.hasPaidSubscription()&&t.isPlus();Ce&&(ie=ie&&!t.isActiveSubscriptionGratis()),ie?(k.logEvent(w.clickAccountPaymentCheckout,W),te.logEvent("chatgpt_account_payment_modal_upgrade_button_click",zs),N(!0)):await ce()},ze=c||!u||!u.value?Z:()=>{be()};return e.jsxs(e.Fragment,{children:[e.jsx(ks,{planName:"pro",pricingPlan:D,icon:e.jsx($l,{className:"icon-md primary"}),showForLine:!1,callToActionButton:e.jsxs("div",{children:[Y&&q?e.jsx(ve,{side:"top",sideOffset:20,label:e.jsx(n,{id:"jgTAPh",defaultMessage:"Your subscription will remain active until {date}, when it will change to Plus.",values:{date:Nn(q,f.locale)}}),children:e.jsx(H,{fullWidth:!0,size:"large",color:"primary",disabled:S||a,"data-testid":"select-plan-button-pro-upgrade",className:S||a?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:a&&!y?e.jsx(Re,{}):S?f.formatMessage(Ks.callToAction.active):f.formatMessage(l)})}):e.jsx(H,{fullWidth:!0,size:"large",color:"primary",disabled:S||a,onClick:ze,"data-testid":"select-plan-button-pro-upgrade",className:S||a?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:a&&!y?e.jsx(Re,{}):S?f.formatMessage(Ks.callToAction.active):f.formatMessage(l)}),e.jsx(Ht,{isOpen:b,onClose:be,onContinue:ce}),y&&e.jsx(Kt,{isOpen:y,onClose:_e,accountId:t.id,initialPlanType:re.PLUS,updatedPlanType:he.PRO,billingDetails:r})]}),additionalLinks:se,className:"bg-token-main-surface-primary",billingDetails:r}),e.jsx(R,{isOpen:A,onClose:()=>L(!1),type:"success",className:"max-w-sm",children:e.jsx(mt,{enterEmailDescription:f.formatMessage({id:"AccountPaymentModal.addEmailDescriptionPro",defaultMessage:"To upgrade to Pro, please add your email."}),onVerified:()=>{m(),L(!1),ce(!0)},cancelFlowButton:e.jsx(H,{className:"w-full rounded-md",color:"secondary",onClick:()=>L(!1),children:e.jsx(n,{...ue.cancelAddEmail})})})})]})},jr=({analyticsParams:s,currentAccount:t,isPlanLoading:a,isTeamEnabled:o,selectedTab:i,setIsPlanLoading:l,shouldSplitBetweenPersonalAndBusiness:r,isProduceDesign:u,isProduceEnabled:c,billingDetails:g})=>{const p=vr({analyticsParams:s,currentAccount:t,isPlanLoading:a,isTeamEnabled:o,selectedTab:i,setIsPlanLoading:l,shouldSplitBetweenPersonalAndBusiness:r,isProduceDesign:u,isEnterpriseEnabled:!1,isProduceEnabled:c,billingDetails:g});return e.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-3 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:p})};function vr({analyticsParams:s,currentAccount:t,isPlanLoading:a,isTeamEnabled:o,selectedTab:i,setIsPlanLoading:l,shouldSplitBetweenPersonalAndBusiness:r,isProduceDesign:u,isEnterpriseEnabled:c,isProduceEnabled:g,billingDetails:p}){const m=[],f=t.hasPaidSubscription();return r?i==="personal"?(f||m.push("free"),m.push("plus"),g&&m.push("pro")):(o&&m.push("team"),c&&m.push("enterprise")):(f||m.push("free"),(!t.isTeam()||!t.isEnterprisey()&&c)&&(m.push("plus"),m.push("pro")),o&&m.push("team"),c&&m.push("enterprise")),m.length===0&&Be.addError(new Error("Account payment modal missing columns")),m.map(h=>{switch(h){case"free":return e.jsx(Cn,{isProduceDesign:u,freePricingPlanProduce:Vl,billingDetails:p},h);case"plus":return e.jsx(br,{analyticsParams:s,currentAccount:t,setIsPlanLoading:l,isPlanLoading:a,isProduceDesign:u,plusPricingPlanProduce:Kl,billingDetails:p},h);case"team":return e.jsx(jn,{analyticsParams:s,isPlanLoading:a,isProduceDesign:u,teamPricingPlanProduce:Yl,billingDetails:p},h);case"enterprise":return e.jsx(bn,{isProduceDesign:u,enterprisePricingPlanProduce:zl,billingDetails:p},h);case"pro":return e.jsx(yr,{analyticsParams:s,currentAccount:t,setIsPlanLoading:l,isPlanLoading:a,billingDetails:p},h)}})}function Sr(s){return s.split("#")[1]===zo}function Mt(s){return s.split("#")[1]===$o}function kr({currentAccount:s,initTab:t}){const[a,o]=d.useState(!1),i=s.hasPaidSubscription()&&!(s.isPlus()||s.isWorkspacePlan()),{layer:l}=Pt("3768341700"),r=l.get("is_produce_design",!1),u=l.get("is_country_selector_enabled",!1),c=u,g=d.useMemo(()=>s.subscriptionAnalyticsParams,[s]),p=Ss(),m=X(),f=d.useCallback(()=>{k.logEvent(w.closeAccountPaymentModal,g),Xa(p)},[g,p]);d.useEffect(()=>{const j=qo();k.logEvent(w.accountPaymentModalShow,{...g,location:j}),te.logEvent("chatgpt_account_payment_modal_show",null,{location:j??""})},[g]),d.useEffect(()=>{const j=localStorage.getItem(`subscriptionUpdateMessage_${s.id}`);if(j){localStorage.removeItem(`subscriptionUpdateMessage_${s.id}`),m.success(j,{hasCloseButton:!0});const be=setTimeout(()=>{f()},5e3);return()=>{clearTimeout(be)}}},[s.id,m,f]);const h=t??(s.isPersonalAccount()?"personal":"business"),{isSplitBetweenPersonalAndBusinessEnabled:b,isModalFullscreen:C,isTeamEnabled:y}=Wt(),[N,A]=d.useState(h),L=At(),I=b&&L,U=j=>{A(j),k.logEvent(w.accountPaymentModalToggleClicked,{selectedTab:j}),te.logEvent("chatgpt_account_payment_modal_toggle_clicked",null,{selectedTab:j})},{value:S}=Nt("1028682714"),{currentLocale:$}=Ua(),pe=Ko($),q=bo();let Y="";"userCountry"in q&&(Y=q.userCountry);const D=Yo(Y,!c),se=aa(D),W={country:D,currency:se},[P,_]=d.useState(D),[O,ce]=d.useState(W),fe=j=>{Be.addAction("User has changed selected country in pricing modal",{old_selected_country:P,new_selected_country:j}),k.logEvent(w.selectedCountryChangedInPricingModal,{old_selected_country:P,new_selected_country:j}),te.logEvent("chatgpt_selected_country_changed_in_pricing_modal",j,{old_selected_country:P,new_selected_country:j}),_(j),ce({country:j,currency:aa(j)})},Q=wr({analyticsParams:g,currentAccount:s,isModalFullscreen:C,isPlanLoading:a,isTeamEnabled:y,selectedTab:N,setIsPlanLoading:o,shouldSplitBetweenPersonalAndBusiness:I,isProduceDesign:r,isEnterpriseEnabled:!1,billingDetails:O});return C?e.jsxs(R,{size:"fullscreen",isOpen:!0,onClose:f,type:"success",className:"flex flex-col",isProduceDesign:r,children:[e.jsxs("div",{className:"relative grid grid-cols-[1fr_auto_1fr] px-6 py-4 md:pb-10 md:pt-[4.5rem]",children:[e.jsx("div",{}),e.jsx("span",{className:"mb-1 mt-1 text-2xl font-semibold md:mb-0 md:mt-0 md:text-3xl",children:i?e.jsx(n,{...os.proModalTitle}):e.jsx(n,{...os.modalTitle})}),e.jsx("button",{className:"justify-self-end text-token-text-primary opacity-50 transition hover:opacity-75 md:absolute md:right-6 md:top-6",onClick:()=>{f()},children:e.jsx(Tt,{className:ts({"h-5 w-5":!L,"icon-lg":L})})})]}),s.isPersonalAccount()&&I?e.jsx("div",{className:"mb-3 flex justify-center md:mb-10",children:e.jsx("div",{className:"w-[fit-content]",children:e.jsx(fa,{value:N,onChange:U})})}):null,e.jsx("div",{children:S?e.jsx(jr,{analyticsParams:g,currentAccount:s,isPlanLoading:a,isTeamEnabled:y,selectedTab:N,setIsPlanLoading:o,shouldSplitBetweenPersonalAndBusiness:I,isProduceDesign:r,isProduceEnabled:S,billingDetails:O}):e.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-3 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:Q})}),e.jsxs("div",{className:"relative grid grid-cols-[1fr_auto_1fr]",children:[e.jsx("div",{}),e.jsxs("div",{className:"mb-12 mt-8 flex flex-col items-center justify-center gap-2 text-sm text-token-text-secondary md:mb-8 md:mt-8",children:[e.jsx(Mn,{}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(n,{...os.needMoreCapabilities}),e.jsx("div",{children:e.jsx(n,{...os.seeChatGptEnterprise,values:{link:j=>e.jsx(K,{target:"_blank",to:St,onClick:()=>{k.logEvent(w.clickSeeEnterpriseLink),te.logEvent("chatgpt_account_payment_modal_enterprise_link_clicked")},className:"mx-1 underline",children:j})}})})]})]}),e.jsx("div",{className:"mb-12 mt-8 flex flex-col items-end justify-end pr-3 opacity-50 transition hover:opacity-75 md:mb-8 md:mt-8",children:c?e.jsx(Sl,{value:P,onValueChange:fe,displayNameFormatterFn:pe,testId:"country-selector-in-pricing-modal"}):null})]})]}):e.jsx(R,{size:"custom",noPadding:!0,isOpen:!0,onClose:f,type:"success",className:ts("focus-none !bg-transparent !shadow-none outline-none transition-width duration-0",Q.length===1&&"md:max-w-lg",Q.length===2&&"md:max-w-3xl",Q.length===3&&"md:max-w-5xl"),children:e.jsxs("div",{className:"popover relative flex grow flex-col items-start justify-center overflow-hidden rounded-md border border-token-border-light bg-token-main-surface-primary shadow-md",children:[e.jsxs("div",{className:"flex w-full flex-row items-center justify-between border-b border-token-border-light px-8 py-6",children:[e.jsx("span",{className:"text-xl font-semibold",children:i?e.jsx(n,{...os.proModalTitle}):e.jsx(n,{...os.modalTitle})}),e.jsxs("div",{className:"flex gap-4",children:[s.isPersonalAccount()&&I?e.jsx(fa,{value:N,onChange:U}):null,e.jsx(Co,{onClick:()=>{f()}})]})]}),I?e.jsx(Ha,{children:e.jsx("div",{className:"w-full",children:e.jsx(It.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},exit:{opacity:0},children:e.jsx("div",{className:"center flex flex-col md:min-h-[30rem] md:flex-row",children:Q})},N)})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex w-full flex-col md:flex-row",children:Q}),e.jsx("div",{className:"flex w-full items-center justify-center border-t border-token-border-light px-8 py-6",children:e.jsx("div",{className:"text-sm text-token-text-primary sm:flex sm:items-center",children:e.jsx(n,{...os.modalFooterCapabilities,values:{link:j=>e.jsx(K,{target:"_blank",to:St,onClick:()=>{k.logEvent(w.clickSeeEnterpriseLink),te.logEvent("chatgpt_account_payment_modal_enterprise_link_clicked")},className:"mx-1 underline",children:j})}})})})]})]})})}function wr({analyticsParams:s,currentAccount:t,isPlanLoading:a,isModalFullscreen:o,isTeamEnabled:i,selectedTab:l,setIsPlanLoading:r,shouldSplitBetweenPersonalAndBusiness:u,isProduceDesign:c,isEnterpriseEnabled:g,billingDetails:p}){const m=[],f=t.hasPaidSubscription();return u?l==="personal"?(f||m.push("free"),m.push("plus")):(i&&m.push("team"),(!o||g)&&m.push("enterprise")):(f||m.push("free"),t.isTeam()||m.push("plus"),i&&m.push("team"),g&&m.push("enterprise")),m.length===0&&Be.addError(new Error("Account payment modal missing columns")),m.map(h=>{switch(h){case"free":return e.jsx(Cn,{isProduceDesign:c,billingDetails:p},h);case"plus":return e.jsx(sr,{analyticsParams:s,currentAccount:t,setIsPlanLoading:r,isPlanLoading:a,isProduceDesign:c,billingDetails:p},h);case"team":return e.jsx(jn,{analyticsParams:s,isPlanLoading:a,isProduceDesign:c,billingDetails:p},h);case"enterprise":return e.jsx(bn,{isProduceDesign:c,billingDetails:p},h)}})}const os=V({modalTitle:{id:"AccountPaymentModal.modalTitle",defaultMessage:"Upgrade your plan"},proModalTitle:{id:"AccountPaymentModal.proModalTitle",defaultMessage:"Choose your plan"},modalFooterCapabilities:{id:"AccountPaymentModal.modalFooterCapabilities",defaultMessage:"Need more capabilities? See <link> ChatGPT Enterprise </link>"},needMoreCapabilities:{id:"SdJWr7",defaultMessage:"Need more capabilities for your business?"},seeChatGptEnterprise:{id:"7C5fuF",defaultMessage:"See<link>ChatGPT Enterprise</link>"}});function Er({workspaceName:s,onChangeWorkspaceName:t}){const a=v();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex-wrap",children:[e.jsx("label",{htmlFor:"workspace-name",className:"block pb-1 text-lg font-semibold text-token-text-primary",children:e.jsx(n,{...bt.workspaceNameLabel})}),e.jsx("p",{className:"font-base text-sm text-token-text-secondary",children:e.jsx(n,{...bt.workspaceNameDescription})})]}),e.jsx(js,{ariaLabel:!1,type:"text",name:"workspace-name",placeholder:a.formatMessage(bt.exampleTeamWorkspaceName),value:s,onChange:o=>t(o.target.value),maxLength:64})]})}const bt=V({workspaceNameLabel:{id:"createWorkspace.workspaceNameLabel",defaultMessage:"Workspace name"},workspaceNameDescription:{id:"createWorkspace.workspaceNameDescription",defaultMessage:"Set a workspace name for your team. The name can be changed at any time."},exampleTeamWorkspaceName:{id:"createWorkspace.exampleTeamWorkspaceName",defaultMessage:"Acme Inc."}});var _n=(s=>(s.FLEXIBLE="month",s.ANNUAL="year",s))(_n||{});const Pr=ol(_n),Ar=({isOpen:s,onClose:t,onSubmit:a})=>{const[o,i]=d.useState(""),l=v();return e.jsxs(R,{type:"success",isOpen:s,onClose:t,className:"max-w-lg",showCloseButton:!0,title:e.jsx(n,{...je.createWorkspace}),children:[e.jsx("div",{className:"flex flex-col justify-center bg-token-main-surface-primary pb-2",children:e.jsx(Er,{workspaceName:o,onChangeWorkspaceName:i})}),e.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[e.jsx(De,{title:l.formatMessage(je.cancel),onClick:t}),e.jsx(De,{title:l.formatMessage(je.selectBillingOption),onClick:()=>{a(o)},disabled:o=="",color:"primary",className:"ml-4"})]})]})},Tr=ke.p`text-base font-semibold mb-3 mt-3`,Nr=({isOpen:s,onClose:t,onSubmit:a,minimumSeats:o,billingDetails:i})=>{const[l,r]=d.useState("year"),[u,c]=d.useState(!1),g=v(),[p,m]=d.useState(o),[f]=d.useState(new Date),h=Lr[l],b=o>kt?o:kt,{flexibleBillingPlan:C,annualBillingPlan:y}=Zo(i.currency);return e.jsx(R,{type:"success",isOpen:s,onClose:t,size:"custom",noPadding:!0,className:"max-w-3xl",showCloseButton:!0,title:g.formatMessage(je.selectTeamPlanModalTitle),children:e.jsxs("div",{className:"grid grid-flow-row grid-cols-3",children:[e.jsxs(Xo,{className:"col-span-3 grid md:col-span-2 md:grid-cols-2",defaultValue:l,onValueChange:N=>{Pr(N)&&r(N)},children:[e.jsx(na,{billingType:"month",...C}),e.jsx(na,{billingType:"year",...y})]}),e.jsxs("div",{className:"col-span-3 overflow-hidden border-l border-token-main-surface-tertiary bg-token-main-surface-secondary p-6 md:col-span-1",children:[e.jsx("label",{className:"mb-3 block text-base font-semibold",htmlFor:"seats",children:e.jsx(n,{...je.seatsTitle})}),e.jsx(Jo,{numSeats:p,minSeats:b,setNumSeats:m}),e.jsx(ei,{}),e.jsx(Tr,{children:e.jsx(n,{...je.summaryTitle})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"mb-2",children:e.jsx(n,{...h.name})}),e.jsxs(si,{children:[e.jsx(oa,{children:e.jsx(n,{...h.billed,values:{date:e.jsx(_t,{value:f})}})}),e.jsx(oa,{children:e.jsx("b",{children:e.jsx(n,{...h.total,values:{currencyCode:g.formatMessage(C.currencyCode),currencySign:g.formatMessage(C.currencySign),totalCost:(p||0)*(l==="year"?y.unitCost:C.unitCost)}})})})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(De,{title:g.formatMessage(je.continueToBillingButton),onClick:()=>{c(!0),a(l,p)},disabled:!1,loading:u,color:"primary"})})]})]})})};function _r({isOpen:s,onClose:t,minimumSeats:a,billingDetails:o,existingAccount:i=void 0}){const l=v(),r=X(),[u,c]=d.useState(i?Qo(l,i):""),g=ot(),p=async(m,f)=>{try{const h=await F.getCheckoutLink(g,{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:u,price_interval:m,seat_quantity:f,existing_workspace_id:i?.id}});window.location.href=h.url}catch{r.warning(l.formatMessage(je.paymentErrorWarning),{hasCloseButton:!0})}};return u==""?e.jsx(Ar,{isOpen:s,onClose:t,onSubmit:m=>{c(m)}}):e.jsx(Nr,{isOpen:s,onClose:t,onSubmit:(m,f)=>{p(m,f)},minimumSeats:a,billingDetails:o})}const Lr={month:{name:je.flexiblePlanSelected,billed:je.flexiblePlanBilled,total:je.flexiblePlanTotal},year:{name:je.annualPlanSelected,billed:je.annualPlanBilled,total:je.annualPlanTotal}};function Ir(){const{isUnauthenticated:s}=at(),t=Ss(),{pathname:a,hash:o}=Va(),i=Ka(),l=Mt(o)?"3686510565":"423371448",{config:r}=yo(l),u=r.get("enabled",!1),c=Mt(o)&&u,g=(Sr(o)||Mt(o))&&!s;return d.useEffect(()=>{!c||!s||i({authType:"signup",callbackUrl:window.location.href})},[c,s,i]),d.useEffect(()=>{a.startsWith("/auth")||xs.getCookie(Ms.ShowPaymentModal)&&(xs.deleteCookie(Ms.ShowPaymentModal),en(t,"Show payment modal cookie"))},[]),d.useEffect(()=>{g?(Me.closeAllActiveModals(),Me.openModal(Ae.AccountPayment)):Me.closeModal(Ae.AccountPayment)},[g]),{isOpen:g,isTeamAccountIntent:c}}function Fr(s){return s.type===Cs.GDRIVE_SYNC_CONNECTOR||s.type===Cs.SLACK_SYNC_CONNECTOR?`${window.location.origin}/ca/${s.id}/oauth/callback`:`${window.location.origin}/ccc/${s.id}/oauth/callback`}const Ln=({entry:s,isConnected:t,onDisconnect:a,onConnect:o,redirectUri:i})=>t?e.jsx(H,{onClick:()=>a(s?.type),color:"danger-outline",size:"small",children:e.jsx(n,{...ya.disconnect})}):e.jsx(H,{onClick:()=>o({id:s.id},"settings_connected_apps",Fr(s),i),color:"secondary",size:"small",children:e.jsx(n,{...ya.connect})}),ya=V({connect:{id:"connectorSettings.connect",defaultMessage:"Connect"},disconnect:{id:"connectorSettings.disconnect",defaultMessage:"Disconnect"}});function Ct({entry:s,description:t}){let a;switch(s.type){case J.CONFLUENCE:a=li;break;case J.GDRIVE:a=an;break;case J.JIRA:a=ii;break;case J.NOTION_OPEN_CONNECTOR:a=oi;break;case J.O365:case J.O365_PERSONAL:case J.O365_BUSINESS:a=ni;break;case J.SLACK_OPEN_CONNECTOR:a=ai;break}const o=v();return e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col gap-2 pb-1 pt-3",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(a,{className:"icon-lg"}),e.jsx("p",{className:"text-md flex-1 font-semibold text-token-text-primary",children:ti(s.type,o)}),e.jsx(Ln,{entry:s,isConnected:!!s.access_token,onDisconnect:sn,onConnect:tn,redirectUri:"#settings/ConnectorSettings"})]}),e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{...t})})]})})}function ja({type:s}){let t,a=ps.googleDriveSyncName,o=ps.googleDriveSyncDesc;switch(s){case Cs.GDRIVE_SYNC_CONNECTOR:t=an;break;case Cs.SLACK_SYNC_CONNECTOR:t=g=>e.jsx("img",{src:ci,...g}),a=ps.slackSyncName,o=ps.slackSyncDesc;break}const[i]=Lo(),l=i.get("model")??"gpt-4o-gdrive",r=v(),{connectors:u}=ri([s]),c=u.get(s);return c?e.jsx("div",{children:e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col gap-2 pb-1 pt-3",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(t,{className:"icon-lg"}),e.jsx("p",{className:"text-md flex-1 font-semibold text-token-text-primary",children:r?.formatMessage(a)}),e.jsx(Ln,{entry:c,isConnected:!!c.access_token,onDisconnect:sn,onConnect:tn,redirectUri:`?model=${l}#settings/ConnectorSettings`})]}),e.jsx("p",{className:"text-xs text-token-text-secondary",children:e.jsx(n,{...o})})]})})}):null}function Dr(){return e.jsx("div",{children:e.jsxs(B,{children:[e.jsx("div",{className:"my-2 font-bold text-token-text-primary",children:e.jsx(n,{...ps.knowledgeDesc})}),e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{...ps.contextualAnswerDesc})})]})})}const ps=V({knowledgeDesc:{id:"connectorSettings.knowledgeDesc.1",defaultMessage:"Knowledge"},contextualAnswerDesc:{id:"connectorSettings.contextualAnswerDesc.1",defaultMessage:"Add context to your ChatGPT's knowledge."},googleDriveSyncDesc:{id:"connectorSettings.googleDriveSyncDesc.1",defaultMessage:"Sync Google Docs, Sheets, Slides and other files to your ChatGPT workspace."},googleDriveSyncName:{id:"connectorSettings.googleDriveSyncName.1",defaultMessage:"Google Drive"},slackSyncDesc:{id:"connectorSettings.slackSyncDesc.1",defaultMessage:"Sync Slack public channels, private channels, and direct messages to your ChatGPT workspace."},slackSyncName:{id:"connectorSettings.slackSyncName.1",defaultMessage:"Slack"}}),Or=s=>d.createElement("svg",{width:40,height:40,viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("rect",{width:40,height:40,rx:8,fill:"white"}),d.createElement("rect",{x:.5,y:.5,width:39,height:39,rx:7.5,stroke:"black",strokeOpacity:.1}),d.createElement("path",{d:"M23.3359 13.4346C23.5508 13.4346 23.917 13.4688 24.4346 13.5371C24.9521 13.6055 25.5186 13.8008 26.1338 14.123C26.7588 14.4355 27.3252 14.958 27.833 15.6904C27.8037 15.7197 27.6621 15.8271 27.4082 16.0127C27.1543 16.1885 26.8711 16.4521 26.5586 16.8037C26.2461 17.1455 25.9727 17.585 25.7383 18.1221C25.5039 18.6494 25.3867 19.2793 25.3867 20.0117C25.3867 20.8516 25.5332 21.5645 25.8262 22.1504C26.1289 22.7363 26.4756 23.21 26.8662 23.5713C27.2666 23.9229 27.6182 24.1816 27.9209 24.3477C28.2334 24.5137 28.3994 24.6016 28.4189 24.6113C28.4092 24.6504 28.2822 24.9971 28.0381 25.6514C27.8037 26.3057 27.4131 27.0332 26.8662 27.834C26.3877 28.5273 25.8701 29.167 25.3135 29.7529C24.7666 30.3389 24.1074 30.6318 23.3359 30.6318C22.8184 30.6318 22.3936 30.5586 22.0615 30.4121C21.7295 30.2559 21.3877 30.1045 21.0361 29.958C20.6846 29.8018 20.2109 29.7236 19.6152 29.7236C19.0391 29.7236 18.5557 29.8018 18.165 29.958C17.7842 30.1143 17.418 30.2705 17.0664 30.4268C16.7246 30.583 16.3193 30.6611 15.8506 30.6611C15.1377 30.6611 14.5127 30.3779 13.9756 29.8115C13.4385 29.2451 12.8867 28.5664 12.3203 27.7754C11.666 26.8379 11.1045 25.6953 10.6357 24.3477C10.1768 22.9902 9.94727 21.623 9.94727 20.2461C9.94727 18.7715 10.2256 17.5361 10.7822 16.54C11.3389 15.5342 12.0518 14.7773 12.9209 14.2695C13.7998 13.752 14.708 13.4932 15.6455 13.4932C16.1436 13.4932 16.6123 13.5762 17.0518 13.7422C17.4912 13.8984 17.9014 14.0596 18.2822 14.2256C18.6729 14.3916 19.0244 14.4746 19.3369 14.4746C19.6396 14.4746 19.9912 14.3867 20.3916 14.2109C20.792 14.0352 21.2412 13.8643 21.7393 13.6982C22.2373 13.5225 22.7695 13.4346 23.3359 13.4346ZM22.5303 11.5742C22.1494 12.0332 21.6709 12.4189 21.0947 12.7314C20.5186 13.0342 19.9717 13.1855 19.4541 13.1855C19.3467 13.1855 19.2441 13.1758 19.1465 13.1562C19.1367 13.127 19.127 13.0732 19.1172 12.9951C19.1074 12.917 19.1025 12.834 19.1025 12.7461C19.1025 12.1602 19.2295 11.5938 19.4834 11.0469C19.7373 10.4902 20.0254 10.0313 20.3477 9.66992C20.7578 9.18164 21.2754 8.77637 21.9004 8.4541C22.5254 8.13184 23.1211 7.96094 23.6875 7.94141C23.7168 8.06836 23.7314 8.21973 23.7314 8.39551C23.7314 8.98145 23.6191 9.55273 23.3945 10.1094C23.1699 10.6562 22.8818 11.1445 22.5303 11.5742Z",fill:"black"}));function Ur({clientApplications:s,isConfluenceEnabled:t,isGdriveEnabled:a,isNotionOpenConnectorEnabled:o,isJiraEnabled:i,isO365Enabled:l,isSlackOpenEnabled:r}){const{connectorConfig:u,isLoading:c}=nn();return c?e.jsx("div",{className:"flex justify-center",children:e.jsx(Re,{})}):!u.size&&!s?.length?e.jsx(ut,{type:"info",children:e.jsx(n,{...rs.noConnectorSettings})}):e.jsx(Br,{clientApplications:s,connectorConfig:u,isConfluenceEnabled:t,isGdriveEnabled:a,isJiraEnabled:i,isNotionOpenConnectorEnabled:o,isO365Enabled:l,isSlackOpenEnabled:r})}function Br({clientApplications:s,connectorConfig:t,isConfluenceEnabled:a,isGdriveEnabled:o,isJiraEnabled:i,isNotionOpenConnectorEnabled:l,isO365Enabled:r,isSlackOpenEnabled:u}){t.get(J.CONFLUENCE);const c=t.get(J.GDRIVE);t.get(J.NOTION_OPEN_CONNECTOR),t.get(J.JIRA);const g=t.get(J.O365_PERSONAL),p=t.get(J.O365_BUSINESS);t.get(J.SLACK_OPEN_CONNECTOR);const m=o&&!!c,f=r&&!!g,h=r&&!!p,{config:b}=jo("1001765573"),C=b.get("ca_enabled",!1),y=b.get("ca_sk_enabled",!1),[N,A]=d.useState(!1),[L,I]=d.useState(!1),[U,S]=d.useState(!1);d.useEffect(()=>{(async()=>{if(C)try{const[Y,D,se]=await Promise.all([F.checkOrgExist(),F.getKnowledgeStoreStatus("google_drive"),F.getKnowledgeStoreStatus("slack")]);A(Y.exist),I(D.credential_type==="user_oauth"),S(se.credential_type==="user_oauth")}catch{A(!1),I(!1),S(!1)}})()},[C]);const $=s?.filter(({type:q})=>q==="apple"),pe=N&&(L||U);return e.jsxs("div",{className:"flex flex-col",children:[e.jsx(B,{children:e.jsx("div",{className:"my-2",children:e.jsx(n,{...rs.connectorsTitle})})}),c&&m&&e.jsx(Ct,{entry:c,description:rs.googleDriveDesc}),g&&f&&e.jsx(Ct,{entry:g,description:rs.o365Desc}),p&&h&&e.jsx(Ct,{entry:p,description:rs.o365BusinessDesc}),!1,!1,!1,!1,$&&e.jsx(Rr,{clientApplications:$}),C&&pe&&e.jsxs(e.Fragment,{children:[e.jsx(Dr,{}),L&&e.jsx(ja,{type:Cs.GDRIVE_SYNC_CONNECTOR}),y&&U&&e.jsx(ja,{type:Cs.SLACK_SYNC_CONNECTOR})]})]})}function Rr({clientApplications:s}){const{mutate:t,isPending:a}=di();return e.jsx(e.Fragment,{children:s.map(o=>e.jsx(Wr,{clientApplication:o,disabled:a,onDisconnect:()=>{k.logEventWithStatsig(w.connectorSettingsClientApplicationDisconnectButtonClicked,"chatgpt_connector_settings_client_application_disconnect_button_clicked",{id:o.id,name:o.name,type:o.type}),t(o.id)}},o.id))})}function Wr({clientApplication:s,disabled:t,onDisconnect:a}){return e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col gap-2 pb-1 pt-3",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(Or,{className:"icon-lg"}),e.jsx("p",{className:"text-md flex-1 font-semibold text-token-text-primary",children:s.name}),e.jsx(H,{onClick:a,color:"danger-outline",size:"small",disabled:t,children:e.jsx(n,{...rs.disconnect})})]}),e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{...rs.appleDesc})})]})})}const rs=V({connectorsTitle:{id:"connectorSettings.connectorsTitle",defaultMessage:"Connect apps to access their information in ChatGPT."},googleDriveDesc:{id:"connectorSettings.googleDriveDesc.1",defaultMessage:"Upload Google Docs, Sheets, Slides and other files."},o365Desc:{id:"connectorSettings.o365Desc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint and other files."},o365BusinessDesc:{id:"connectorSettings.o365BusinessDesc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint, and other files, including those from SharePoint sites."},noConnectorSettings:{id:"connectorSettings.noConnectorSettings",defaultMessage:"Unable to get connected apps"},appleDesc:{id:"P5OVxG",defaultMessage:"Get personalized ChatGPT responses and Plus benefits when using Siri and Writing Tools."},disconnect:{id:"connectorSettings.disconnectButton",defaultMessage:"Disconnect"}}),Gr=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3.21876L14.4631 4.93466C14.7001 5.09977 14.9701 5.21155 15.2542 5.26238L18.2093 5.79072L18.7376 8.74559C18.7884 9.02993 18.9003 9.30008 19.0656 9.53719L20.7813 12L19.0655 14.4629C18.9003 14.7 18.7884 14.9702 18.7376 15.2543L18.2093 18.2093L15.2545 18.7376C14.97 18.7884 14.7 18.9003 14.4631 19.0654L12 20.7813L9.53718 19.0656C9.30007 18.9003 9.03003 18.7884 8.74569 18.7376L5.79076 18.2093L5.26239 15.2543C5.21154 14.9699 5.09969 14.7 4.93466 14.4631L3.21875 12L4.93463 9.53696C5.09975 9.29994 5.21155 9.02999 5.26238 8.74572L5.79072 5.79072L8.7457 5.26239C9.02996 5.21156 9.29992 5.09977 9.53693 4.93466L12 3.21876ZM13.1432 1.57771C12.4562 1.0991 11.5438 1.0991 10.8568 1.57771L8.3937 3.29361L5.43872 3.82194C4.6145 3.9693 3.9693 4.6145 3.82194 5.43872L3.29361 8.39368L1.57772 10.8568C1.0991 11.5438 1.09909 12.4562 1.5777 13.1432L3.29359 15.6063L3.82194 18.5613C3.9693 19.3855 4.61449 20.0307 5.43867 20.1781L8.39364 20.7064L10.8568 22.4223C11.5438 22.9009 12.4562 22.9009 13.1432 22.4223L15.6063 20.7064L18.5613 20.1781C19.3855 20.0307 20.0307 19.3855 20.1781 18.5614L20.7064 15.6064L22.4223 13.1432C22.9009 12.4562 22.9009 11.5438 22.4223 10.8568L20.7064 8.39371L20.1781 5.43873C20.0307 4.61455 19.3855 3.96931 18.5613 3.82194L15.6064 3.29363L13.1432 1.57771Z",fill:"currentColor"}),d.createElement("path",{d:"M11.5876 8.1018C11.7862 7.81202 12.2138 7.81202 12.4124 8.1018L13.4865 9.669C13.5515 9.76387 13.6473 9.83342 13.7576 9.86594L15.58 10.4031C15.9169 10.5025 16.0491 10.9092 15.8349 11.1876L14.6763 12.6934C14.6061 12.7846 14.5696 12.8971 14.5727 13.0121L14.625 14.9113C14.6346 15.2625 14.2886 15.5138 13.9576 15.3961L12.1675 14.7596C12.0592 14.721 11.9408 14.721 11.8325 14.7596L10.0424 15.3961C9.71136 15.5138 9.36537 15.2625 9.37502 14.9113L9.42727 13.0121C9.43043 12.8971 9.39386 12.7846 9.32372 12.6934L8.16515 11.1876C7.95091 10.9092 8.08307 10.5025 8.42003 10.4031L10.2424 9.86594C10.3527 9.83342 10.4485 9.76387 10.5135 9.669L11.5876 8.1018Z",fill:"currentColor"})),Hr=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C10.3431 4 9 5.34315 9 7C9 8.65685 10.3431 10 12 10C13.6569 10 15 8.65685 15 7C15 5.34315 13.6569 4 12 4ZM7 7C7 4.23858 9.23858 2 12 2C14.7614 2 17 4.23858 17 7C17 9.76142 14.7614 12 12 12C9.23858 12 7 9.76142 7 7ZM19.0277 15.6255C18.6859 15.5646 18.1941 15.6534 17.682 16.1829C17.4936 16.3777 17.2342 16.4877 16.9632 16.4877C16.6922 16.4877 16.4328 16.3777 16.2444 16.1829C15.7322 15.6534 15.2405 15.5646 14.8987 15.6255C14.5381 15.6897 14.2179 15.9384 14.0623 16.3275C13.8048 16.9713 13.9014 18.662 16.9632 20.4617C20.0249 18.662 20.1216 16.9713 19.864 16.3275C19.7084 15.9384 19.3882 15.6897 19.0277 15.6255ZM21.721 15.5847C22.5748 17.7191 21.2654 20.429 17.437 22.4892C17.1412 22.6484 16.7852 22.6484 16.4893 22.4892C12.6609 20.4291 11.3516 17.7191 12.2053 15.5847C12.6117 14.5689 13.4917 13.8446 14.5481 13.6565C15.3567 13.5125 16.2032 13.6915 16.9632 14.1924C17.7232 13.6915 18.5697 13.5125 19.3783 13.6565C20.4347 13.8446 21.3147 14.5689 21.721 15.5847ZM9.92597 14.2049C10.1345 14.7163 9.889 15.2999 9.3776 15.5084C7.06131 16.453 5.5 18.5813 5.5 20.9999C5.5 21.5522 5.05228 21.9999 4.5 21.9999C3.94772 21.9999 3.5 21.5522 3.5 20.9999C3.5 17.6777 5.641 14.8723 8.6224 13.6565C9.1338 13.448 9.71743 13.6935 9.92597 14.2049Z",fill:"currentColor"}));ke(bs.CheckboxItem)`flex flex-row justify-between h-10 mx-2 items-center`;function Vr(){const s=v();return e.jsx(Ke,{value:ae.Nimbus,icon:e.jsx(ll,{className:"icon-sm"}),label:s.formatMessage({id:"settingsModal.notifications",defaultMessage:"Notifications"})})}function Kr({isOpen:s,onClose:t}){const a=v(),o=X(),i=Se(),{data:l}=fn(),r=Rt(i?.id),u=i?.data.subscriptionStatus.planType,c=Fs(u.toLowerCase()),g=Ye(),p=async()=>{if(!i)throw new Error("No account!");await r.mutateAsync(i?.id,{onError:()=>{o.danger(a.formatMessage(va.cancelFailure),{duration:5})},onSuccess:()=>{g.invalidateQueries({queryKey:["account-status"]}),o.info(a.formatMessage(va.cancelSuccess),{duration:5}),setTimeout(()=>{t()},5e3)}})};d.useEffect(()=>{r.isSuccess&&t()},[r.isSuccess,t]);const m=l?.active_until?new Date(l.active_until).toLocaleDateString(a.locale,{year:"numeric",month:"short",day:"numeric"}):"";return e.jsx(R,{type:"success",isOpen:s,onClose:t,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:a.formatMessage({id:"cancelSubscriptionModal.title",defaultMessage:"Subscription Cancellation"}),isProduceDesign:!0,children:e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{id:"cancelSubscriptionModal.canceledSubscription",defaultMessage:"Your {planName} subscription will be canceled but will remain active until the end of your billing period on {expirationDate}.",values:{planName:c,expirationDate:m}})}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(De,{title:a.formatMessage({id:"cancelSubscriptionModal.goBack",defaultMessage:"Go Back"}),color:"secondary",onClick:t}),e.jsx(De,{title:a.formatMessage({id:"cancelSubscriptionModal.cancel",defaultMessage:"Cancel subscription"}),color:"danger",onClick:()=>p()})]})]})})}const va=V({cancelSuccess:{id:"cancelSubscriptionModal.cancelSuccess",defaultMessage:"Your subscription has been canceled."},cancelFailure:{id:"cancelSubscriptionModal.cancelFailure",defaultMessage:"Something went wrong while canceling your subscription."}});function Yr(){return new URL(window.location.href).searchParams.get("disable_mfa")!=null}function zr({onClose:s,onConfirm:t}){const a=v();return e.jsx(on,{isOpen:!0,title:a.formatMessage(Sa.disableConfimationTitle),confirmText:a.formatMessage(Sa.disable),onConfirm:t,onClose:s,primaryButtonColor:"danger",children:e.jsx("div",{children:e.jsx(n,{id:"postSigninDisableConfimationModal.description.1",defaultMessage:"Are you sure you want to disable multi-factor authentication? You will no longer need to provide a verification code when you log into your account."})})})}function $r(s){const t=s.map(a=>Ot[a]).filter(a=>a!==void 0);return t.length===1?t[0]:e.jsx(n,{id:"confirmEnableMfaForByPassModal.otherAccount",defaultMessage:"another account"})}function qr({mfaInfo:s,onEnableMFA:t,onCancel:a}){const o=v(),{session:i}=it(),r=i?.user?.idp,u=(r?Ot[r]:void 0)??e.jsx(n,{id:"confirmEnableMfaForByPassModal.yourAccount",defaultMessage:"your current account"}),c=$r(s.otherProvidersWithoutMfa??[]);return e.jsx(on,{isOpen:!0,title:o.formatMessage({id:"confirmEnableMfaForByPassModal.title",defaultMessage:"Enable multi-factor authentication (MFA)"}),confirmText:o.formatMessage({id:"confirmEnableMfaForByPassModal.enableMfa",defaultMessage:"Enable MFA"}),onConfirm:t,onClose:a,primaryButtonColor:"primary",children:e.jsxs("div",{children:[e.jsx("p",{className:"mb-6",children:e.jsx(n,{id:"confirmEnableMfaForByPassModal.description0",defaultMessage:"You'll only be able to log in using {currentIdp} while MFA is on.",values:{currentIdp:u}})}),e.jsx("p",{children:e.jsx(n,{id:"confirmEnableMfaForByPassModal.description1",defaultMessage:"If you prefer to have MFA enabled for your account when logging in with {otherNonMfaIdp}, please sign out and log in again through that method before enabling.",values:{otherNonMfaIdp:c}})})]})})}const Sa=V({disableConfimationTitle:{id:"mfaDisableConfirmationModal.title.0",defaultMessage:"Disable multi-factor authentication (MFA)"},disable:{id:"mfaDisableConfirmationModal.button",defaultMessage:"Disable MFA"}});function In(){const[s,t]=vo(),a=v();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(n,{...$s.theme})}),e.jsx(el,{value:s,onValueChange:t,options:[{label:a.formatMessage($s.system),value:"system"},{label:a.formatMessage($s.dark),value:"dark"},{label:a.formatMessage($s.light),value:"light"}]})]})}const $s=V({theme:{id:"settingsModal.theme",defaultMessage:"Theme"},system:{id:"settingsModal.system",defaultMessage:"System"},dark:{id:"settingsModal.dark",defaultMessage:"Dark"},light:{id:"settingsModal.light",defaultMessage:"Light"}});async function Qr(){let s;"keyboard"in navigator&&(s=navigator.keyboard);const t=await s?.getLayoutMap()??new Map;return s?.lock&&await s?.lock(),new Promise(a=>{const o=new Set,i=new Set;let l=!0;const r=f=>{const h=ka(f,t);h&&!o.has(h)&&(o.add(h),i.add(h))},u=f=>{const h=ka(f,t);h&&o.delete(h),o.size===0&&l&&p()},c=f=>{l&&(g(),a(void 0))},g=()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",c),window.removeEventListener("click",c),window.removeEventListener("blur",c),clearTimeout(m),s?.unlock&&s?.unlock(),l=!1},p=()=>{g();const f=Zr(Array.from(i));a(Fn({webKeys:f}))};window.addEventListener("keydown",r),window.addEventListener("keyup",u),window.addEventListener("mousedown",c),window.addEventListener("click",c),window.addEventListener("blur",c);const m=setTimeout(()=>{l&&(g(),a(void 0))},1e4)})}function Zr(s){return s.toSorted((t,a)=>{const o=Object.values(tt).indexOf(t),i=o===-1?Number.MAX_SAFE_INTEGER:o,l=Object.values(tt).indexOf(a),r=l===-1?Number.MAX_SAFE_INTEGER:l;return i===r?t.charCodeAt(0)-a.charCodeAt(0):i-r})}const Xr=s=>/^[a-zA-Z]$/.test(s);function ka(s,t){const a=t.get(s.code)??s.key;let o;return M[s.key]?o=M[s.key]:Xr(a)?o=a.toUpperCase():o=a,o}function Fn(s){return s.webKeys?(s.electronAcceleratorKeys=s.webKeys.map(ec),s.electronAcceleratorString=wa(s.electronAcceleratorKeys)):s.electronAcceleratorKeys?(s.webKeys=s.electronAcceleratorKeys.map(Jr),s.electronAcceleratorString=wa(s.electronAcceleratorKeys)):s={webKeys:[],electronAcceleratorKeys:[],electronAcceleratorString:void 0},s}function Jr(s){return tt[s]??s}function ec(s){return tc[s]??s}function Dn(s){const t=new Set(Object.keys(On)),a=s.filter(i=>!t.has(i)).length,o=s.length-a;return a===1&&o>0}const sc=s=>{const t=s.split("+");return Dn(t)?t:void 0},wa=s=>Dn(s)?s.join("+"):void 0,On={Meta:M.Meta,CmdOrCtrl:M.Mod,CommandOrControl:M.Mod,Ctrl:M.Control,Control:M.Control,Cmd:M.Mod,Command:M.Mod,Alt:M.Alt,Option:M.Alt,AltGr:M.AltGraph,Shift:M.Shift,Super:M.Super},tt={...On,Capslock:M.CapsLock,Space:M.Space,Tab:M.Tab,Numlock:M.NumLock,Scrolllock:M.ScrollLock,Backspace:M.Backspace,Delete:M.Delete,Insert:M.Insert,Return:M.Enter,Enter:M.Enter,Home:M.Home,End:M.End,PageUp:M.PageUp,PageDown:M.PageDown,Up:M.ArrowUp,Down:M.ArrowDown,Left:M.ArrowLeft,Right:M.ArrowRight,Esc:M.Escape,Escape:M.Escape,VolumeUp:M.AudioVolumeUp,VolumeDown:M.AudioVolumeDown,VolumeMute:M.AudioVolumeMute,MediaNextTrack:M.MediaTrackNext,MediaPreviousTrack:M.MediaTrackPrevious,MediaStop:M.MediaStop,MediaPlayPause:M.MediaPlayPause,PrintScreen:M.PrintScreen,numadd:M.Add,numsub:M.Subtract,nummult:M.Multiply,numdiv:M.Divide,numdec:M.Decimal,F1:M.F1,F2:M.F2,F3:M.F3,F4:M.F4,F5:M.F5,F6:M.F6,F7:M.F7,F8:M.F8,F9:M.F9,F10:M.F10,F11:M.F11,F12:M.F12,F13:M.F13,F14:M.F14,F15:M.F15,F16:M.F16,F17:M.F17,F18:M.F18,F19:M.F19,F20:M.F20},tc=Object.fromEntries(Object.entries(tt).map(([s,t])=>[t,s]));function ac(){const s=ln(),t=Un(),a=Bn();return s&&(t||a)}function nc(){return e.jsxs(e.Fragment,{children:[e.jsx(ic,{}),e.jsx(rc,{}),e.jsx(cc,{}),e.jsx(pc,{})]})}function Un(){const{value:s}=vs("2923133196");return s}async function oc(){await hs?.checkForUpdates()}function ic(){const s=Un(),[t,a]=d.useState(!1);return s&&e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsx(Ee,{label:e.jsx(n,{...Fe.updatesSettingLabel}),disabled:t,buttonLabel:t?e.jsx(n,{...Fe.updateInProgressButtonLabel}):e.jsx(n,{...Fe.updateButtonLabel}),onClick:async()=>{try{a(!0),await oc()}catch(o){Be.addError(new Error("Sidetron Settings: Error checking for updates"),{cause:o})}finally{a(!1)}},description:e.jsx(n,{...Fe.updateSettingDescription,values:{version:So(navigator.userAgent)??"Unknown"}})})})})}const lc=async()=>{let s="";const t=await hs?.getSettingValue("companionWindowShortcut");typeof t=="string"?s=t:Be.addError(new Error("Sidetron Settings: No companion chat hotkey found over IPC"));const a=sc(s);return Promise.resolve(Fn({electronAcceleratorKeys:a}))};function Bn(){const{value:s}=vs("603035019");return s}function rc(){const s=Bn(),[t,a]=d.useState(!1),[o,i]=d.useState(void 0);return d.useEffect(()=>{(async()=>{const r=await lc();i(r)})()},[]),d.useEffect(()=>{hs?.publish(ea.HOTKEY_RECORDING_STATE,{inProgress:t})},[t]),s&&e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsx(Ee,{label:e.jsx(n,{...Fe.companionChatHotkeyLabel}),disabled:o===void 0||t,buttonLabel:t?e.jsx(n,{...Fe.companionChatHotkeyRecordingLabel}):o?e.jsx(dc,{keyboardBinding:o.webKeys}):e.jsx(n,{...Fe.companionChatHotkeyLoadingLabel}),onClick:async()=>{a(!0);const l=await Qr();l?l.electronAcceleratorString?(i(l),hs&&(hs.publish(ea.DESKTOP_SETTING_CHANGED,{setting:"companionWindowShortcut",value:l.electronAcceleratorString}),Be.addAction(`Sidetron Settings: User recorded a new hotkey: ${l.electronAcceleratorString}`))):Be.addError(new Error(`Sidetron Settings: Invalid companion chat hotkey registered: ${l}`)):Be.addAction("Sidetron Settings: User did not record a hotkey"),a(!1)}})})})}function cc(){return e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsx(In,{})})})}function dc({keyboardBinding:s}){return e.jsx(e.Fragment,{children:ui(s).map((t,a)=>e.jsxs("span",{className:"text-xs",children:[t,a<s.length-1&&e.jsx(uc,{})]},a))})}function uc(){return e.jsx("span",{className:"mx-1",children:e.jsx(n,{...Fe.hotkeySeparator})})}function gc(){const{value:s}=vs("4066640644");return s}function mc({href:s,label:t,stateLabel:a,testId:o}){return e.jsx("a",{className:"w-full","data-testid":o,href:s,target:"_blank",rel:"noreferrer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:t}),e.jsxs("div",{className:"-mb-1 mr-3 flex items-center",children:[a&&e.jsx("div",{className:"-mt-0.5 me-2",children:a}),e.jsx(Ya,{className:"icon-sm"})]})]})})}function pc(){const[s,t]=d.useState(!1),a=gc(),o=v(),i=async()=>{const l=await hs?.getSettingValue("autoLaunch");t(!!l)};return d.useEffect(()=>{if(!a)return;i();const l=()=>{i()};return window.addEventListener("focus",l),()=>{window.removeEventListener("focus",l)}},[a]),a&&e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsx(mc,{href:"ms-settings:startupapps",label:e.jsx(n,{...Fe.autoLaunchLabel}),stateLabel:s?o.formatMessage(Fe.autoLaunchOnLabel):o.formatMessage(Fe.autoLaunchOffLabel)})})})}const Fe=V({autoLaunchLabel:{id:"desktopAppSettingsModal.autoLaunchLabel",defaultMessage:"Launch at Login"},autoLaunchOnLabel:{id:"desktopAppSettingsModal.autoLaunchOnLabel",defaultMessage:"On"},autoLaunchOffLabel:{id:"desktopAppSettingsModal.autoLaunchOffLabel",defaultMessage:"Off"},updatesSettingLabel:{id:"desktopAppSettingsModal.updatesSettingLabel",defaultMessage:"App updates"},updateButtonLabel:{id:"desktopAppSettingsModal.updateButtonLabel",defaultMessage:"Check for updates"},updateInProgressButtonLabel:{id:"desktopAppSettingsModal.updateInProgressButtonLabel",defaultMessage:"Checking for updates..."},updateSettingDescription:{id:"desktopAppSettingsModal.updateSettingDescription",defaultMessage:"Current version: {version}"},companionChatHotkeyLabel:{id:"desktopAppSettingsModal.companionChatHotkeyLabel",defaultMessage:"Companion window hotkey"},companionChatHotkeyLoadingLabel:{id:"desktopAppSettingsModal.companionChatHotkeyLoadingLabel",defaultMessage:"Loading..."},companionChatHotkeyRecordingLabel:{id:"desktopAppSettingsModal.companionChatHotkeyRecordingLabel",defaultMessage:"Recording..."},hotkeySeparator:{id:"desktopAppSettingsModal.hotkeySeparator",defaultMessage:"+"}});function fc(){const t=ot()?.includes(Ba);return Ne({queryKey:["mfaInfo"],queryFn:()=>F.getMfaInfo(),enabled:t})}var de=(s=>(s.DISABLED="DISABLED",s.ENABLED="ENABLED",s.LOADING="LOADING",s))(de||{});function hc(){const s=fc();let t;return s.isLoading?t="LOADING":s.data?.mfa_enabled?t="ENABLED":t="DISABLED",{status:t,otherProvidersWithoutMfa:s.data?.other_providers_without_mfa,use_native_mfa:!!s.data?.use_native_mfa,native_default_factor_id:s.data?.native_default_factor_id,auth0_user_exists:!!s.data?.auth0_user_exists}}const xc=new Set(["google-oauth2","windowslive","apple"]),Mc="Username-Password-Authentication",bc=4*60;function qs(s){return s?.idp&&xc.has(s.idp)?{connection:s.idp,...s.email&&{login_hint:s.email}}:s?.idp==="auth0"?{connection:Mc,...s.email?{login_hint:s.email}:{[gi]:"true",[mi]:"true"}}:s?.email?{...s.email&&{login_hint:s.email}}:{}}function Ea(s){if(!s)throw new Error("No session found, cannot enable MFA");if(s.authProvider==="mocked")throw new Error("Mock users can't enable MFA! Please setup Auth0 following the instructions in the README")}function Pa(s){try{return cl(s)}catch{throw new Error("Unable to decode access token")}}function Cc(s){return s.pwd_auth_time}function Aa(s){const t=Cc(s);if(!t)return!0;const a=t/1e3;return Date.now()/1e3-a>bc}function yc(s){return s[ko]?.required==="yes"}function jc(s){return s===Je.OpenAI?Je.LoginWebAuth0:s===Je.OpenAIDev?Je.LoginWebAuth0Dev:s===Je.OpenAISidetron?Je.Auth0Sidetron:s===Je.OpenAISidetronDev?Je.Auth0SidetronDev:s}function vc(s){const{session:t}=it(),a=Ss(),o=t?.user?.idp==="auth0",i=!!t?.user?.mfa,l=t?.authProvider?jc(t?.authProvider):void 0,{useNativeProvider:r,auth0UserExists:u}=s,c=d.useCallback(async()=>{Ea(t);const p=new URL("/auth/enroll_mfa",window.location.origin).toString();let m=!0;if(t?.accessToken){const h=Pa(t.accessToken);m=Aa(h)||!u}if(r&&m){Gs.signIn(l,{callbackUrl:p},{max_age:"0",...Hs(Ws()),...qs(t?.user)});return}if(r){window.location.href=p;return}const f=new URL(jt(vt.MFA_ENABLED,"/#settings/Security"),location.origin).toString();Gs.signIn(l,{callbackUrl:f},{...qs(t?.user),max_age:"0",oai_enforce_mfa:"true",...Hs(Ws())})},[t,r,u,l]),g=d.useCallback(async()=>{Ea(t);const p=new URL("/auth/disable_mfa",window.location.origin).toString();let m=!0;if(t?.accessToken){const f=Pa(t.accessToken);m=Aa(f)||!yc(f)}if(r&&m){Gs.signIn(t?.authProvider,{callbackUrl:p},{max_age:"0",...qs(t?.user),...Hs(Ws())});return}if(r){a("/?disable_mfa=true#settings/Security");return}Gs.signIn(t?.authProvider,{callbackUrl:p},{...qs(t?.user),max_age:"0",...Hs(Ws())})},[t,a,r]);return{setupMfa:c,isUsernamePassword:o,isLoggedInWithMfa:i,removeMfa:g}}const Sc=s=>d.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 7C2 5.34315 3.34315 4 5 4H19C20.6569 4 22 5.34315 22 7V17C22 18.6569 20.6569 20 19 20H5C3.34315 20 2 18.6569 2 17V7ZM4.26834 6.31832L11.4233 11.3689C11.769 11.6129 12.231 11.6129 12.5767 11.3689L19.7317 6.31832C19.5491 6.12247 19.2889 6 19 6H5C4.71114 6 4.45089 6.12247 4.26834 6.31832ZM20 8.57698L13.7301 13.0028C12.6929 13.735 11.3071 13.735 10.2699 13.0028L4 8.57698V17C4 17.5523 4.44772 18 5 18H19C19.5523 18 20 17.5523 20 17V8.57698Z",fill:"currentColor"})),kc=()=>{const{openSettings:s}=Us();return e.jsx("button",{onClick:()=>s(ae.BuilderProfile),children:e.jsx(Bt,{className:"icon-sm"})})};function wc({gizmoId:s,gizmoName:t,gizmoAvatar:a,canEdit:o,socials:i}){const{data:l,isLoading:r}=Ut();return r?null:l?e.jsxs(e.Fragment,{children:[o&&s&&e.jsx("span",{className:"absolute right-2 top-2",children:e.jsx(kc,{})}),e.jsx(pi,{src:a,isFirstParty:!1,className:"h-8 w-8"}),e.jsx("div",{className:"mt-1 text-center text-sm font-semibold text-token-text-primary",children:t}),e.jsx(fi,{builderName:l.display_name,builderUrl:l.website_url,socials:i,className:"text-xs"})]}):e.jsx(ut,{type:"info",children:e.jsx(n,{id:"gizmo.builderProfile.unableToLoadProfile",defaultMessage:"Unable to load your builder profile"})})}function Ec(){const{data:s,isLoading:t}=Ut(),a=Se();return t?e.jsx("div",{className:"flex justify-center",children:e.jsx(Re,{})}):s===void 0||a?.canInteractWithGizmos()===!1?e.jsx(ut,{type:"info",children:e.jsx(n,{...le.noCreatorProfile})}):e.jsx(Tc,{data:s})}function Pc({gizmoName:s,canEdit:t,gizmoAvatar:a}){const o=v(),{openSettings:i}=Us(),{data:l}=Ut();return l?e.jsxs("div",{className:"relative flex w-full flex-col items-center justify-stretch rounded-lg bg-token-main-surface-primary p-4",children:[e.jsx(wc,{gizmoAvatar:a,gizmoName:s??o.formatMessage(le.placeholderGPT),canEdit:t,socials:[l.socials.linkedin,l.socials.github,l.socials.twitter]}),e.jsx("div",{className:"absolute right-4 top-3 text-xs text-token-text-tertiary",children:t?e.jsx("button",{onClick:()=>{i(ae.BuilderProfile)},children:e.jsx(Bt,{className:"icon-sm"})}):e.jsx(n,{...le.preview})})]}):null}function Ac(s,t){if(s.website_url&&t.length>0){const a=t.find(o=>o.url===s.website_url);return a?a.hostname:t[0].hostname}else{if(t.length>0)return t[0].hostname;if(s.website_url)return}}function Tc({data:s}){const t=v(),a=hi(),o=Se()?.isEnterprisey(),i=Se()?.isWorkspaceAccount(),l=Ft(),r=s.domains.reduce((m,f)=>f.status==="verified"?[...m,{id:f.id,hostname:f.hostname,url:f.hostname}]:m,[]),u=Ac(s,r),{value:c}=vs("2256850471"),g=s.name==null||a.isPending,p=e.jsx(st,{size:"small",onChange:m=>{a.mutateAsync({hideName:!m})},disabled:g,enabled:!s.hide_name,label:s.hide_name?t.formatMessage(le.showNameToggle):t.formatMessage(le.hideNameToggle)});return e.jsxs("div",{className:"flex flex-col items-stretch",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{...le.creatorProfileDescription})}),e.jsx(Pc,{canEdit:!1}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-col",children:[!s.is_verified&&e.jsxs(ut,{type:"info",children:[e.jsx("div",{children:e.jsx(n,{...le.creatorProfileUnverifiedDisclaimer})}),e.jsx("div",{children:i?e.jsx(n,{...le.creatorProfileBusinessUnverifiedDisclaimer}):e.jsx(n,{...le.creatorProfilePersonalUnverifiedDisclaimer})})]}),s.name&&e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("b",{children:e.jsx(n,{...le.creatorProfileNameLabel})}),g?e.jsx(ve,{side:"left",label:t.formatMessage(le.linkDisabledTooltip),children:p}):p]}),e.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[e.jsx("span",{children:s.name}),e.jsx(ve,{side:"top",className:"ml-auto",label:t.formatMessage(le.nameSourceReason),children:e.jsx(rn,{className:"icon-sm text-token-text-tertiary"})})]})]}),!o&&e.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[e.jsx("hr",{className:"my-3 border-token-border-light"}),e.jsx("div",{className:"flex flex-row justify-between",children:e.jsx("b",{children:e.jsx(n,{...le.creatorProfileLinkHeader})})}),e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-2",children:[e.jsx(wt,{className:"icon-sm"}),e.jsx("div",{children:e.jsx(xi,{selectedDomain:u,domains:s.domains,verifiedDomains:r,onChangeDomain:m=>{a.mutateAsync({websiteUrl:m})}})})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx(xt,{socialData:s.socials.linkedin,icon:Mi}),e.jsx(xt,{socialData:s.socials.github,icon:bi}),e.jsx(xt,{socialData:s.socials.twitter,icon:Ci})]})]}),!o&&l&&l.email&&e.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[e.jsx("hr",{className:"my-3 border-token-border-light"}),e.jsx("div",{className:"flex flex-row justify-between",children:e.jsx("b",{children:e.jsx(n,{...le.creatorProfileEmailHeader})})}),e.jsxs("div",{className:"my-1 flex flex-row items-center space-x-2",children:[e.jsx(Sc,{className:"icon-sm"}),e.jsx("span",{children:l.email})]}),e.jsx(ve,{label:t.formatMessage(le.feedbackEmailTooltip),children:e.jsx(cn,{className:"rounded-xl",id:"receive-support-emails",onChange:m=>{a.mutateAsync({willReceiveSupportEmails:m.currentTarget.checked})},checked:s.will_receive_support_emails,label:t.formatMessage(le.receiveFeedbackEmails)})})]})]})})]})}const le=V({gizmoTab:{id:"settingsModal.gizmoTab",defaultMessage:"Builder profile"},creatorProfileDescription:{id:"settingsModal.creatorProfileDescription",defaultMessage:"Personalize your builder profile to connect with users of your GPTs. These settings apply to publicly shared GPTs."},creatorProfileUnverifiedDisclaimer:{id:"settingsModal.createrProfileUnverifiedDisclaimer",defaultMessage:"Complete verification to publish GPTs to everyone."},creatorProfilePersonalUnverifiedDisclaimer:{id:"settingsModal.creatorProfilePersonalUnverifiedDisclaimer",defaultMessage:"Verify your identity by adding billing details or verifying ownership of a public domain name."},creatorProfileBusinessUnverifiedDisclaimer:{id:"settingsModal.creatorProfileBusinessUnverifiedDisclaimer",defaultMessage:"Contact your workspace administrator to set up a builder profile"},creatorProfileNameLabel:{id:"settingsModal.creatorProfileNameLabel",defaultMessage:"Name"},placeholderGPT:{id:"settingsModal.placeholderGPT",defaultMessage:"PlaceholderGPT"},byName:{id:"settingsModal.byName",defaultMessage:"by {name}"},preview:{id:"settingsModal.preview",defaultMessage:"Preview"},noCreatorProfile:{id:"settingsModal.noCreatorProfile",defaultMessage:"Unable to retrieve builder profile"},creatorProfileLinkHeader:{id:"settingsModal.creatorProfileLinkHeader.1",defaultMessage:"Links"},creatorProfileEmailHeader:{id:"settingsModal.creatorProfileEmailHeader.0",defaultMessage:"Email"},nameDisabledTooltip:{id:"settingsModal.nameDisabledTooltip",defaultMessage:"You must have a verified name to enable displaying a name"},linkDisabledTooltip:{id:"settingsModal.linkDisabledTooltip",defaultMessage:"You must have a verified domain to enable displaying a link"},addDomain:{id:"settingsModal.addDomain",defaultMessage:"Verify new domain"},nameSourceReason:{id:"settingsModal.nameSourceReason",defaultMessage:"Name is populated from your billing details"},hideNameToggle:{id:"settingsModal.hideNameToggle",defaultMessage:"Hide your name in your builder profile"},showNameToggle:{id:"settingsModal.showNameToggle",defaultMessage:"Show your name in your builder profile"},hideWebsiteToggle:{id:"settingsModal.hideWebsiteToggle",defaultMessage:"Hide your website in your builder profile"},showWebsiteToggle:{id:"settingsModal.showWebsiteToggle",defaultMessage:"Show your website in your builder profile"},feedbackEmailTooltip:{id:"settingsModal.feedbackEmailTooltip",defaultMessage:"Allow users of your GPTs to send feedback to your ChatGPT login email. Your email will never be shared publicly."},receiveFeedbackEmails:{id:"settingsModal.receiveFeedbackEmails.1",defaultMessage:"Receive feedback emails"}});function Nc(){return e.jsx(n,{...le.gizmoTab})}const Rn=["archivedConversations"],_c=30,Lc=3;function Ic({conversation:s,elementRef:t,closeParentModal:a}){const o=v(),i=X(),l=Ye(),{mutate:r,isPending:u}=cs({mutationFn:async({conversationId:m,...f})=>F.patchConversation(m,f),onSettled:()=>{l.invalidateQueries({queryKey:[Rn]}),l.invalidateQueries({queryKey:[yi]})},onError:()=>{i.danger(o.formatMessage(Pe.deleteFailed))}}),[c,g]=d.useState(!1),p=`/c/${s.id}`;return e.jsxs(e.Fragment,{children:[e.jsxs(ee.Row,{disabled:u,children:[e.jsx(ee.Cell,{children:e.jsxs("a",{href:p,rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:t,children:[e.jsx(dn,{className:"icon-md flex-shrink-0"}),s.title]})}),e.jsx(ee.Cell,{children:s.create_time!=null?e.jsx(_t,{value:s.create_time,month:"long",year:"numeric",day:"numeric"}):null}),e.jsx(ee.Cell,{textAlign:"right",children:e.jsxs(ee.Actions,{children:[e.jsx(ve,{label:o.formatMessage(Pe.unarchiveConversation),sideOffset:4,side:"top",children:e.jsx("button",{"aria-label":o.formatMessage(Pe.unarchiveConversation),className:"cursor-pointer text-[18px] text-token-text-tertiary hover:text-token-text-secondary",onClick:()=>{r({conversationId:s.id,is_archived:!1})},children:e.jsx(ji,{className:"icon-sm"})})}),e.jsx(ve,{label:o.formatMessage(Pe.deleteConversation),sideOffset:4,side:"top",children:e.jsx("button",{onClick:()=>g(!0),"aria-label":o.formatMessage(Pe.deleteConversation),className:"text-token-text-tertiary hover:text-token-text-secondary",children:e.jsx(un,{className:"icon-sm"})})})]})})]}),c&&e.jsx(vi,{title:s.title,handleDelete:()=>{r({conversationId:s.id,is_visible:!1})},onClose:m=>{g(!1),m?.closeParentModal&&a()}})]})}function Fc({onClose:s}){const{data:t,isLoading:a,isError:o,refetch:i,fetchNextPage:l,hasNextPage:r}=Io({queryKey:[Rn],queryFn:({pageParam:f})=>F.getConversations({offset:f,limit:_c,isArchived:!0}),initialPageParam:0,getNextPageParam:f=>{const h=f.offset+f.limit;return h<f.total?h:void 0},refetchOnMount:"always"}),u=d.useRef(null),c=d.useCallback(f=>{a||f==null||(u.current?.disconnect(),u.current=new IntersectionObserver(h=>{h[0].isIntersecting&&r&&l()}),u.current.observe(f))},[a,r,l]);d.useEffect(()=>()=>{u.current?.disconnect()},[]);const g=d.useMemo(()=>t?.pages.flatMap(f=>f.items)??[],[t]),p=v();let m;return a?m=e.jsx("div",{className:"pb-8 text-token-text-secondary",children:e.jsx(n,{...Pe.loading})}):o?m=e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 text-red-500",children:e.jsx(n,{...Pe.somethingWentWrong})}),e.jsx("div",{children:e.jsx(H,{color:"secondary",onClick:()=>{i()},children:e.jsx(n,{...Pe.retry})})})]}):g.length===0?m=e.jsx("div",{className:"pb-8 text-token-text-tertiary",children:e.jsx(n,{...Pe.noArchivedConversations})}):m=e.jsxs(ee.Root,{className:"max-h-[28rem]",size:"compact",children:[e.jsxs(ee.Header,{children:[e.jsx(ee.HeaderCell,{children:e.jsx(n,{...Pe.name})}),e.jsx(ee.HeaderCell,{children:e.jsx(n,{...Pe.dateCreated})}),e.jsx(ee.HeaderCell,{})]}),e.jsx(ee.Body,{children:g.map((f,h)=>e.jsx(Ic,{conversation:f,elementRef:h===g.length-Lc?c:void 0,closeParentModal:s},f.id))})]}),e.jsx(R,{isOpen:!0,onClose:s,size:"custom",className:"max-w-5xl",type:"success",title:p.formatMessage(Pe.title),showCloseButton:!0,children:m})}const Pe=V({name:{id:"archivedConversationsModal.name",defaultMessage:"Name"},dateCreated:{id:"archivedConversationsModal.dateCreated",defaultMessage:"Date created"},loading:{id:"archivedConversationsModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"archivedConversationsModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"archivedConversationsModal.retry",defaultMessage:"Retry"},noArchivedConversations:{id:"archivedConversationsModal.noArchivedConversations",defaultMessage:"You have no archived conversations."},title:{id:"archivedConversationsModal.title",defaultMessage:"Archived Chats"},unarchiveConversation:{id:"archivedConversationsModal.unarchiveConversation",defaultMessage:"Unarchive conversation"},deleteConversation:{id:"archivedConversationsModal.deleteConversation",defaultMessage:"Delete conversation"},deleteFailed:{id:"archivedConversationsModal.deleteFailed",defaultMessage:"Deleting failed"}}),Wn=Si.FirstTimeUsingUserContext;function Dc(){const{eligible:s}=gn(Wn);return s}const Oc=({onClose:s})=>{const t=v(),{markAsViewed:a}=gn(Wn),o=d.useCallback(()=>{a(),s()},[a,s]);return e.jsxs(R,{isOpen:!0,onClose:Et,size:"custom",className:"max-w-xl",type:"success",title:t.formatMessage(Ts.title),primaryButton:e.jsx(oe.Button,{onClick:o,title:t.formatMessage(Ts.ok),color:"primary"}),children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[e.jsx("p",{children:e.jsx(n,{...Ts.body1})}),e.jsx("p",{children:e.jsx(n,{...Ts.body2})})]}),e.jsx("div",{className:"flex flex-col gap-3 text-sm text-token-text-tertiary",children:e.jsx("p",{children:e.jsx(n,{...Ts.legal1,values:{article:i=>e.jsx("a",{href:xn,target:"_blank",className:"underline",rel:"noopener noreferrer",children:i})}})})})]})},Ts=V({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats."},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated."},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more."},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK"}});function Uc({onSuccess:s,onError:t}){const a=Ye();return cs({mutationFn:({userContext:o})=>F.createOrUpdateUserSystemMessage(o),onSettled:(o,i)=>{const l=["userContext"];o!==null&&!i?a.setQueryData(l,o):a.invalidateQueries({queryKey:l})},onSuccess:s,onError:t})}function Gn(s){const t=v(),a=X();return Ne({queryKey:["userContext"],queryFn:()=>F.getUserSystemMessage().catch(o=>{throw a.danger(t.formatMessage({id:"userContextModal.getCustomInstructionsError",defaultMessage:"Failed to get your settings"})),o}),enabled:s,select:o=>({aboutUserMessage:o?.about_user_message??"",aboutModelMessage:o?.about_model_message??"",disabledTools:o?.disabled_tools??[],enabled:o?.enabled??!0})})}const Ta={aboutUserMessage:void 0,aboutModelMessage:void 0,disabledTools:void 0,enabled:void 0};function Bc({isModalOpen:s}){const t=v(),a=X(),o=Dc(),[i,l]=d.useState(!1),{isLoading:r,data:u}=Gn(s),{aboutUserMessage:c="",aboutModelMessage:g="",disabledTools:p=[],enabled:m}=u??{},[f,h]=d.useState(Ta),{aboutUserMessage:b,aboutModelMessage:C,disabledTools:y,enabled:N}=f,A=N??!!m,[L,I]=d.useState(null),U=d.useCallback(()=>{Me.closeModal(Ae.UserContext),h(Ta),I(null)},[]),{isPending:S,mutate:$}=Uc({onSuccess:()=>{U()},onError:_=>(_.response?.reason==="content_policy"&&_.response?.field?I(_.response?.field):a.danger(t.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"})),_)}),[pe,q]=d.useState(!1),Y=Ls(b??"")||Ls(C??""),D=C!==void 0&&C!==g||b!==void 0&&b!==c||y!==void 0&&!wo(y,p)||N!==void 0&&N!==m,se=d.useCallback(()=>{D?q(!0):U()},[U,D]),W=d.useCallback(async()=>{S||(I(null),$({userContext:{aboutUserMessage:b??"",aboutModelMessage:C??"",disabledTools:y??[],enabled:!!N}}))},[S,C,b,y,N,$]),P=d.useCallback(()=>{if(Y){const _=Ls(b??""),O=Ls(C??"");_&&(te.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_user_message",limit:is.toString(),character_length:b?.length.toString()??""}),k.logEvent(w.userContextModelMessagePastLimit,{type:"about_user_message",limit:is.toString(),character_length:b?.length.toString()??""})),O&&(te.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_model_message",limit:is.toString(),character_length:C?.length.toString()??""}),k.logEvent(w.userContextModelMessagePastLimit,{type:"about_model_message",limit:is.toString(),character_length:C?.length.toString()??""})),a.danger(t.formatMessage(G.messageLimitError,{limit:is}),{duration:4,hasCloseButton:!0});return}W()},[t,Y,C,b,W,a]);if(s&&o&&!i)return e.jsx(Oc,{onClose:()=>{l(!0)}});if(s&&pe){const _=()=>{q(!1)};return e.jsx(R,{isOpen:!0,onClose:_,type:"success",title:t.formatMessage(G.confirmCloseTitle),primaryButton:e.jsx(oe.Button,{title:t.formatMessage(G.confirmCloseOk),color:"danger",onClick:()=>{U(),_()}}),secondaryButton:e.jsx(oe.Button,{title:t.formatMessage(G.confirmCloseCancel),color:"secondary",onClick:_}),children:e.jsx("div",{className:"text-sm",children:e.jsx(n,{...G.confirmCloseBody})})},"confirm-close")}return e.jsxs(R,{isOpen:s,onClose:se,type:"success",size:"custom",className:"max-w-lg xl:max-w-xl",title:e.jsx(n,{...G.profileTitle}),children:[r?e.jsx("div",{className:"flex h-14 items-center justify-center",children:e.jsx(Re,{})}):e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto md:max-h-[calc(100vh-300px)]",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm font-semibold",children:e.jsx(n,{...G.customInstructionsTitle})}),e.jsx(Hn,{label:e.jsx(n,{...G.customInstructionsTooltip,values:{article:_=>e.jsx("a",{href:xn,target:"_blank",className:"underline",rel:"noreferrer",children:_})}})})]}),e.jsx("p",{className:"text-muted pb-3 pt-2 text-sm text-token-text-primary",children:e.jsx(n,{...G.aboutYouHelpText})}),e.jsx(_a,{className:"mb-3",onSubmit:P,disabled:!A,tip:e.jsx(Na,{children:e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{children:e.jsx(n,{...G.aboutUserTip1})}),e.jsx("li",{children:e.jsx(n,{...G.aboutUserTip2})}),e.jsx("li",{children:e.jsx(n,{...G.aboutUserTip3})}),e.jsx("li",{children:e.jsx(n,{...G.aboutUserTip4})}),e.jsx("li",{children:e.jsx(n,{...G.aboutUserTip5})})]})}),hasModError:L==="about_user_message",value:b??c,onChange:_=>h(O=>({aboutModelMessage:O.aboutModelMessage??g,aboutUserMessage:_.target.value,enabled:O.enabled??A,disabledTools:O.disabledTools??p}))}),e.jsx("p",{className:"text-muted py-3 text-sm text-token-text-primary",children:e.jsx(n,{...G.modelHelpText})}),e.jsx(_a,{onSubmit:P,disabled:!A,tip:e.jsx(Na,{children:e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{children:e.jsx(n,{...G.modelTip1})}),e.jsx("li",{children:e.jsx(n,{...G.modelTip2})}),e.jsx("li",{children:e.jsx(n,{...G.modelTip3})}),e.jsx("li",{children:e.jsx(n,{...G.modelTip4})})]})}),hasModError:L==="about_model_message",value:C??g,onChange:_=>h(O=>({aboutUserMessage:O.aboutUserMessage??c,aboutModelMessage:_.target.value,enabled:O.enabled??A,disabledTools:O.disabledTools??p}))}),e.jsx("div",{className:"my-6 h-px bg-token-border-light"}),e.jsx(Rc,{disabledTools:f.disabledTools??p??[],onDisabledToolsChanged:_=>h(O=>({aboutUserMessage:O.aboutUserMessage??c,aboutModelMessage:O.aboutModelMessage??g,enabled:O.enabled??A,disabledTools:_}))})]}),e.jsx("div",{className:"mt-4 md:mt-5",children:e.jsxs("div",{className:"flex flex-grow flex-col items-stretch justify-between gap-0 sm:flex-row sm:items-center sm:gap-3",children:[e.jsxs("label",{className:"mt-5 flex cursor-pointer flex-row justify-between gap-2 sm:mt-4",children:[e.jsx("div",{className:"self-center text-sm text-token-text-primary",children:e.jsx(n,{...G.chatPreferencesEnable})}),e.jsx(st,{enabled:A,onChange:_=>{h(O=>({aboutUserMessage:O.aboutUserMessage??c,aboutModelMessage:O.aboutModelMessage??g,enabled:_,disabledTools:O.disabledTools??p}))},label:A?t.formatMessage(G.disableToggleLabel):t.formatMessage(G.enableToggleLabel)})]}),e.jsx(oe.Actions,{secondaryButton:e.jsx(oe.Button,{onClick:se,children:e.jsx(n,{...G.cancel})}),primaryButton:e.jsx(oe.Button,{loading:S,onClick:P,color:"primary",visuallyDisabled:Y,disabled:!D,children:e.jsx(n,{...G.save})})})]})})]},"user-context")}const Na=({children:s})=>e.jsx("div",{className:"whitespace-pre-line",children:s}),is=1500,Ls=s=>s.length>is,_a=({disabled:s,onChange:t,onSubmit:a,placeholder:o,value:i,tip:l,hasModError:r,className:u})=>{const c=v(),g=d.useRef(null),p=Eo(),m=Po(),f=!p,[h,b]=d.useState(!1),[C,y]=d.useState(f),N=!f&&h&&!C,A=f&&!C,L=Ls(i),I=S=>{!s&&S.key==="Enter"&&S.metaKey&&!S.shiftKey&&!S.nativeEvent.isComposing&&(S.preventDefault(),a())},U=d.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsx(R,{isOpen:A,type:"success",size:"custom",className:"max-w-lg",title:c.formatMessage(G.tipsHeader),showCloseButton:!0,onClose:()=>{y(!0)},children:l}),e.jsxs(ki,{open:N,children:[e.jsxs("div",{className:u,ref:U,children:[e.jsx(wi,{asChild:!0,children:e.jsx("textarea",{ref:g,className:ts("w-full resize-none rounded bg-token-main-surface-primary p-4 placeholder:text-gray-300",{"border-orange-400 focus:border-orange-400":r,"border-red-500 focus:border-red-500":L&&!r,"focus-token-border-heavy border-token-border-light":!L&&!r,"opacity-30":s}),disabled:s,placeholder:o,onKeyDown:I,rows:p&&!m?6:5,value:i,onChange:t,onBlur:()=>{b(!1)},onFocus:()=>{b(!0)}})}),e.jsx("div",{className:ts("flex items-center justify-between px-1 text-xs tabular-nums",L?"text-red-600":"text-token-text-tertiary"),children:r?e.jsx("div",{className:"visible mt-2 text-left text-xs text-orange-400",children:e.jsx(n,{...G.modApiVoilation,values:{policyLink:S=>e.jsx("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:S}),feedbackLink:S=>e.jsx("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:S})}})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:`${i.length}/${is}`}),e.jsx("button",{className:"flex items-center gap-1",onClick:()=>{g.current?.focus(),y(!C)},tabIndex:-1,children:e.jsx(Ha,{initial:!1,children:h&&e.jsx(It.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:C?e.jsxs(e.Fragment,{children:[e.jsx(n,{...G.showTips}),e.jsx(Ei,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{...G.hideTips}),e.jsx(Ao,{className:"icon-xs"})]})},"show-hide")})})]})})]}),e.jsx(Pi,{container:U.current?.ownerDocument.body,children:e.jsx(Ai,{side:"right",align:"start",sideOffset:12,className:"popover relative z-50 max-w-[220px] animate-slideLeftAndFade select-none rounded-xl border border-token-border-light bg-token-main-surface-primary p-4 text-sm text-token-text-primary shadow-[0px_4px_14px_rgba(0,0,0,0.06)] xl:max-w-xs",onOpenAutoFocus:S=>{S.preventDefault()},onCloseAutoFocus:S=>{S.preventDefault()},children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("strong",{children:e.jsx(n,{...G.tipsHeader})}),l]})})})]})]})};function Hn({label:s,side:t="bottom"}){return e.jsx(ve,{sideOffset:4,interactive:!0,label:e.jsx("div",{children:s}),side:t,children:e.jsx(rn,{className:"h-4 w-4 text-token-text-tertiary"})})}function Rc({disabledTools:s,onDisabledToolsChanged:t}){d.useEffect(()=>{k.logEvent(w.userContextGpt4CapabilitiesShown)},[]);const o=Se()?.isEnterprisey()??!1,i=!sa(_s.BrowsingAvailable)&&o,l=p=>{const m=s.includes(p)?s.filter(f=>f!==p):[...s,p];t(m)},r=ot(),{value:u}=vs("2044826081"),c=!sa(_s.Canvas)&&o;var g;return r?.includes(_s.SearchTool)&&!r?.includes(_s.SearchToolHoldout)?g=e.jsx(Ns,{title:e.jsx(n,{id:"userContextModal.tools.web",defaultMessage:"Web Search"}),tooltipLabel:i?e.jsx(n,{id:"Osf0vy",defaultMessage:"Web Search is disabled by your organization"}):e.jsx(n,{id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Automatically search the web to get answers"}),tool:Oe.BROWSER,onClick:l,Icon:wt,checked:!s.includes(Oe.BROWSER)&&!i,disabled:i}):g=e.jsx(Ns,{title:e.jsx(n,{id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),tooltipLabel:i?e.jsx(n,{id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}):e.jsx(n,{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"}),tool:Oe.BROWSER,onClick:l,Icon:wt,checked:!s.includes(Oe.BROWSER)&&!i,disabled:i}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm font-semibold",children:e.jsx(n,{id:"userContextModal.gpt4CapabilitiesTitle",defaultMessage:"ChatGPT Capabilities"})}),e.jsx(Hn,{label:e.jsx(n,{id:"userContextModal.tools.capabilitiesInfo.1",defaultMessage:"Choose which tools can be used with GPT-4"}),side:"top"})]}),e.jsxs("div",{className:"mt-2 flex flex-col flex-wrap gap-3 md:flex-row",children:[g,e.jsx(Ns,{title:e.jsx(n,{id:"userContextModal.tools.dalle",defaultMessage:"DALL·E"}),tooltipLabel:e.jsx(n,{id:"userContextModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL·E"}),tool:Oe.DALLE,onClick:l,Icon:dl,checked:!s.includes(Oe.DALLE)}),e.jsx(Ns,{title:e.jsx(n,{id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),tooltipLabel:e.jsx(n,{id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}),tool:Oe.PYTHON,onClick:l,Icon:Ti,checked:!s.includes(Oe.PYTHON)}),u&&!c&&e.jsx(Ns,{title:e.jsx(n,{id:"FW2C7Y",defaultMessage:"Canvas"}),tooltipLabel:e.jsx(n,{id:"dP6U4B",defaultMessage:"Collaborate with ChatGPT on text and code"}),tool:Oe.CANMORE,onClick:l,Icon:Bt,checked:!s.includes(Oe.CANMORE)})]})]})}function Ns({tool:s,title:t,tooltipLabel:a,Icon:o,onClick:i,checked:l,disabled:r}){return e.jsx(ve,{className:"block",label:a,side:"top",sideOffset:4,children:e.jsxs("button",{className:ts("flex w-full items-center justify-between gap-2 whitespace-nowrap rounded border border-token-border-medium p-2",{"cursor-not-allowed text-token-text-quaternary":r}),onClick:()=>i(s),disabled:r,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4 text-token-text-tertiary"}),e.jsx("div",{className:"text-sm font-semibold",children:t})]}),e.jsx(cn,{id:s,checked:l&&!r,disabled:r})]})})}const G=V({tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom Instructions and how they’re used to help ChatGPT provide better responses."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area."},browser:{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL·E"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}});function Qs({children:s}){return e.jsxs("li",{children:["“",s,"”"]})}function Wc(){const[s,t]=d.useState(!1),a=v(),o=Ni(),{isLoading:i,data:l}=Gn(!0),r=Lt(),{data:u}=_i(void 0,!1,o),c=Li(),g=Ii(),p=Fi();return i?e.jsx("div",{className:"flex justify-center",children:e.jsx(Re,{})}):e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx(mn,{label:e.jsx(n,{...Ie.customInstructions}),stateLabel:l?.enabled?a.formatMessage(Ie.on):a.formatMessage(Ie.off),onClick:()=>Me.openModal(Ae.UserContext)})}),e.jsxs(B,{children:[e.jsx(Ds,{label:a.formatMessage(Ie.toggleLabel),enabled:o,onChange:m=>{r.mutate({setting:ys.Sunshine,value:m})},description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(n,{...Ie.exampleDescription1,values:{link:m=>e.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-in-chatgpt-faq",target:"_blank",className:"underline",rel:"noreferrer",children:m})}})}),e.jsx("p",{className:"mt-3",children:e.jsx(n,{...Ie.exampleDescription2})}),e.jsxs("ul",{className:"my-2 flex list-disc flex-col gap-1 pl-5",children:[e.jsx(Qs,{children:e.jsx(n,{...Ie.exampleMessage1})}),e.jsx(Qs,{children:e.jsx(n,{...Ie.exampleMessage2})}),e.jsx(Qs,{children:e.jsx(n,{...Ie.exampleMessage3})}),e.jsx(Qs,{children:e.jsx(n,{...Ie.exampleMessage4})})]})]})}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx(H,{onClick:()=>{t(!0),k.logEvent(w.memorySettingsManageClicked)},color:"secondary",children:e.jsx(n,{...Ie.manageMemoriesButton})}),e.jsx(ul,{memoryFullPct:u?.memoryFullPct}),s&&e.jsx(gl,{onClose:()=>t(!1)})]})]}),p&&e.jsx(B,{children:e.jsx(Ds,{label:a.formatMessage({id:"APWP2z",defaultMessage:"Enable memory in search"}),enabled:c,onChange:m=>{r.mutate({setting:ys.MemoryInSearch,value:m})},disabled:!g,description:e.jsx(n,{id:"nQ+QoN",defaultMessage:"To be more helpful in getting you more relevant responses, ChatGPT may share disassociated search queries based on past memories with third-party search providers. <link>Learn more</link>",values:{link:m=>e.jsx("a",{href:"https://help.openai.com/en/articles/9237897-chatgpt-search",target:"_blank",className:"underline",rel:"noreferrer",children:m})}})})}),e.jsx("span",{children:e.jsx(ml,{memoryName:"ChatGPT"})})]})}const Ie=V({toggleLabel:{id:"settingsModal.myChagtGptToggleLabel.2",defaultMessage:"Memory"},exampleDescription1:{id:"settingsModal.exampleDescription1.1",defaultMessage:"ChatGPT will become more helpful as you chat, picking up on details and preferences to tailor its responses to you. <link>Learn more</link>"},exampleDescription2:{id:"settingsModal.exampleDescription2.2",defaultMessage:"To understand what ChatGPT remembers or teach it something new, just chat with it:"},exampleMessage1:{id:"settingsModal.exampleMessage1.1",defaultMessage:"Remember that I like concise responses."},exampleMessage2:{id:"settingsModal.exampleMessage2.1",defaultMessage:"I just got a puppy!"},exampleMessage3:{id:"settingsModal.exampleMessage3.2",defaultMessage:"What do you remember about me?"},exampleMessage4:{id:"settingsModal.exampleMessage4",defaultMessage:"Where did we leave off on my last project?"},reset:{id:"settingsModal.reset",defaultMessage:"Reset memories"},resetModalTitle:{id:"settingsModal.resetModalTitle",defaultMessage:"Are you sure?"},resetModalDescription:{id:"settingsModal.resetModalDescription",defaultMessage:"Your GPT will forget what it has learned from your previous chats. This can't be undone."},resetModalConfirm:{id:"settingsModal.resetModalConfirm",defaultMessage:"Confirm reset"},resetModalCancel:{id:"settingsModal.resetModalCancel",defaultMessage:"Cancel"},resetSuccessful:{id:"settingsModal.resetSuccessful",defaultMessage:"Your GPT's memory has been reset."},resetFailed:{id:"settingsModal.resetFailed",defaultMessage:"Failed to reset your GPT's memory."},on:{id:"personalizationSettings.on",defaultMessage:"On"},off:{id:"personalizationSettings.off",defaultMessage:"Off"},customInstructions:{id:"personalizationSettings.customInstructions",defaultMessage:"Custom instructions"},manageMemoriesButton:{id:"personalizationSettings.manageMemoriesButton",defaultMessage:"Manage"}}),Yt=["sharedConversations"],xe=V({name:{id:"sharedConversationModal.name",defaultMessage:"Name"},dateShared:{id:"sharedConversationModal.dateShared",defaultMessage:"Date shared"},loading:{id:"sharedConversationModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"sharedConversationModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"sharedConversationModal.retry",defaultMessage:"Retry"},noSharedConversations:{id:"sharedConversationModal.noSharedConversations",defaultMessage:"You have no shared links."},title:{id:"sharedConversationModal.title",defaultMessage:"Shared Links"},goToOriginConversation:{id:"sharedConversationModal.goToOriginConversation",defaultMessage:"View source chat"},deleteSharedLink:{id:"sharedConversationModal.deleteSharedLink",defaultMessage:"Delete shared link"},deleteSharedLinkFailed:{id:"sharedConversationModal.deleteSharedLinkFailed",defaultMessage:"Deleting shared link failed"},deleteAllSharedLinks:{id:"sharedConversationModal.deleteSharedAllConversations",defaultMessage:"Delete all shared links"},deleteAllSharedLinksConfirm:{id:"sharedConversationModal.deleteSharedAllConversationsConfirm",defaultMessage:"Are you sure you want to delete all your shared links?"},deleteAllSharedLinksFailed:{id:"sharedConversationModal.deleteSharedAllConversationsFailed",defaultMessage:"Deleting shared links failed"}});function Gc(){const s=Ye(),t=v(),a=X(),{mutate:o}=cs({mutationFn:()=>F.deleteAllSharedConversations(),onSettled:()=>{s.invalidateQueries({queryKey:Yt})},onError:()=>{a.danger(t.formatMessage(xe.deleteAllSharedLinksFailed))}});return e.jsx(Oa,{side:"bottom",sideOffset:4,triggerButton:e.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-secondary radix-state-open:text-token-text-tertiary dark:radix-state-open:text-gray-400",children:e.jsx(Di,{className:"icon-sm"})}),children:e.jsx(bs.Item,{onClick:()=>{window.confirm(t.formatMessage(xe.deleteAllSharedLinksConfirm))&&o()},color:"danger",children:e.jsx(n,{...xe.deleteAllSharedLinks})})})}function Hc(){return F.getSharedConversations()}function Vc(){return Ne({queryKey:Yt,queryFn:Hc,refetchOnMount:"always"})}function Kc({sharedConversation:s}){const t=v(),a=X(),o=Ye(),{mutate:i,isPending:l}=cs({mutationFn:async({sharedConversationId:u})=>F.deleteShareLink({share_id:u}),onSettled:()=>{o.invalidateQueries({queryKey:Yt})},onError:()=>{a.danger(t.formatMessage(xe.deleteSharedLinkFailed))}}),r=s.workspace_id!=null?`/share/e/${s.id}`:`/share/${s.id}`;return e.jsxs(ee.Row,{disabled:l,children:[e.jsx(ee.Cell,{children:e.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",children:[e.jsx(pl,{className:"icon-sm flex-shrink-0"}),s.title]})}),e.jsx(ee.Cell,{children:s.create_time!=null?e.jsx(_t,{value:s.create_time,month:"long",year:"numeric",day:"numeric"}):null}),e.jsx(ee.Cell,{textAlign:"right",children:e.jsxs(ee.Actions,{children:[e.jsx(ve,{label:t.formatMessage(xe.goToOriginConversation),sideOffset:4,side:"top",children:e.jsx("a",{href:Oi(s.conversation_id),target:"_blank",rel:"noreferrer","aria-label":t.formatMessage(xe.goToOriginConversation),className:"cursor-pointer text-token-text-tertiary hover:text-token-text-secondary",children:e.jsx(dn,{className:"icon-sm"})})}),e.jsx(ve,{label:t.formatMessage(xe.deleteSharedLink),sideOffset:4,side:"top",children:e.jsx("button",{onClick:()=>{i({sharedConversationId:s.id})},"aria-label":t.formatMessage(xe.deleteSharedLink),className:"text-token-text-tertiary hover:text-token-text-secondary",children:e.jsx(un,{className:"icon-sm"})})})]})})]})}function Yc({onClose:s}){const{data:t,isLoading:a,isError:o,refetch:i}=Vc(),l=v();let r;return a?r=e.jsx("div",{className:"pb-8 text-token-text-secondary",children:e.jsx(n,{...xe.loading})}):o?r=e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 text-red-500",children:e.jsx(n,{...xe.somethingWentWrong})}),e.jsx("div",{children:e.jsx(H,{color:"secondary",onClick:()=>{i()},children:e.jsx(n,{...xe.retry})})})]}):t?.total===0?r=e.jsx("div",{className:"pb-8 text-token-text-tertiary",children:e.jsx(n,{...xe.noSharedConversations})}):r=e.jsxs(ee.Root,{className:"max-h-[28rem]",size:"compact",children:[e.jsxs(ee.Header,{children:[e.jsx(ee.HeaderCell,{children:e.jsx(n,{...xe.name})}),e.jsx(ee.HeaderCell,{children:e.jsx(n,{...xe.dateShared})}),e.jsx(ee.HeaderCell,{textAlign:"right",children:e.jsx(Gc,{})})]}),e.jsx(ee.Body,{children:t?.items.map(u=>e.jsx(Kc,{sharedConversation:u},u.id))})]}),e.jsx(R,{isOpen:!0,onClose:s,size:"custom",className:"max-w-5xl",type:"success",title:l.formatMessage(xe.title),showCloseButton:!0,children:r})}const Vn="https://help.openai.com/en/articles/5722486";function zc(){const s=Se(),{data:t}=Ne({queryKey:["data-usage-for-training",s?.accountUserId],queryFn:()=>F.getDataUsageForTraining(),enabled:s!=null});return t?.data_usage_for_training}function $c(){const s=v(),t=Is(Zs.isBusinessWorkspace),[a,o]=d.useState(!1),i=Is(Zs.isTeamPlan),l=Is(Zs.isEduPlan),{data:r}=Ra(ys.TrainingAllowed),u=Lt(),c=zc(),g=c==="disallowed"?!1:!!r;return e.jsxs(B,{children:[e.jsx(mn,{onClick:()=>o(!0),label:s.formatMessage(x.chatTrainingAllowedToggleLabel),stateLabel:g?s.formatMessage({id:"settingsModal.trainingEnabled",defaultMessage:"On"}):s.formatMessage({id:"settingsModal.trainingDisabled",defaultMessage:"Off"}),testId:"improve-model-open-modal-button"}),a&&e.jsx(R,{isOpen:!0,onClose:()=>o(!1),title:s.formatMessage({id:"settingsModal.trainingToggleModalTitle",defaultMessage:"Model improvement"}),type:"success",secondaryButton:e.jsx(H,{color:"secondary",onClick:()=>o(!1),"data-testid":"improve-model-done-button",children:e.jsx(n,{id:"settingsModal.trainingToggleModalDoneButton",defaultMessage:"Done"})}),children:e.jsx(Ds,{label:s.formatMessage(x.chatTrainingAllowedToggleLabel),disabled:c==="disallowed",enabled:g,onChange:p=>{u.mutate({setting:ys.TrainingAllowed,value:p})},toggleTooltip:t?e.jsx(n,{...i?x.chatTrainingTeamsTooltip:l?x.chatTrainingEduTooltip:x.chatTrainingEnterpriseTooltip}):null,description:e.jsx(n,{...x.trainingAllowedDescription,values:{link:p=>e.jsx("a",{href:Vn,target:"_blank",className:"underline",rel:"noreferrer",children:p})}}),testId:"improve-model-toggle"})})]})}const qc=()=>{const s=v(),t=X(),a=At(),{pathname:o}=Va(),i=Ss(),{closeSettings:l,currentTab:r,openSettings:u}=Us(),[c,g]=d.useState(!1),[p,m]=d.useState(!1),[f,h]=d.useState(!1),[b,C]=d.useState(!1),[y,N]=d.useState(!1),[A,L]=d.useState(!1),[I,U]=d.useState(!1),[S,$]=d.useState(!1),[pe,q]=d.useState(!1),Y=Yr(),D=hc(),{setupMfa:se,removeMfa:W}=vc({useNativeProvider:D.use_native_mfa,auth0UserExists:D.auth0_user_exists}),P=D.status,_=D.otherProvidersWithoutMfa&&D.otherProvidersWithoutMfa.length>0,{session:O}=it(),ce=O?.user,fe=ce?.idp,Q=(fe?Ot[fe]:void 0)??e.jsx(n,{id:"confirmEnableMfaForByPassModal.yourAccount",defaultMessage:"your current account"}),j=Se(),be=j?.features,_e=Is(Zs.isBusinessWorkspace),Ce=ln(),{connectorConfig:Z}=nn(),ze=Z.has(J.CONFLUENCE)&&!Ce,ie=Z.has(J.GDRIVE)&&!Ce,Le=Z.has(J.JIRA)&&!Ce,as=Z.has(J.NOTION_OPEN_CONNECTOR)&&!Ce,ds=(Z.has(J.O365_PERSONAL)||Z.has(J.O365_BUSINESS))&&!Ce,us=Z.has(J.SLACK_OPEN_CONNECTOR)&&!Ce,ws=ze||ie||Le||as||ds||us,{clientApplications:$e}=Ui(),We=$e!=null&&$e.length>0||ws,qe=Bi(_s.WorkspaceShareLinks),Ps=et(Ae.CookieManagement),{data:Qe}=Ra(ys.ShowExpandedCodeView),Rs=Qe===void 0,[pt,As]=d.useState(Rs?!1:Qe),Ze=Lt(),Ge=pn(),Kn=j?.isTeam(),{data:Yn}=Ia(),zn=Yn?.accountItems.some(Xe=>Xe.isPersonalAccount()),$n=ce?.email&&be?.includes(Ba)&&(P===de.LOADING||P===de.DISABLED)||P===de.ENABLED,ft=ac(),zt=j&&j.hasPaidSubscription()&&!j.isWorkspacePlan(),[$t,qt]=d.useState(!1),[Qt,Zt]=d.useState(!1);d.useEffect(()=>{Qe!==void 0&&As(Qe)},[Qe]);const qn=d.useCallback(()=>{g(!1)},[]),Qn=d.useCallback(()=>{m(!1)},[]),Zn=d.useCallback(()=>{C(!1)},[]),Xn=d.useCallback(()=>{g(!0)},[]),Jn=d.useCallback(()=>{m(!0)},[]),eo=d.useCallback(()=>{h(!0)},[]),so=d.useCallback(()=>{C(!0)},[]),to=d.useCallback(()=>{q(!0)},[]),ao=d.useCallback(()=>{qt(!0)},[]),no=d.useCallback(()=>{Zt(!0)},[]),oo=d.useCallback(()=>{$(!0),F.logoutAll().then(()=>{t.success(s.formatMessage(x.logoutAllSuccess),{testId:"logout-all-success-toaster"}),Xs()}).catch(Xe=>{Be.addError(new Error("Failed logging out all accounts: ",{cause:Xe})),t.danger(s.formatMessage(x.logoutAllFailed),{hasCloseButton:!0}),$(!1)})},[s,t]),ht=Ye(),io=()=>{F.deleteConversations().then(()=>{ia(ht)}),o!=="/"&&i("/",{replace:!0})},lo=()=>{F.archiveConversations().then(()=>{t.info(s.formatMessage(x.archiveHistorySuccess)),ia(ht)}),o!=="/"&&i("/",{replace:!0})},ro=D.status!==de.LOADING,{native_default_factor_id:Xt,use_native_mfa:co}=D,uo=()=>{if(D.status!==de.ENABLED)throw new Error("MFA is not enabled");if(co){if(!Xt)throw new Error("No factor ID found");return F.disableNativeMFA(Xt)}else return F.disableMfa()},go=()=>{uo().then(()=>{ht.invalidateQueries({queryKey:["mfaInfo"]}),i(jt(vt.DISABLE_MFA_SUCCESS,"/#settings/Security"))}).catch(()=>{i(jt(vt.DISABLE_MFA_TIMEOUT,"/#settings/Security"))})};Nt("730601627");const{value:mo}=vs("3325813340");return c?e.jsx(sd,{onClose:qn}):p?e.jsx(Jc,{onClose:Qn,onDeleteHistory:io}):f?e.jsx(ed,{onClose:()=>h(!1),onArchiveHistory:lo}):b?e.jsx(td,{onClose:Zn}):y?e.jsx(Yc,{onClose:()=>{N(!1)}}):pe?e.jsx(qr,{mfaInfo:D,onCancel:()=>{q(!1)},onEnableMFA:se}):Y?ro?e.jsx(zr,{onClose:()=>i("/",{replace:!0}),onConfirm:go}):null:A?e.jsx(Ri,{onClose:()=>{L(!1)},fromSettings:!0}):I?e.jsx(Fc,{onClose:()=>{U(!1)}}):Ps?null:$t&&j?e.jsx(Kr,{isOpen:$t,onClose:()=>qt(!1)}):Qt&&j?e.jsx(Kt,{isOpen:Qt,onClose:()=>Zt(!1),accountId:j.id,initialPlanType:j.data.subscriptionStatus.planType,updatedPlanType:j.data.subscriptionStatus.planType,billingDetails:Wi}):e.jsx(R,{isOpen:!0,onClose:l,size:"custom",className:"md:max-w-[680px]",type:"success",title:s.formatMessage(x.settings),showCloseButton:!0,noPadding:!0,children:e.jsxs(Gi,{className:"flex flex-col gap-6 md:flex-row",defaultValue:r,orientation:a?"vertical":void 0,onValueChange:Xe=>{u(Xe)},children:[e.jsxs(Hi,{className:ts("m-2 md:m-0 md:px-4 md:pl-6 md:pt-4","flex flex-shrink-0 flex-wrap md:ml-[-8px] md:min-w-[180px]",a?"max-w-[200px] flex-col gap-2":"flex-row overflow-x-auto rounded-lg bg-token-main-surface-secondary"),children:[e.jsx(Ke,{value:ae.General,icon:e.jsx(Vi,{className:"icon-sm"}),label:e.jsx(n,{...x.generalTab})}),mo&&e.jsx(Vr,{}),ft&&e.jsx(Ke,{value:ae.DesktopApp,icon:e.jsx(Ki,{className:"icon-sm"}),label:e.jsx(n,{...x.desktopAppTab}),testId:"desktop-app-tab"}),Ge&&e.jsx(Ke,{value:ae.Personalization,icon:e.jsx(Hr,{className:"icon-sm"}),label:e.jsx(n,{...x.personalizationTab}),testId:"personalization-tab"}),e.jsx(ra.Trigger,{}),e.jsx(Ke,{value:ae.DataControls,icon:e.jsx(To,{className:"icon-sm"}),label:e.jsx(n,{...x.dataControlsTab}),testId:"data-controls-tab"}),j?.canInteractWithGizmos()&&e.jsx(Ke,{value:ae.BuilderProfile,icon:e.jsx(il,{className:"icon-sm"}),label:e.jsx(Nc,{})}),We&&e.jsx(Ke,{value:ae.ConnectorSettings,icon:e.jsx(Yi,{className:"icon-sm"}),label:e.jsx(n,{...x.connectorsTab})}),e.jsx(Ke,{value:ae.Security,icon:e.jsx(nl,{className:"icon-sm"}),label:e.jsx(n,{...x.securityTab}),testId:"security-tab"}),zt&&e.jsx(Ke,{value:ae.Subscription,icon:e.jsx(Gr,{className:"icon-sm"}),label:e.jsx(n,{...x.subscriptionTab}),testId:"subscription-tab"})]}),e.jsxs(He,{value:ae.General,children:[!ft&&e.jsx(B,{children:e.jsx(In,{})}),!1,e.jsx(B,{children:e.jsx(Ds,{label:s.formatMessage(x.alwaysExpandCodeOutput),enabled:pt,isLoading:Rs,onChange:Xe=>{Ze.mutate({setting:ys.ShowExpandedCodeView,value:Xe}),As(Xe)}})}),e.jsx(B,{children:e.jsx(Zc,{})}),e.jsx(B,{children:e.jsx(Ee,{label:s.formatMessage(x.archivedConversations),buttonLabel:s.formatMessage(x.manageButton),onClick:()=>{U(!0)},testId:"manage-archived-conversations-button"})}),e.jsx(B,{children:e.jsx(Ee,{label:s.formatMessage(x.archiveChatsLabel),buttonLabel:s.formatMessage(x.archiveChatsButton),onClick:eo,testId:"archive-all-chats-button"})}),e.jsx(B,{children:e.jsx(Ee,{color:"danger",label:s.formatMessage(x.deleteChatLabel),buttonLabel:s.formatMessage(x.deleteChatButton),onClick:Jn,testId:"delete-all-chats-button"})}),e.jsx(B,{children:e.jsx(Ee,{label:s.formatMessage(x.logOutLabel),buttonLabel:s.formatMessage(x.logOutButton),onClick:()=>Xs(),testId:"logout-button"})})]}),!1,ft&&e.jsx(He,{value:ae.DesktopApp,children:e.jsx(nc,{})}),!_e&&e.jsx(He,{value:ae.BetaFeatures,children:e.jsx(Qc,{})}),e.jsxs(He,{value:ae.DataControls,children:[e.jsx($c,{}),qe&&e.jsx(B,{children:e.jsx(Ee,{label:s.formatMessage(x.sharedConversations),buttonLabel:s.formatMessage(x.manageButton),onClick:()=>{N(!0)},testId:"manage-shared-conversations-button"})}),Kn&&zn&&e.jsx(B,{children:e.jsx(Ee,{label:s.formatMessage(x.mergePersonalData),buttonLabel:s.formatMessage(x.mergeButton),onClick:()=>{L(!0)}})}),!_e&&e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsx(Ee,{label:s.formatMessage(x.exportData),buttonLabel:s.formatMessage(x.exportButton),onClick:Xn,testId:"export-data-button"})}),e.jsx(B,{children:e.jsx(Ee,{label:s.formatMessage(x.deleteAccount),buttonLabel:s.formatMessage(x.deleteAccountButton),color:"danger",onClick:so,testId:"delete-account-button"})})]})]}),Ge&&e.jsx(He,{value:ae.Personalization,children:e.jsx(Wc,{})}),e.jsx(He,{value:ae.BuilderProfile,children:e.jsx(Ec,{})}),We&&e.jsx(He,{value:ae.ConnectorSettings,children:e.jsx(Ur,{clientApplications:$e,isConfluenceEnabled:ze,isGdriveEnabled:ie,isJiraEnabled:Le,isNotionOpenConnectorEnabled:as,isO365Enabled:ds,isSlackOpenEnabled:us})}),e.jsx(ra.Content,{}),e.jsxs(He,{value:ae.Security,children:[$n&&e.jsx(B,{children:e.jsx(Ee,{label:e.jsxs(e.Fragment,{children:[e.jsx(n,{id:"settingsModal.toggleMfa",defaultMessage:"Multi-factor authentication"}),P===de.ENABLED&&e.jsx("span",{className:"mx-1.5 rounded bg-green-50 px-1 py-0.5 text-xs font-semibold text-green-700",children:e.jsx(n,{id:"settingsModal.mfaEnabled",defaultMessage:"Enabled"})})]}),disabled:P===de.LOADING,buttonLabel:e.jsxs(e.Fragment,{children:[P===de.LOADING&&e.jsx(n,{id:"settingsModal.loadingMfa",defaultMessage:"Loading..."}),P===de.ENABLED&&e.jsx(n,{id:"settingsModal.disable",defaultMessage:"Disable"}),P===de.DISABLED&&e.jsx(n,{id:"settingsModal.enable",defaultMessage:"Enable"})]}),onClick:()=>{P===de.ENABLED?W():P===de.DISABLED&&_?to():P===de.DISABLED&&se()},description:e.jsxs(e.Fragment,{children:[P===de.DISABLED&&e.jsx(n,{id:"settingsModal.toggleMfaDescriptionDisabled",defaultMessage:"Require an extra security challenge when logging in. If you are unable to pass this challenge, you will have the option to recover your account via email."}),P===de.ENABLED&&e.jsxs(e.Fragment,{children:[e.jsx(n,{id:"settingsModal.toggleMfaDescriptionEnabled",defaultMessage:"You'll only be able to log in using {currentIdp} while this is on.",values:{currentIdp:Q}})," ",e.jsx("a",{className:"underline",target:"_blank",rel:"noreferrer",href:rl,children:e.jsx(n,{id:"settingsModal.toggleMfaDescriptionLearnMore",defaultMessage:"Learn more"})}),"."]})]})})}),e.jsx(B,{children:e.jsx(Ee,{label:e.jsx(n,{id:"settingsModal.logoutAllLabel",defaultMessage:"Log out of all devices"}),buttonLabel:e.jsx("div",{style:{whiteSpace:"nowrap"},children:e.jsx(n,{id:"settingsModal.logoutAllButton",defaultMessage:"Log out all"})}),description:e.jsx(n,{id:"settingsModal.logoutAllDescription",defaultMessage:"Log out of all active sessions across all devices, including your current session. It may take up to 30 minutes for other devices to be logged out."}),onClick:()=>{k.logLogOutButtonClicked({location:"settings_modal_log_out_all"}),oo()},disabled:S,testId:"logout-all-button"})})]}),zt&&e.jsx(He,{value:ae.Subscription,children:e.jsx(rr,{currentAccount:j,onCancelSubscriptionClick:ao,onRenewSubscriptionClick:no})})]})})};function Qc(){return e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsx("p",{children:e.jsx(n,{...x.betaIntro})})})})}function Zc(){const{localeList:s,localPreferenceLocale:t,setLocale:a,suggestedLocale:o,currentLocale:i,unsanitizedBrowserLocale:l}=Ua(),r=[...new Set([t,o])].filter(c=>c!=null),u=s.filter(c=>!r.includes(c));return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(n,{...x.locale})}),e.jsxs(ne.Root,{value:t??"auto",onValueChange:c=>{k.logEvent(w.localeUpdatedByUser,{from_locale:i,to_locale:c,raw_browser_locale:l??"",suggested_locale:o??""}),te.logEvent("chatgpt_locale_updated_by_user",c,{from_locale:i,to_locale:c,raw_browser_locale:l??"",suggested_locale:o??""}),a(c==="auto"?null:c)},children:[e.jsxs(ne.Trigger,{children:[e.jsx(ne.Value,{}),e.jsx(ne.Icon,{})]}),e.jsx(ne.Portal,{children:e.jsxs(ne.Content,{side:void 0,sideOffset:void 0,position:"item-aligned",children:[e.jsx(ne.Item,{value:"auto",children:e.jsx(n,{...x.localeAuto})}),r.map(c=>e.jsx(ne.Item,{value:c,children:ta[c]??c},c)),e.jsx(ne.Separator,{}),u.map(c=>e.jsx(ne.Item,{value:c,children:ta[c]??c},c))]})})]})]})}function Xc(){const s=v(),t=No(),{closeSettings:a}=Us();return d.useEffect(()=>{te.logEvent("chatgpt_unauthenticated_settings_modal_shown"),k.logEvent(w.unauthSettingsModal)},[]),e.jsx(R,{isOpen:!0,onClose:a,type:"success",showCloseButton:!0,title:s.formatMessage(x.settings),children:e.jsx(B,{children:e.jsx(Ds,{label:s.formatMessage({id:"settingsModal.unauthChatTrainingToggleLabel",defaultMessage:"Improve the model for everyone"}),enabled:t,onChange:o=>{_o.setIsNoAuthChatTrainingEnabled(o),k.logEvent(w.noAuthChatTrainingToggled,{isEnabled:o})},description:e.jsx(n,{id:"rtxsI1",defaultMessage:"Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>.",values:{link:o=>e.jsx("a",{href:Vn,target:"_blank",className:"underline",rel:"noreferrer",children:o})}})})})})}function Jc({onClose:s,onDeleteHistory:t}){const a=v(),o=pn();return e.jsx(R,{isOpen:!0,onClose:s,type:"success",title:a.formatMessage(x.deleteHistoryModalTitle),description:o&&e.jsx(n,{id:"settingsModal.deleteHistoryModalMemoryDisclaimer",defaultMessage:"To clear any memories from your chats, visit your <link>settings</link>.",values:{link:i=>e.jsx(K,{onClick:()=>s(),to:"#settings/Personalization",className:"underline",children:i})}}),primaryButton:e.jsx(oe.Button,{title:a.formatMessage(x.deleteHistoryModalConfirm),color:"danger",onClick:()=>{t(),s()},"data-testid":"confirm-delete-all-chats-button"}),secondaryButton:e.jsx(oe.Button,{title:a.formatMessage(x.deleteHistoryModalCancel),color:"secondary",onClick:s})})}function ed({onClose:s,onArchiveHistory:t}){const a=v();return e.jsx(R,{isOpen:!0,onClose:s,type:"success",title:a.formatMessage(x.archiveHistoryModalTitle),primaryButton:e.jsx(oe.Button,{title:a.formatMessage(x.archiveHistoryModalConfirm),color:"primary",onClick:()=>{t(),s()}}),secondaryButton:e.jsx(oe.Button,{title:a.formatMessage(x.archiveHistoryModalCancel),color:"secondary",onClick:s})})}function sd({onClose:s}){const t=v(),a=X(),o=d.useCallback(()=>{try{F.submitDataExport().then(()=>{a.success(t.formatMessage(x.dataExportRequested),{testId:"data-export-success-toaster"}),s()})}catch{a.warning(t.formatMessage(x.dataExportFailed),{hasCloseButton:!0})}},[t,a,s]);return e.jsx(R,{isOpen:!0,onClose:s,type:"success",title:t.formatMessage(x.dataExportModalTitle),primaryButton:e.jsx(oe.Button,{title:t.formatMessage(x.dataExportModalConfirm),color:"primary",onClick:o,"data-testid":"confirm-data-export-button"}),secondaryButton:e.jsx(oe.Button,{title:t.formatMessage(x.dataExportModalCancel),color:"secondary",onClick:s}),children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("ul",{className:"my-3 flex list-disc flex-col gap-1 pl-3",children:[e.jsx("li",{children:e.jsx(n,{...x.dataExportModalDescription1})}),e.jsx("li",{children:e.jsx(n,{...x.dataExportModalDescription2})}),e.jsx("li",{children:e.jsx(n,{...x.dataExportModalDescription3})}),e.jsx("li",{children:e.jsx(n,{...x.dataExportModalDescription4})})]}),e.jsx("div",{children:e.jsx(n,{...x.dataExportModalDescription5})})]})})}function td({onClose:s}){const t=v(),a=X(),{session:o}=it(),l=Ft()?.email,[r,u]=d.useState(""),[c,g]=d.useState(""),p=d.useCallback(()=>{const N=o?.user?.iat;return N===void 0||Date.now()/1e3-N<600},[o]),m=d.useCallback(()=>{try{p()?F.deactivateAccount().then(()=>{Xs()}):a.warning(t.formatMessage(x.deleteAccountSessionTooOld),{hasCloseButton:!0})}catch{a.warning(t.formatMessage(x.deleteAccountFailed),{hasCloseButton:!0})}},[t,a,p]),f=d.useCallback(()=>{Xs()},[]),h=c==="DELETE"&&(l===void 0||r.toLowerCase()===l.toLowerCase()),[b]=d.useState(()=>p()),C=zi();return e.jsx(R,{isOpen:!0,onClose:s,type:"success",title:t.formatMessage(x.deleteAccountTitle),showCloseButton:!0,children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("ul",{className:"mb-6 mt-4 flex list-disc flex-col gap-1 pl-3",children:[e.jsx("li",{children:e.jsx(n,{...x.deleteAccountWarning})}),e.jsx("li",{children:e.jsx(n,{...x.apiAccessDeletionWarning})}),e.jsx("li",{children:e.jsx(n,{...x.reuseEmailPhoneWarning})}),e.jsx("li",{children:e.jsx(n,{...x.dataRemovalWarning})}),C?.purchase_origin_platform===ge.MOBILE_IOS&&e.jsx("li",{children:e.jsx(n,{...x.iapSubscriptionWarning})}),C?.purchase_origin_platform===ge.MOBILE_ANDROID&&e.jsx("li",{children:e.jsx(n,{...x.playStoreSubscriptionWarning})}),e.jsx("li",{children:e.jsx(n,{...x.deleteHelpCenter,values:{article:y=>e.jsx("a",{href:"https://help.openai.com/en/articles/6378407-how-to-delete-your-account",target:"_blank",className:"underline",rel:"noopener noreferrer",children:y})}})})]}),b?e.jsxs(e.Fragment,{children:[l!==void 0?e.jsxs("div",{className:"mb-4",children:[e.jsx(La,{htmlFor:"email",children:e.jsx(n,{...x.typeEmailLabel})}),e.jsx(js,{ariaLabel:!1,value:r,placeholder:l,name:"email",onChange:y=>{u(y.target.value)}})]}):null,e.jsxs("div",{className:"mb-4",children:[e.jsx(La,{htmlFor:"delete",children:e.jsx(n,{...x.typeDeleteInputLabel})}),e.jsx(js,{ariaLabel:!1,value:c,onChange:y=>{g(y.target.value)},name:"delete",className:"mb-4"})]}),e.jsx(H,{color:h?"danger":"disabled",onClick:m,disabled:!h,fullWidth:!0,icon:h?Da:$i,children:h?e.jsx(n,{...x.deleteAccountButtonLabel}):e.jsx(n,{...x.lockedButtonLabel})})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"pb-4 text-xs text-token-text-tertiary",children:e.jsx(n,{...x.recentLoginMessage})}),e.jsx(H,{color:"primary",onClick:f,fullWidth:!0,children:e.jsx(n,{...x.refreshLoginButtonLabel})})]})]})})}const La=ke.label`block text-sm font-semibold mb-1`,x=V({settings:{id:"settingsModal.settings",defaultMessage:"Settings"},locale:{id:"settingsModal.locale_alpha",defaultMessage:"Language"},localeAuto:{id:"settingsModal.localeAuto",defaultMessage:"Auto-detect"},archivedConversations:{id:"settingsModal.archivedConversations",defaultMessage:"Archived chats"},sharedConversations:{id:"settingsModal.sharedConversations",defaultMessage:"Shared links"},manageButton:{id:"settingsModal.manageButton",defaultMessage:"Manage"},mergePersonalData:{id:"settingsModal.mergePersonalData",defaultMessage:"Merge data from your personal workspace"},mergeButton:{id:"settingsModal.mergeButton",defaultMessage:"Merge"},cookieManagement:{id:"settingsModal.cookieManagement",defaultMessage:"Cookie preferences"},cookieManagementButton:{id:"settingsModal.cookieManagementButton",defaultMessage:"Manage"},exportData:{id:"settingsModal.exportData",defaultMessage:"Export data"},exportButton:{id:"settingsModal.exportButton",defaultMessage:"Export"},deleteAccount:{id:"settingsModal.deleteAccount",defaultMessage:"Delete account"},deleteAccountButton:{id:"settingsModal.deleteButton",defaultMessage:"Delete"},alwaysExpandCodeOutput:{id:"settingsModal.alwaysShowDataAnalystOutput",defaultMessage:"Always show code when using data analyst"},trainingAllowedDescription:{id:"Qalmv5",defaultMessage:"Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>"},deleteHistoryModalTitle:{id:"settingsModal.deleteHistoryModalTitle",defaultMessage:"Clear your chat history - are you sure?"},deleteHistoryModalConfirm:{id:"settingsModal.deleteHistoryModalConfirm",defaultMessage:"Confirm deletion"},deleteHistoryModalCancel:{id:"settingsModal.deleteHistoryModalCancel",defaultMessage:"Cancel"},archiveHistoryModalTitle:{id:"settingsModal.archiveHistoryModalTitle",defaultMessage:"Archive your chat history - are you sure?"},archiveHistoryModalConfirm:{id:"settingsModal.archiveHistoryModalConfirm",defaultMessage:"Confirm archive"},archiveHistoryModalCancel:{id:"settingsModal.archiveHistoryModalCancel",defaultMessage:"Cancel"},archiveHistorySuccess:{id:"settingsModal.archiveHistorySuccess",defaultMessage:"Successfully archived chats. You can view your archived chats in Settings."},dataExportRequested:{id:"settingsModal.dataExportRequested",defaultMessage:"Successfully exported data. You should receive an email shortly with your data."},dataExportFailed:{id:"settingsModal.dataExportFailed",defaultMessage:"We were unable to process your export at this time. Please try again later."},dataExportModalTitle:{id:"settingsModal.dataExportModalTitle",defaultMessage:"Request data export - are you sure?"},dataExportModalConfirm:{id:"settingsModal.dataExportModalConfirm",defaultMessage:"Confirm export"},dataExportModalCancel:{id:"settingsModal.dataExportModalCancel",defaultMessage:"Cancel"},dataExportModalDescription1:{id:"settingsModal.dataExportModalDescription1",defaultMessage:"Your account details and chats will be included in the export."},dataExportModalDescription2:{id:"settingsModal.dataExportModalDescription2",defaultMessage:"The data will be sent to your registered email in a downloadable file."},dataExportModalDescription3:{id:"settingsModal.dataExportModalDescription3",defaultMessage:"The download link will expire 24 hours after you receive it."},dataExportModalDescription4:{id:"settingsModal.dataExportModalDescription4",defaultMessage:"Processing may take some time. You'll be notified when it's ready."},dataExportModalDescription5:{id:"settingsModal.dataExportModalDescription5",defaultMessage:'To proceed, click "Confirm export" below.'},deleteAccountSessionTooOld:{id:"settingsModal.deleteAccountSessionTooOld",defaultMessage:"Your login session is too old. Please log in again before deleting your account."},deleteAccountFailed:{id:"settingsModal.deleteAccountFailed",defaultMessage:"Failed to delete account. Please try again later."},deleteAccountTitle:{id:"settingsModal.deleteAccountTitle",defaultMessage:"Delete account - are you sure?"},deleteAccountWarning:{id:"settingsModal.deleteAccountWarning",defaultMessage:"Deleting your account is permanent and cannot be undone."},reuseEmailPhoneWarning:{id:"settingsModal.reuseEmailPhoneWarning-2",defaultMessage:"You cannot create a new account using the same email address."},dataRemovalWarning:{id:"settingsModal.dataRemovalWarning-2",defaultMessage:"Your data will be deleted within 30 days, except we may retain a limited set of data for longer where required or permitted by law."},apiAccessDeletionWarning:{id:"settingsModal.apiAccessDeletionWarning-2",defaultMessage:"Deletion will prevent you from accessing OpenAI services, including ChatGPT, API, and DALL·E."},deleteHelpCenter:{id:"settingsModal.deleteHelpCenter",defaultMessage:"Read our <article>help center article</article> for more information."},iapSubscriptionWarning:{id:"settingsModal.iapSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Apple App Store. We cannot cancel your subscription for you."},playStoreSubscriptionWarning:{id:"settingsModal.playStoreSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Google Play Store. We cannot cancel your subscription for you."},typeEmailLabel:{id:"settingsModal.typeEmailLabel",defaultMessage:"Please type your account email."},typeDeleteInputLabel:{id:"settingsModal.typeDeleteInputLabel",defaultMessage:'To proceed, type "DELETE" in the input field below.'},lockedButtonLabel:{id:"settingsModal.lockedButtonLabel",defaultMessage:"Locked"},deleteAccountButtonLabel:{id:"settingsModal.deleteAccountButtonLabel",defaultMessage:"Permanently delete my account"},recentLoginMessage:{id:"settingsModal.recentLoginMessage",defaultMessage:"You may only delete your account if you have logged in within the last 10 minutes. Please log in again, then return here to continue."},refreshLoginButtonLabel:{id:"settingsModal.refreshLoginButtonLabel",defaultMessage:"Refresh login"},chatTrainingAllowedToggleLabel:{id:"settingsModal.trainingAllowedToggleLabel",defaultMessage:"Improve the model for everyone"},chatTrainingEnterpriseTooltip:{id:"settingsModal.chatTrainingEnterpriseTooltip",defaultMessage:"ChatGPT Enterprise automatically disables training."},chatTrainingEduTooltip:{id:"settingsModal.chatTrainingEduTooltip",defaultMessage:"ChatGPT Edu automatically disables training."},chatTrainingTeamsTooltip:{id:"settingsModal.chatTrainingTeamsTooltip",defaultMessage:"ChatGPT Team automatically disables training."},dataControlsTab:{id:"settingsModal.dataControls",defaultMessage:"Data controls"},cookiesTab:{id:"settingsModal.cookies",defaultMessage:"Cookie Preferences"},personalizationTab:{id:"settingsModal.personalization",defaultMessage:"Personalization"},betaIntro:{id:"settingsModal.betaIntro",defaultMessage:"As a Plus user, enjoy early access to experimental new features, which may change during development."},betaSettingsUpdateFailed:{id:"settingsModal.betaSettingsUpdateFailed",defaultMessage:"Failed to update your beta setting"},generalTab:{id:"settingsModal.generalTab",defaultMessage:"General"},desktopAppTab:{id:"settingsModal.desktopAppTab",defaultMessage:"App"},betaTab:{id:"settingsModal.betaTab",defaultMessage:"Beta features"},connectorsTab:{id:"settingsModal.connectorsTab",defaultMessage:"Connected apps"},securityTab:{id:"settingsModal.securityTab",defaultMessage:"Security"},subscriptionTab:{id:"settingsModal.subscriptionTab",defaultMessage:"Subscription"},logoutAllSuccess:{id:"settingsModal.logoutAllSuccess",defaultMessage:"Successfully logged out of all devices."},logoutAllFailed:{id:"settingsModal.logoutAllFailed",defaultMessage:"We were unable to process your request at this time. Please try again later."},deleteChatLabel:{id:"settingsModal.deleteChatLabel",defaultMessage:"Delete all chats"},deleteChatButton:{id:"settingsModal.deleteChatButton",defaultMessage:"Delete all"},logOutLabel:{id:"settingsModal.logOutLabel",defaultMessage:"Log out on this device"},logOutButton:{id:"settingsModal.logoutButton",defaultMessage:"Log out"},archiveChatsLabel:{id:"settingsModal.archiveChatsLabel",defaultMessage:"Archive all chats"},archiveChatsButton:{id:"settingsModal.archiveChatsButton",defaultMessage:"Archive all"},chatHistoryDescription:{id:"settingsModal.chatHistoryDescription",defaultMessage:"Save new chats on this browser to your history and allow them to be used to improve our models. Unsaved chats will be deleted from our systems within 30 days. This setting does not sync across browsers or devices. <link>Learn more</link>"}});function ad(){const{isOpen:s}=Us(),{isUnauthenticated:t}=at();return s?t?e.jsx(Xc,{}):e.jsx(qc,{}):null}const nd=Wa(()=>Ga(()=>import("./hbh77i9kr2gbjtug.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(s=>s.FannyPackModalContainer)),od=Wa(()=>Ga(()=>import("./lm9w2i5kkk5oax0d.js"),__vite__mapDeps([9,1,2,3,6,7,10,11])));function id(){const s=Js(t=>t.sharingModalThreadId);return s?e.jsx(od,{serverThreadId:s}):null}function Ed(){const s=Js(g=>g.purchaseWorkspaceData),t=Js(g=>g.leaveWorkspaceData),a=s!=null,o=et(Ae.UserContext),i=et(Ae.GlobalMemoryOnboarding),l=Se();let{isOpen:r,isTeamAccountIntent:u}=Ir();const{isFannyPackEnabled:c}=qi();return e.jsxs(e.Fragment,{children:[e.jsx(ad,{}),e.jsx(Cl,{}),r&&l&&e.jsx(kr,{currentAccount:l,initTab:u?"business":void 0}),e.jsx(Qi,{}),e.jsx(yl,{}),a&&e.jsx(_r,{isOpen:a,onClose:()=>Me.setPurchaseWorkspaceData(null),...s}),t&&e.jsx(hl,{workspace:t}),o&&e.jsx(Bc,{isModalOpen:o}),i&&e.jsx(Zi,{onClose:()=>Me.closeModal(Ae.GlobalMemoryOnboarding)}),c&&e.jsx(nd,{}),e.jsx(id,{})]})}export{Ed as GlobalModalsComponent};
//# sourceMappingURL=h6scssvw5h5w80zy.js.map
