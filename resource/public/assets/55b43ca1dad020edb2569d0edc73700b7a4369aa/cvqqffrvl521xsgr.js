import{c as G,r as c,j as e,ad as L,ac as N,M as l}from"./i8w88cc8b3gds516.js";import{j as A,U,A as z,bp as D}from"./jg63sxiyqeyvfv9f.js";import{cr as $,S as R,P as q,j as J,bW as W,co as X,bn as Z,ap as H}from"./eh26o1l35t2fnjj4.js";const K=5,O="Default";function Q(n){const i={};return n.forEach(d=>{const o=d.group??O;i[o]||(i[o]=[]),i[o].push(d)}),i}function se({tagOptions:n,onSubmit:i,onMoreClicked:d,onCancel:o,maxInlineTags:F=K,modalOnly:u=!1,modalTitle:I,multiple:S,children:_,allowEmptySubmit:E=!1}){const f=G(),[m,r]=c.useState(u?"modal":"inline"),[a,h]=c.useState([]),[x,P]=c.useState(void 0),{layer:w}=$("474444727"),k=w.get("show_custom_instr_message",!1),v=k?4e3:1500,b=c.useCallback(s=>{i(s),r("submitted"),setTimeout(()=>{r("closed")},v)},[i,v]),p=c.useMemo(()=>A(b,500),[b]),j=s=>{let t=[];return S?t=a.includes(s)?a.filter(B=>B!==s):[...a,s]:t=[s],h(t),t},M=()=>{b({tags:a,textFeedback:x,tagChoices:T,source:"modal"})},T=n.map(s=>s.value),C=Q(n),y=Object.keys(C);return e.jsxs(e.Fragment,{children:[!u&&e.jsx(L,{children:m!=="closed"&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[m==="submitted"&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:e.jsx("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:e.jsx("div",{className:"text-sm",children:k?e.jsx("div",{children:e.jsx(l,{id:"ConversationTurnInlineMessageFeedback.customInstructions",defaultMessage:"Thanks! If ChatGPT's style isn't quite right, you can also <link>customize its responses</link>.",values:{link:s=>e.jsx("span",{onClick:()=>{U.openModal(z.UserContext),R.logEvent("chatgpt_user_context_inline_feedback_message_clicked"),q.logEvent(J.userContextInlineFeedbackMessageClicked)},className:"cursor-pointer font-semibold text-token-text-primary",children:s})}})}):e.jsx(l,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(m)&&e.jsxs("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[e.jsx("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{r("closed"),p.cancel(),o?.()},children:e.jsx(W,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),e.jsx("div",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.slice(0,F).map(s=>e.jsx(g,{"aria-pressed":a.includes(s.value),"aria-selected":a.includes(s.value),$selected:a.includes(s.value),onClick:()=>{const t=j(s.value);p({tags:t,tagChoices:T,source:"inline"})},children:s.label},s.value)),e.jsx(g,{onClick:()=>{d?.(),p.cancel(),r("modal")},children:e.jsx(l,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),m==="modal"&&e.jsxs(X,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:I??e.jsx(l,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{h([]),r(u?"closed":"inline"),u&&o?.()},showCloseButton:!0,primaryButton:e.jsx(Z,{color:"primary",disabled:a.length===0&&!x&&!E,onClick:M,children:e.jsx(l,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[e.jsx("div",{className:"flex flex-col gap-6",children:y.map(s=>e.jsxs("div",{children:[y.length>1&&e.jsx("div",{className:"mb-3 text-sm font-semibold",children:s}),e.jsx("div",{className:"flex flex-wrap gap-3",children:C[s].map(t=>e.jsx(g,{$selected:a.includes(t.value),onClick:()=>j(t.value),children:t.label},t.value))},s)]},s))}),e.jsx(D,{ariaLabel:f.formatMessage({id:"Z3Ja/T",defaultMessage:"Additional feedback"}),name:"feedback",type:"text",className:"mt-6",placeholder:f.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:x??"",onChange:s=>P(s.target.value),onPressEnter:M}),_]})]})}const g=H.button`
  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary
  ${({$selected:n})=>n&&"!bg-token-text-primary !text-token-main-surface-primary"}
`;export{se as I,g as T};
//# sourceMappingURL=cvqqffrvl521xsgr.js.map
