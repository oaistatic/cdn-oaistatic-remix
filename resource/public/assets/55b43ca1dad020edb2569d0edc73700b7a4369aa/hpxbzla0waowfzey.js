const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/imd3w09dyty562cv.js","assets/eh26o1l35t2fnjj4.js","assets/i8w88cc8b3gds516.js","assets/root-inht5vcp.css","assets/jg63sxiyqeyvfv9f.js","assets/conversation-small-nranh1cg.css","assets/fk34bmciusx2xr1h.js","assets/dvm2vv2ab4q4lsy1.js","assets/mkf03mv1563ttunw.js","assets/oh4o3ugq8w1dadrw.js","assets/c4bxzbp1808foto4.js","assets/ep33xj6n2jldqpka.js","assets/cty1v3jstgrcswrf.js","assets/53nax822pkd7iwth.js","assets/dyuarriie396ezxd.js","assets/pd13tr9jpgia7d3y.js","assets/h5ki4u1sjcr6cdl0.js","assets/e7ldcb1pybd2xac9.js","assets/obl0r3ppfp7a769l.js","assets/bbqpe4qtq6w5lm6e.js","assets/diz3gorkdm8k36uy.js","assets/mwkkzpk83u6e8doo.js","assets/ft5z2r2wosrho43b.js","assets/ctlsvvj6folqh10x.js","assets/hlm6hsp0qis3d7zg.js","assets/j14akxnqigsmgi7w.js","assets/ln72qaf6x6k87xpg.js","assets/csvcabmbpwfvn88d.js","assets/jzhplvlpjjzcf6w8.js","assets/eu1rrdtjzck2hp46.js","assets/hgsmava1iiy94kvu.js"])))=>i.map(i=>d[i]);
import{ei as H,cW as K,eA as q,eb as k,gC as y,aM as f,aN as x,ae as Q,$ as Y,dg as I,r as E,D as B,bQ as X,bR as $,dO as J,eh as Z,fK as ee,bA as se,ab as ae,bt as te,aa as ie}from"./eh26o1l35t2fnjj4.js";import{r as d,j as e,ad as F,e as re,a as O,c as oe,ac as u,d as N,f as ne,u as de}from"./i8w88cc8b3gds516.js";import{hT as ce,hU as V,hV as le,hW as ue,hX as _,hY as h,h6 as he,c8 as m,c9 as P,o as me,hZ as fe,m as xe,T as ge,q as pe,y as ve,h_ as be,cG as je,h$ as Te,i0 as we,d0 as Ce,d1 as S,i1 as ye,bd as Ie,i2 as Ee,i3 as Ne,bV as _e,cO as Pe,dz as Se,i4 as Ae,cP as ke,i5 as Fe,dA as Oe,i6 as Ve,i7 as Me,cH as De,dY as Le}from"./jg63sxiyqeyvfv9f.js";import{C as Re}from"./ep33xj6n2jldqpka.js";import{a as M,u as D}from"./dyuarriie396ezxd.js";import{C as ze}from"./csvcabmbpwfvn88d.js";import{a as Ge}from"./ctlsvvj6folqh10x.js";import{C as Ue}from"./eu1rrdtjzck2hp46.js";function We(){const a=ce(t=>t.notifications),{activeThreadIds:s}=H();return d.useEffect(()=>{a.filter(i=>i.clientThreadId===void 0||s.has(i.clientThreadId)).map(i=>i.id).filter(i=>i!==void 0).forEach(i=>V(i))},[s,a]),a.length===0||K?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(F,{children:a.map(t=>e.jsx(He,{...t},t.id))})})}function He({...a}){const s=re(),t=O(),i=oe(),o=q(a.clientThreadId),c=()=>{o&&ue(s,t,o),a.id&&V(a.id)};return e.jsxs(u.div,{onClick:c,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(le,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:a.title??i.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:a.subtitle??i.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const A=450;function Ke({children:a,clientThreadId:s,isOpen:t,onClose:i}){const o=k();return e.jsxs(F,{children:[t&&o&&e.jsx(M,{clientThreadId:s,children:e.jsx(y,{children:e.jsx(_.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(u.div,{className:"h-full w-full bg-token-main-surface-secondary",...h}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(u.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:A},...h,children:e.jsx(ze,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:a})]})]})})})}),t&&!o&&e.jsx(y,{children:e.jsx(_.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(u.div,{className:"h-full w-full bg-token-main-surface-secondary",...h}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(u.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:A},...h,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Ge,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const qe=f(()=>x(()=>import("./imd3w09dyty562cv.js"),__vite__mapDeps([0,1,2,3,4,5]))),Qe=f(()=>x(()=>import("./fk34bmciusx2xr1h.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29])).then(a=>a.ImageEditor));function Ye({clientThreadId:a}){const s=he();d.useEffect(()=>{m.close()},[a]);let t;return s?.type===P.ADAVisualization?t=e.jsx(qe,{clientThreadId:a,visualization:s.visualization}):s?.type===P.Image&&(t=e.jsx(Qe,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(Ke,{clientThreadId:a,isOpen:s!=null,onClose:m.close,children:t})}function Be(){const{clientThreadId:a,resetThread:s}=D();return me({resetThreadAction:s,clientThreadId:a}),null}function Xe(){const{clientThreadId:a,currentModelId:s,isCompanionWindow:t}=D();return e.jsx(fe,{conversationId:a,currentModelId:s,isActiveWindow:!t})}function $e({clientThreadId:a,urlThreadId:s}){return xe({clientThreadId:a}),e.jsxs(e.Fragment,{children:[e.jsx(Xe,{}),e.jsx(Be,{}),e.jsxs(ge,{clientThreadId:a,children:[e.jsx(pe,{clientThreadId:a,urlThreadId:s}),e.jsx(ve,{}),e.jsx(Ue,{})]})]})}var Je={};const Ze=f(()=>x(()=>import("./hgsmava1iiy94kvu.js"),__vite__mapDeps([30,2,1,3,4,5,14,27,23,24,25,26,16,17,22,28])));function cs(a){const{urlThreadId:s,clientThreadId:t,prefetchSearch:i}=a;es();const o=Q(),c=N(),[g]=ne(),[r,l]=d.useState(()=>s!==void 0?Y.getClientNewThreadIdForServerThreadId(s)??s:t!==void 0?t:I());s!==void 0&&r!==s&&(E.getServerThreadId(r)===s||l(s));const L=be(N());d.useEffect(()=>{s===void 0&&E.getServerThreadId(r)!==void 0&&l(I())},[s,r,L]);const R=je(De.workspaceId),z=k(),{eligible:p,isLoading:v,markAsViewed:b}=Te(),j=we();d.useEffect(()=>{(c.pathname==="/"||c.pathname.startsWith("/c/"))&&Ce({namespace:S.ChatPageLoad})==null&&(ye({namespace:S.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),B.addTiming("chatgpt.web.chatPage.mounted"))},[]);const T=Ie();d.useEffect(()=>{X(!0).then(n=>{n.force_login&&T({authType:"login"}),Ee.initializeAndGatherData(n),$.initializeAndGatherData(n)})},[T]),d.useEffect(()=>{const n=g.get(Ne)==="true";o!==n&&J.setIsTemporaryChatEnabled(n)},[o,g]),d.useEffect(()=>{c.state?.focusObject&&m.setFocusedObject(c.state.focusObject)},[c.state?.focusObject]),d.useEffect(()=>{!v&&p&&(b(),j())},[p,v,b,j]);const{isOpen:G,isLoading:U}=_e(),W=z?$e:Re,w=O();return d.useEffect(()=>Z(te,{completionFinished:n=>{if(n.serverThreadId!=null&&!o){const C=se(n.serverThreadId)?.mode;C?.kind===ae.GizmoInteraction&&Le.handleGizmoInteracted(w,C.gizmo_id)}}}),[o,w]),e.jsx(ee.Provider,{value:null,children:e.jsx(Pe,{children:e.jsxs(Se,{clientThreadId:r,children:[e.jsx(Ae,{clientThreadId:r},R),!U&&G&&e.jsx(Ze,{clientThreadId:r,setClientThreadId:l}),e.jsx(ke,{}),e.jsx(Fe,{}),e.jsx(M,{clientThreadId:r,setClientThreadId:l,prefetchSearch:i,children:e.jsx(W,{urlThreadId:s,clientThreadId:r,setClientThreadId:l,prefetchSearch:i})}),e.jsx(Ye,{clientThreadId:r}),e.jsx(Oe,{clientThreadId:r}),e.jsx(Ve,{}),e.jsx(We,{}),e.jsx(Me,{}),null]})})})}function es(){de({queryKey:["pingEdge"],queryFn:()=>ie.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Je.GOKU_SERVICE);export{cs as C,A as F};
//# sourceMappingURL=hpxbzla0waowfzey.js.map
