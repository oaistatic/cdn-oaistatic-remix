import{r as s,g as $A,c as Q,j as n,e as Ue,ac as y,ad as G}from"./i8w88cc8b3gds516.js";import{l8 as NA,fU as Xe,ag as Ae,c4 as VA,bt as OA,hd as gA,bq as Pe,eD as ee,oy as qe,oz as _e,hb as He,oA as ze,ar as Ke,oB as $e,oC as At,a5 as te,i8 as et,i9 as tt,lb as ot,os as nt,N as st,aj as at}from"./jg63sxiyqeyvfv9f.js";import{fg as T,eA as oA,dB as oe,cW as ne,hC as it,$ as z,dg as rt,cp as ct,co as se,bn as ae,an as tA,dn as nA,b9 as lt,D as ut,bk as ie,ds as dt,bm as mt,bU as ft,bM as gt,aN as pt,b$ as ht,hD as Ct}from"./eh26o1l35t2fnjj4.js";import{f as vA,r as bA,a as wA,$ as xt,C as vt,_ as V,R as fA,h as F,M as bt,i as YA,y as Et,W as sA,T as W,O as re,N as kt,S as lA,I as ce,j as MA,k as IA,l as St,Y as Bt,F as wt,x as Mt,m as QA,n as le,u as S,o as ue,p as It,q as RA,t as DA,v as de,g as yt,w as jt,V as L,X as FA,L as yA,z as Vt,E as Qt,A as Rt}from"./nuayrtjqlytdp7eo.js";import{u as Dt,a as TA,g as pA,b as Tt,c as Zt,s as Nt,B as me,d as Ot,e as Yt,f as Ft,G as Lt,n as Gt,h as Jt,v as Wt,i as Ut,V as Xt}from"./lrmvad4oj50obtfz.js";import{M as fe}from"./hexd96uzgi4jb5l2.js";import{G as Pt,W as qt}from"./ctlsvvj6folqh10x.js";import"./c414ph1neqej00ws.js";import"./fioevnw06bqx6tt9.js";import"./buoyb8jniswedxm6.js";import"./c4bxzbp1808foto4.js";import"./gdsmqpdlbx03h3zp.js";import"./hlm6hsp0qis3d7zg.js";import"./dyuarriie396ezxd.js";import"./j14akxnqigsmgi7w.js";import"./ln72qaf6x6k87xpg.js";import"./h5ki4u1sjcr6cdl0.js";import"./e7ldcb1pybd2xac9.js";function _t(){const A=Dt(),e=s.useCallback(()=>{vA.debug("disconnected from room"),bA()},[]),t=s.useCallback(o=>{A.danger("Something went wrong"),vA.error("an error occurred within the room",o);const i=NA(wA.getState());T.voiceMode.error({...i,error:o.message}),bA()},[A]),a=s.useCallback(o=>{A.danger("Something went wrong"),vA.error("an encryption error occurred within the room",o);const i=NA(wA.getState());T.voiceMode.error({encryptionError:o.message,eventSource:"voice-session",...i}),bA()},[A]);return{onDisconnected:e,onError:t,onEncryptionError:a}}function ge(A){var e,t,a="";if(typeof A=="string"||typeof A=="number")a+=A;else if(typeof A=="object")if(Array.isArray(A)){var o=A.length;for(e=0;e<o;e++)A[e]&&(t=ge(A[e]))&&(a&&(a+=" "),a+=t)}else for(t in A)A[t]&&(a&&(a+=" "),a+=t);return a}function Ht(){for(var A,e,t=0,a="",o=arguments.length;t<o;t++)(A=arguments[t])&&(e=ge(A))&&(a&&(a+=" "),a+=e);return a}function zt(...A){return(...e)=>{for(const t of A)if(typeof t=="function")try{t(...e)}catch(a){console.error(a)}}}function pe(...A){const e={...A[0]};for(let t=1;t<A.length;t++){const a=A[t];for(const o in a){const i=e[o],c=a[o];typeof i=="function"&&typeof c=="function"&&o[0]==="o"&&o[1]==="n"&&o.charCodeAt(2)>=65&&o.charCodeAt(2)<=90?e[o]=zt(i,c):(o==="className"||o==="UNSAFE_className")&&typeof i=="string"&&typeof c=="string"?e[o]=Ht(i,c):e[o]=c!==void 0?c:i}}return e}const Kt={connect:!0,audio:!1,video:!1};function $t(A){const{token:e,serverUrl:t,options:a,room:o,connectOptions:i,connect:c,audio:r,video:l,screen:d,onConnected:f,onDisconnected:m,onError:u,onMediaDeviceFailure:g,onEncryptionError:h,simulateParticipants:p,...x}={...Kt,...A};a&&o&&V.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[C,j]=s.useState();s.useEffect(()=>{j(o??new fA(a))},[o]);const w=s.useMemo(()=>{const{className:E}=Et();return pe(x,{className:E})},[x]);return s.useEffect(()=>{if(!C)return;const E=()=>{const k=C.localParticipant;V.debug("trying to publish local tracks"),Promise.all([k.setMicrophoneEnabled(!!r,typeof r!="boolean"?r:void 0),k.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),k.setScreenShareEnabled(!!d,typeof d!="boolean"?d:void 0)]).catch(B=>{V.warn(B),u?.(B)})},M=k=>{const B=bt.getFailure(k);g?.(B)},b=k=>{h?.(k)};return C.on(F.SignalConnected,E).on(F.MediaDevicesError,M).on(F.EncryptionError,b),()=>{C.off(F.SignalConnected,E).off(F.MediaDevicesError,M).off(F.EncryptionError,b)}},[C,r,l,d,u,h,g]),s.useEffect(()=>{if(C){if(p){C.simulateParticipants({participants:{count:p},publish:{audio:!0,useRealTracks:!0}});return}if(!e){V.debug("no token yet");return}if(!t){V.warn("no livekit url provided"),u?.(Error("no livekit url provided"));return}c?(V.debug("connecting"),C.connect(t,e,i).catch(E=>{V.warn(E),u?.(E)})):(V.debug("disconnecting because connect is false"),C.disconnect())}},[c,e,JSON.stringify(i),C,u,t,p]),s.useEffect(()=>{if(!C)return;const E=M=>{switch(M){case YA.Disconnected:m&&m();break;case YA.Connected:f&&f();break}};return C.on(F.ConnectionStateChanged,E),()=>{C.off(F.ConnectionStateChanged,E)}},[e,f,m,C]),s.useEffect(()=>{if(C)return()=>{V.info("disconnecting on onmount"),C.disconnect()}},[C]),{room:C,htmlProps:w}}const Ao=s.forwardRef(function(A,e){const{room:t,htmlProps:a}=$t(A);return s.createElement("div",{ref:e,...a},t&&s.createElement(xt.Provider,{value:t},s.createElement(vt.Provider,{value:A.featureFlags},A.children)))});function eo(A){return A!==void 0}function to(...A){return pe(...A.filter(eo))}function he(A,e={}){const[t,a]=s.useState(St(A)),[o,i]=s.useState(t?.isMuted),[c,r]=s.useState(t?.isSubscribed),[l,d]=s.useState(t?.track),[f,m]=s.useState("landscape"),u=s.useRef(),{className:g,trackObserver:h}=s.useMemo(()=>Bt(A),[A.participant.sid??A.participant.identity,A.source,wt(A)&&A.publication.trackSid]);return s.useEffect(()=>{const p=h.subscribe(x=>{V.debug("update track",x),a(x),i(x?.isMuted),r(x?.isSubscribed),d(x?.track)});return()=>p?.unsubscribe()},[h]),s.useEffect(()=>{var p,x;return l&&(u.current&&l.detach(u.current),(p=e.element)!=null&&p.current&&!(re(A.participant)&&l?.kind==="audio")&&l.attach(e.element.current)),u.current=(x=e.element)==null?void 0:x.current,()=>{u.current&&l?.detach(u.current)}},[l,e.element]),s.useEffect(()=>{var p,x;if(typeof((p=t?.dimensions)==null?void 0:p.width)=="number"&&typeof((x=t?.dimensions)==null?void 0:x.height)=="number"){const C=t.dimensions.width>t.dimensions.height?"landscape":"portrait";m(C)}},[t]),{publication:t,isMuted:o,isSubscribed:c,track:l,elementProps:to(e.props,{className:g,"data-lk-local-participant":A.participant.isLocal,"data-lk-source":t?.source,...t?.kind==="video"&&{"data-lk-orientation":f}})}}var oo="Expected a function",LA=NaN,no="[object Symbol]",so=/^\s+|\s+$/g,ao=/^[-+]0x[0-9a-f]+$/i,io=/^0b[01]+$/i,ro=/^0o[0-7]+$/i,co=parseInt,lo=typeof lA=="object"&&lA&&lA.Object===Object&&lA,uo=typeof self=="object"&&self&&self.Object===Object&&self,mo=lo||uo||Function("return this")(),fo=Object.prototype,go=fo.toString,po=Math.max,ho=Math.min,EA=function(){return mo.Date.now()};function Co(A,e,t){var a,o,i,c,r,l,d=0,f=!1,m=!1,u=!0;if(typeof A!="function")throw new TypeError(oo);e=GA(e)||0,jA(t)&&(f=!!t.leading,m="maxWait"in t,i=m?po(GA(t.maxWait)||0,e):i,u="trailing"in t?!!t.trailing:u);function g(b){var k=a,B=o;return a=o=void 0,d=b,c=A.apply(B,k),c}function h(b){return d=b,r=setTimeout(C,e),f?g(b):c}function p(b){var k=b-l,B=b-d,Z=e-k;return m?ho(Z,i-B):Z}function x(b){var k=b-l,B=b-d;return l===void 0||k>=e||k<0||m&&B>=i}function C(){var b=EA();if(x(b))return j(b);r=setTimeout(C,p(b))}function j(b){return r=void 0,u&&a?g(b):(a=o=void 0,c)}function w(){r!==void 0&&clearTimeout(r),d=0,a=l=o=r=void 0}function E(){return r===void 0?c:j(EA())}function M(){var b=EA(),k=x(b);if(a=arguments,o=this,l=b,k){if(r===void 0)return h(l);if(m)return r=setTimeout(C,e),g(l)}return r===void 0&&(r=setTimeout(C,e)),c}return M.cancel=w,M.flush=E,M}function jA(A){var e=typeof A;return!!A&&(e=="object"||e=="function")}function xo(A){return!!A&&typeof A=="object"}function vo(A){return typeof A=="symbol"||xo(A)&&go.call(A)==no}function GA(A){if(typeof A=="number")return A;if(vo(A))return LA;if(jA(A)){var e=typeof A.valueOf=="function"?A.valueOf():A;A=jA(e)?e+"":e}if(typeof A!="string")return A===0?A:+A;A=A.replace(so,"");var t=io.test(A);return t||ro.test(A)?co(A.slice(2),t?2:8):ao.test(A)?LA:+A}var bo=Co;const JA=Mt(bo);function Eo(A){const e=s.useRef(A);e.current=A,s.useEffect(()=>()=>{e.current()},[])}function ko(A,e=500,t){const a=s.useRef();Eo(()=>{a.current&&a.current.cancel()});const o=s.useMemo(()=>{const i=JA(A,e,t),c=(...r)=>i(...r);return c.cancel=()=>{i.cancel()},c.isPending=()=>!!a.current,c.flush=()=>i.flush(),c},[A,e,t]);return s.useEffect(()=>{a.current=JA(A,e,t)},[A,e,t]),o}function So(A,e,t){const a=(d,f)=>d===f,o=A instanceof Function?A():A,[i,c]=s.useState(o),r=s.useRef(o),l=ko(c,e,t);return a(r.current,o)||(l(o),r.current=o),[i,l]}function Bo({threshold:A=0,root:e=null,rootMargin:t="0%",freezeOnceVisible:a=!1,initialIsIntersecting:o=!1,onChange:i}={}){var c;const[r,l]=s.useState(null),[d,f]=s.useState(()=>({isIntersecting:o,entry:void 0})),m=s.useRef();m.current=i;const u=((c=d.entry)==null?void 0:c.isIntersecting)&&a;s.useEffect(()=>{if(!r||!("IntersectionObserver"in window)||u)return;let p;const x=new IntersectionObserver(C=>{const j=Array.isArray(x.thresholds)?x.thresholds:[x.thresholds];C.forEach(w=>{const E=w.isIntersecting&&j.some(M=>w.intersectionRatio>=M);f({isIntersecting:E,entry:w}),m.current&&m.current(E,w),E&&a&&p&&(p(),p=void 0)})},{threshold:A,root:e,rootMargin:t});return x.observe(r),()=>{x.disconnect()}},[r,JSON.stringify(A),e,t,u,a]);const g=s.useRef(null);s.useEffect(()=>{var p;!r&&(p=d.entry)!=null&&p.target&&!a&&!u&&g.current!==d.entry.target&&(g.current=d.entry.target,f({isIntersecting:o,entry:void 0}))},[r,d.entry,a,u,o]);const h=[l,!!d.isIntersecting,d.entry];return h.ref=h[0],h.isIntersecting=h[1],h.entry=h[2],h}const Ce=s.forwardRef(function({onTrackClick:A,onClick:e,onSubscriptionStatusChanged:t,trackRef:a,manageSubscription:o,...i},c){const r=ce(a),l=s.useRef(null);s.useImperativeHandle(c,()=>l.current);const d=Bo({root:l.current}),[f]=So(d,3e3);s.useEffect(()=>{o&&r.publication instanceof MA&&f?.isIntersecting===!1&&d?.isIntersecting===!1&&r.publication.setSubscribed(!1)},[f,r,o]),s.useEffect(()=>{o&&r.publication instanceof MA&&d?.isIntersecting===!0&&r.publication.setSubscribed(!0)},[d,r,o]);const{elementProps:m,publication:u,isSubscribed:g}=he(r,{element:l,props:i});s.useEffect(()=>{t?.(!!g)},[g,t]);const h=p=>{e?.(p),A?.({participant:r?.participant,track:u})};return s.createElement("video",{ref:l,...m,muted:!0,onClick:h})}),wo=s.forwardRef(function({trackRef:A,onSubscriptionStatusChanged:e,volume:t,muted:a,...o},i){const c=ce(A),r=s.useRef(null);s.useImperativeHandle(i,()=>r.current);const{elementProps:l,isSubscribed:d,track:f,publication:m}=he(c,{element:r,props:o});return s.useEffect(()=>{e?.(!!d)},[d,e]),s.useEffect(()=>{f===void 0||t===void 0||(f instanceof IA?f.setVolume(t):V.warn("Volume can only be set on remote audio tracks."))},[t,f]),s.useEffect(()=>{m===void 0||a===void 0||(m instanceof MA?m.setEnabled(!a):V.warn("Can only call setEnabled on remote track publications."))},[a,m,f]),s.createElement("audio",{ref:r,...l})});function Mo({volume:A,muted:e}){const t=sA([W.Source.Microphone,W.Source.ScreenShareAudio,W.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(a=>!re(a.participant)&&a.publication.kind===W.Kind.Audio);return s.createElement("div",{style:{display:"none"}},t.map(a=>s.createElement(wo,{key:kt(a),trackRef:a,volume:A,muted:e})))}function xe({conversationId:A}){const{shouldDelayDisconnect:e,delayDisconnect:t,immediateDisconnect:a}=QA({refetchLater:!0}),{toggleMute:o}=le(),i=oA(A);return s.useCallback(async()=>{T.voiceSessionEndedByUser.click(),Xe.setState({voiceFeedbackThread:i,lastVoiceSessionEndTime:new Date}),e?(await o(),t()):a()},[t,a,i,e,o])}var Io={webm:"data:video/webm;base64,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",mp4:"data:video/mp4;base64,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"};const{webm:yo,mp4:jo}=Io,kA=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,SA=()=>"wakeLock"in navigator;class Vo{constructor(){if(this.enabled=!1,SA()){this._wakeLock=null;const e=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else kA()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",yo),this._addSourceToVideo(this.noSleepVideo,"mp4",jo),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(e,t,a){var o=document.createElement("source");o.src=a,o.type=`video/${t}`,e.appendChild(o)}get isEnabled(){return this.enabled}enable(){return SA()?navigator.wakeLock.request("screen").then(e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e}):kA()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(t=>(this.enabled=!0,t)).catch(t=>{throw this.enabled=!1,t})}disable(){SA()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):kA()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}var Qo=Vo;const Ro=$A(Qo),Do=A=>s.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},s.createElement("path",{d:"M7.5 8.91422V10.5C7.5 12.9853 9.51472 15 12 15C12.4787 15 12.9399 14.9253 13.3726 14.7868L14.5285 15.9427C13.7599 16.3004 12.9031 16.5 11.9999 16.5C9.28338 16.5 6.98608 14.6939 6.24825 12.2148C6.09071 11.6854 5.53389 11.384 5.00455 11.5415C4.47521 11.6991 4.17381 12.2559 4.33134 12.7852C5.22277 15.7805 7.82091 18.0418 11 18.4381V19.5H9.5C8.94772 19.5 8.5 19.9477 8.5 20.5C8.5 21.0523 8.94772 21.5 9.5 21.5H14.5C15.0523 21.5 15.5 21.0523 15.5 20.5C15.5 19.9477 15.0523 19.5 14.5 19.5H13V18.4381C14.086 18.3027 15.1043 17.9496 16.0098 17.424L19.2929 20.7071C19.6834 21.0976 20.3166 21.0976 20.7071 20.7071C21.0976 20.3166 21.0976 19.6834 20.7071 19.2929L4.70711 3.29289C4.31658 2.90237 3.68342 2.90237 3.29289 3.29289C2.90237 3.68342 2.90237 4.31658 3.29289 4.70711L7.5 8.91422Z",fill:"currentColor"}),s.createElement("path",{d:"M17.3874 13.1448L18.8601 14.6174C19.202 14.0488 19.4753 13.4343 19.6685 12.7852C19.826 12.2559 19.5246 11.6991 18.9953 11.5415C18.466 11.384 17.9091 11.6854 17.7516 12.2148C17.6557 12.537 17.5335 12.8478 17.3874 13.1448Z",fill:"currentColor"}),s.createElement("path",{d:"M8.46182 4.21918L16.2436 12.001C16.4096 11.5315 16.5 11.0263 16.5 10.5V7C16.5 4.51472 14.4853 2.5 12 2.5C10.5644 2.5 9.28577 3.17227 8.46182 4.21918Z",fill:"currentColor"})),To=A=>s.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},s.createElement("path",{d:"M7.50002 7C7.50002 4.51472 9.51474 2.5 12 2.5C14.4853 2.5 16.5 4.51472 16.5 7V10.5C16.5 12.9853 14.4853 15 12 15C9.51474 15 7.50002 12.9853 7.50002 10.5V7Z",fill:"currentColor"}),s.createElement("path",{d:"M18.9953 11.5415C19.5246 11.6991 19.826 12.2559 19.6685 12.7852C18.7771 15.7804 16.179 18.0417 13 18.4381V19.5H14.5C15.0523 19.5 15.5 19.9477 15.5 20.5C15.5 21.0523 15.0523 21.5 14.5 21.5H9.50002C8.94773 21.5 8.50002 21.0523 8.50002 20.5C8.50002 19.9477 8.94773 19.5 9.50002 19.5H11V18.4381C7.82093 18.0418 5.22279 15.7805 4.33136 12.7852C4.17382 12.2559 4.47522 11.6991 5.00456 11.5415C5.5339 11.384 6.09073 11.6854 6.24827 12.2148C6.98609 14.6939 9.28339 16.5 11.9999 16.5C14.7165 16.5 17.0138 14.6939 17.7516 12.2148C17.9091 11.6854 18.466 11.384 18.9953 11.5415Z",fill:"currentColor"})),Zo=A=>s.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},s.createElement("path",{d:"M16.2413 3H7.7587C6.95374 2.99999 6.28937 2.99998 5.74818 3.04419C5.18608 3.09012 4.66937 3.18868 4.18404 3.43598C3.43139 3.81947 2.81947 4.43139 2.43598 5.18404C2.18868 5.66937 2.09012 6.18608 2.04419 6.74818C1.99998 7.28937 1.99999 7.95372 2 8.75869V15.2413C1.99999 16.0463 1.99998 16.7106 2.04419 17.2518C2.09012 17.8139 2.18868 18.3306 2.43598 18.816C2.81947 19.5686 3.43139 20.1805 4.18404 20.564C4.66937 20.8113 5.18608 20.9099 5.74818 20.9558C6.28936 21 6.95372 21 7.75868 21H16.2413C17.0463 21 17.7106 21 18.2518 20.9558C18.8139 20.9099 19.3306 20.8113 19.816 20.564C20.5686 20.1805 21.1805 19.5686 21.564 18.816C21.8113 18.3306 21.9099 17.8139 21.9558 17.2518C22 16.7106 22 16.0463 22 15.2413V8.75868C22 7.95372 22 7.28936 21.9558 6.74818C21.9099 6.18608 21.8113 5.66937 21.564 5.18404C21.1805 4.43139 20.5686 3.81947 19.816 3.43598C19.3306 3.18868 18.8139 3.09012 18.2518 3.04419C17.7106 2.99998 17.0463 2.99999 16.2413 3ZM6.5 9.5C10.366 9.5 13.5 12.634 13.5 16.5C13.5 17.0523 13.0523 17.5 12.5 17.5C11.9477 17.5 11.5 17.0523 11.5 16.5C11.5 13.7386 9.26142 11.5 6.5 11.5C5.94772 11.5 5.5 11.0523 5.5 10.5C5.5 9.94772 5.94772 9.5 6.5 9.5ZM6.5 13.5C8.15685 13.5 9.5 14.8431 9.5 16.5C9.5 17.0523 9.05229 17.5 8.5 17.5C7.94772 17.5 7.5 17.0523 7.5 16.5C7.5 15.9477 7.05229 15.5 6.5 15.5C5.94772 15.5 5.5 15.0523 5.5 14.5C5.5 13.9477 5.94772 13.5 6.5 13.5Z",fill:"currentColor"})),No=A=>s.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},s.createElement("path",{d:"M7.7587 4.5C6.95374 4.49999 6.28937 4.49998 5.74818 4.54419C5.18608 4.59012 4.66937 4.68868 4.18404 4.93598C3.43139 5.31947 2.81947 5.93139 2.43598 6.68404C2.18868 7.16937 2.09012 7.68608 2.04419 8.24818C1.99998 8.78937 1.99999 9.45372 2 10.2587V13.7413C1.99999 14.5463 1.99998 15.2106 2.04419 15.7518C2.09012 16.3139 2.18868 16.8306 2.43598 17.316C2.81947 18.0686 3.43139 18.6805 4.18404 19.064C4.66937 19.3113 5.18608 19.4099 5.74818 19.4558C6.28938 19.5 6.95375 19.5 7.75873 19.5H10.7413C11.5463 19.5 12.2106 19.5 12.7518 19.4558C13.3139 19.4099 13.8306 19.3113 14.316 19.064C15.0686 18.6805 15.6805 18.0686 16.064 17.316C16.3113 16.8306 16.4099 16.3139 16.4558 15.7518C16.5 15.2106 16.5 14.5463 16.5 13.7413V10.2587C16.5 9.45375 16.5 8.78938 16.4558 8.24818C16.4099 7.68608 16.3113 7.16937 16.064 6.68404C15.6805 5.93139 15.0686 5.31947 14.316 4.93598C13.8306 4.68868 13.3139 4.59012 12.7518 4.54419C12.2106 4.49998 11.5463 4.49999 10.7413 4.5H7.7587Z",fill:"currentColor"}),s.createElement("path",{d:"M23 7.8312C23 6.55258 21.5028 5.86019 20.5285 6.68829L18.5285 8.38829C18.1932 8.67329 18 9.09115 18 9.5312V14.4688C18 14.9088 18.1932 15.3267 18.5285 15.6117L20.5285 17.3117C21.5028 18.1398 23 17.4474 23 16.1688V7.8312Z",fill:"currentColor"}));function Oo(A){const e=A.default_voice_mode,t=A.modes.find(a=>a.mode===e);if(!t)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return t.default_model_slug}const ve="inline-flex items-center bg-transparent text-token-text-secondary hover:text-token-text-primary",Yo=({message:A,onClick:e,type:t})=>{const a=Q(),o=oe()&&ne;if(!A)return null;switch(t){case"microphone_denied":return o?n.jsxs("a",{href:"ms-settings:privacy-microphone",className:ve,children:[A,n.jsx(Ae,{className:"icon-sm ml-1"})]}):n.jsx(WA,{onClick:e,message:A});case"connection_quality":return n.jsxs("div",{className:"inline-flex items-center",children:[A,n.jsx("button",{onClick:e,className:"ml-1",children:n.jsx("strong",{children:a.formatMessage(be.retry)})})]});case"normal":return n.jsx(WA,{onClick:e,message:A})}},WA=({message:A,onClick:e})=>{const t=Q();return n.jsxs("button",{onClick:e,className:ve,"aria-label":t.formatMessage(be.openInfoModal),children:[A,n.jsx(Ae,{className:"icon-sm ml-1"})]})},be={openInfoModal:{id:"hintMessage.openInfoModal",defaultMessage:"Open info modal",description:"Open info modal about voice mode usage"},retry:{id:"hintMessage.retry",defaultMessage:"Retry",description:"Retry text next to lost connection message"}};function Fo(A){const{button:e,conversationId:t,modelId:a,onClick:o}=A,i=oA(t),c=VA(t),r=e.action==="new_chat"?c:a,{startVoiceMode:l}=TA(),d=Ue(),f=s.useCallback(()=>{switch(e.action){case"new_chat":{const m=r??gA;Pe(`/?model=${m}`),l(pA({serverThreadId:void 0,modelSlug:m,isAdvancedMode:!0,eventSource:`modal_${e.action}`,parentMessageId:void 0,clientThreadId:rt(),gizmoId:void 0}));break}case"switch_to_standard":i&&a&&l(pA({serverThreadId:i,modelSlug:r??gA,isAdvancedMode:!1,eventSource:`modal_${e.action}`,parentMessageId:void 0,clientThreadId:i,gizmoId:z.getGizmoId(t)}));break;case"upgrade_to_plus":OA(d,"Voice Mode Upgrade To Plus Modal");break;case"upgrade_to_pro":OA(d,"Voice Mode Upgrade To Pro Modal");break}o?.()},[e.action,t,r,a,d,o,i,l]);return n.jsx(ct.Button,{onClick:f,title:e.title,color:A.color})}const Lo={primary:"primary",secondary:"secondary",tertiary:"ghost"};function Ee({buttons:A,conversationId:e,modelId:t,onClick:a}){let o,i,c;const r=s.useCallback(l=>()=>{l==="upgrade_to_plus"?T.upsell.upgradeToPlus():l==="upgrade_to_pro"&&T.upsell.upgradeToPro(),a()},[a]);return!A||A.length===0?{primary:void 0,secondary:void 0,tertiary:void 0}:(A.forEach(l=>{if(!it.includes(l.action))return;const f=n.jsx(Fo,{button:l,conversationId:e,modelId:t,onClick:r(l.action),color:Lo[l.style]});switch(l.style){case"primary":o=f;break;case"secondary":i=f;break;case"tertiary":c=f;break}}),{primary:o,secondary:i,tertiary:c})}function Go({conversationId:A,modelId:e,isOpen:t,onClose:a,buttons:o,title:i,description_markdown:c}){const r=Ee({buttons:o,conversationId:A,modelId:e,onClick:a}),l=n.jsx(fe,{className:"markdown mb-6 text-token-text-secondary",urlTransform:d=>d,children:c});return n.jsx(se,{title:i,isOpen:t,onClose:a,size:"custom",className:"max-w-[550px]",type:"warning",showCloseButton:!0,children:n.jsxs("div",{className:"w-full",children:[l,n.jsxs("div",{className:"flex flex-row justify-end gap-6",children:[r.primary,r.secondary,r.tertiary]})]})})}function Jo({conversationId:A,currentModelId:e}){const t=Q(),a=xe({conversationId:A}),o=S(v=>v.server.usage),i=S(v=>v.server.voiceConnectionQuality),c=v=>v===de.Lost,r=S(v=>v.server.connectionState),l=ue(),{voiceName:d}=ee(),[f,m]=s.useState(!1),u=S(v=>v.server.toolUpdate),[g,h]=s.useState(!1),[p,x]=s.useState(!0),[C,j]=s.useState(null),[w,E]=s.useState(null),[M,b]=s.useState(null),[k,B]=s.useState(!1),[Z,R]=s.useState(!1),iA=s.useRef(!1),X=oA(A),{startVoiceMode:P,stopVoiceMode:J,isVoiceModeActive:N}=TA(),K=Tt();s.useEffect(()=>{Z||K().then(v=>{B(v)}).finally(()=>{R(!0)})},[K,Z]);const rA=S(v=>v.dev.room?.localParticipant.isMicrophoneEnabled);s.useEffect(()=>{N&&(k&&!rA)&&(R(!1),B(!1))},[N,rA,k]);const hA=oe()&&ne,I=N&&Z&&!k,$=N&&k&&!r&&l;s.useEffect(()=>{I&&(m(!1),b(null),j(t.formatMessage(BA.hint)),E({title:t.formatMessage(BA.title),description_markdown:t.formatMessage(BA.description_markdown),buttons:[]}))},[t,hA,I]),s.useEffect(()=>{if($&&!iA.current){iA.current=!0,j(null),E(null);const v=Oo(l),Y=z.getCurrentNode(A)?.id,q=pA({serverThreadId:X,modelSlug:v,parentMessageId:Y,isAdvancedMode:l.default_voice_mode==="advanced",eventSource:"composer_speech_button",clientThreadId:A,gizmoId:z.getGizmoId(A)});T.voiceSessionStarted.click({voice:d}),P(q)}},[A,$,X,P,l,d]);const{reaching_limit_disclosure:AA,exceed_limit_message:O}=o?.rate_limit_message??{},cA=l?.modes.find(v=>v.mode===l?.default_voice_mode),CA=cA?.disclosure_message,xA=c(i)?"Lost connection.":AA?.hint??O?.title??CA?.hint??null;s.useEffect(()=>{cA&&!I&&j(cA.disclosure_message?.hint??null)},[cA,I]),s.useEffect(()=>{const v=u?.text;let Y,q,_;return v&&(x(!1),Y=setTimeout(()=>{h(!0),q=setTimeout(()=>{h(!1),_=setTimeout(()=>{x(!0),wA.setState(We=>{We.server.toolUpdate=null})},750)},3e3)},750)),()=>{clearTimeout(Y),clearTimeout(q),clearTimeout(_)}},[u]),s.useEffect(()=>{if(!I){if(xA&&j(xA),O&&N){J();const v={title:O.title,description_markdown:O.description_markdown,buttons:O.buttons};f?b(v):(E(v),m(!0));const Y=O.buttons.some(_=>_.action==="upgrade_to_plus"),q=O.buttons.some(_=>_.action==="upgrade_to_pro");T.rateLimitReached.success({upgrade_to_plus:Y,upgrade_to_pro:q})}else if(!w){const v=AA??CA;v&&E({title:v.title,description_markdown:v.message_markdown,buttons:v.buttons})}}},[CA,O,xA,f,N,w,AA,J,I]);const Ye=s.useCallback(()=>{M&&(E(M),b(null)),m(!0)},[M]),Fe=s.useCallback(()=>{m(!1)},[]),Le=VA(A),Ge=S(v=>v.voiceMode),Je=async()=>{try{j(null),await P({conversation_id:X,model_slug:Le??gA,eventSource:"lost_connection_hint_message",voice_mode:Ge,voice:d,clientThreadId:A,gizmo_id:z.getGizmoId(A)})}catch(v){const Y=v instanceof Error?v.message:String(v);T.voiceMode.error({error:Y,eventSource:"lost_connection_hint_message"})}};let eA;return I?eA="microphone_denied":c(i)?eA="connection_quality":eA="normal",n.jsxs("div",{className:"flex w-full flex-col items-center",children:[n.jsxs("div",{className:"relative mb-6 flex min-h-5 w-full items-center justify-center text-xs text-token-text-secondary",children:[u?.text&&n.jsx(y.div,{initial:{opacity:0},animate:{opacity:g?1:0},transition:{duration:.5},style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center"},children:n.jsxs("div",{className:"flex items-center",children:[u?.text&&n.jsx(qe,{className:"icon-sm mr-1"}),u?.text]})}),n.jsx(y.div,{initial:{opacity:0},animate:{opacity:p?1:0},transition:{duration:.5},style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center",pointerEvents:u?.text?"none":"auto",cursor:u?.text?"default":"pointer"},children:n.jsx("div",{className:"flex items-center",children:n.jsx(Yo,{type:eA,message:C,onClick:eA==="connection_quality"?Je:Ye})})})]}),n.jsxs("div",{className:tA("flex flex-row items-center gap-6","rounded-full px-3 py-1","transition-width duration-200 ease-in-out"),children:[n.jsx(UA,{capability:"video",children:n.jsx(Wo,{})}),n.jsx(Xo,{shouldQueryDevices:!!$,hideTooltip:I}),n.jsx(UA,{capability:"screenshare",children:n.jsx(Po,{})}),n.jsx(ZA,{onClick:a})]}),n.jsx(Go,{conversationId:A,modelId:e,isOpen:f,onClose:Fe,title:w?.title,description_markdown:w?.description_markdown,buttons:w?.buttons??[]})]})}function UA({children:A,capability:e}){return It()[e]?A:null}function Wo(){const{isVideoEnabled:A,isStartingVideo:e,toggleVideo:t}=RA(),a=Q();let o=null;e?o=nA:o=No;const i=A?"bg-gray-900 hover:bg-gray-800 active:bg-gray-700":"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",c=A?"text-token-main-surface-primary":"text-token-main-surface-primary-inverse",r=a.formatMessage({id:"SRVwhB",defaultMessage:"Toggle video"});return n.jsx(aA,{"aria-label":r,onClick:()=>t("ControlButton"),disabled:e,icon:o,className:i,iconColor:c})}const Uo=async()=>{try{return(await yt("audioinput"))?.label??""}catch(A){return console.warn("Error fetching default media device:",A),ut.addError("Failed to fetch default media device",{error:A}),"Error accessing microphone devices"}};function Xo({shouldQueryDevices:A,hideTooltip:e}){const{isMicrophoneEnabled:t,isMuting:a,toggleMute:o}=le(),i=Q(),{disconnectPending:c}=QA(),[r,l]=s.useState(""),d=t?To:Do,f=t?"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10":"bg-red-500/10 hover:bg-red-500/15 active:bg-red-500/20 dark:bg-red-500/10 dark:hover:bg-red-500/15 dark:active:bg-red-500/20",m=t?"text-token-main-surface-primary-inverse":"text-danger";s.useEffect(()=>{A&&Uo().then(g=>l(g))},[A]);const u=t?i.formatMessage({id:"PJzixV",defaultMessage:"Turn off microphone"}):i.formatMessage({id:"nbbUMb",defaultMessage:"Turn on microphone"});return n.jsx(aA,{"aria-label":u,onClick:o,icon:d,disabled:a||c,className:f,iconColor:m,tooltipPrimaryLabel:!e&&r?u:"",tooltipSecondaryLabel:r})}function Po(){const{isScreenshareEnabled:A,isScreenshareStarting:e,toggleScreenShare:t}=DA(),a=Q();let o=null;e?o=nA:o=Zo;const i=A?"bg-gray-900 hover:bg-gray-800 active:bg-gray-700":"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",c=A?"text-token-main-surface-primary":"text-token-main-surface-primary-inverse",r=a.formatMessage({id:"ShdqyW",defaultMessage:"Toggle screenshare"});return n.jsx(aA,{"aria-label":r,onClick:()=>t("ControlButton"),disabled:e,icon:o,className:i,iconColor:c})}function ZA({className:A,onClick:e}){const t=Q(),{disconnectPending:a}=QA(),o="bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",i=t.formatMessage({id:"9Mto0a",defaultMessage:"End"});return n.jsx(aA,{disabled:a,onClick:e,icon:a?nA:_e,iconColor:"text-token-main-surface-primary-inverse",className:A??o,"aria-label":t.formatMessage({id:"7/8k4Y",defaultMessage:"End voice mode"}),tooltipPrimaryLabel:i})}function aA(A){const{icon:e,disabled:t,className:a,iconColor:o="text-current",iconSize:i="icon-xl",buttonSize:c="h-16 w-16",tooltipPrimaryLabel:r,tooltipSecondaryLabel:l,...d}=A,[f,m]=s.useState(!1),u=s.useRef(void 0),g=s.useCallback(()=>{const x=window.setTimeout(()=>{m(!0)},He);u.current=x},[]),h=s.useCallback(()=>{clearTimeout(u.current),m(!1)},[]),p=n.jsx(qo,{className:tA(a,c,"overflow-hidden rounded-full border-none p-0.5 text-token-text-primary transition-colors duration-200 ease-in-out hover:text-token-text-secondary"),disabled:t,...d,children:n.jsx(e,{className:tA(i,o)})});return r?n.jsx(lt,{sideOffset:14,label:r,secondaryLabel:l,contentClassName:"flex flex-col items-center justify-center",className:"flex",open:f,side:"top",children:n.jsx("span",{onPointerEnter:g,onPointerLeave:h,children:p})}):p}const qo=y.create(ae),BA={hint:{id:"micMessages.hint",defaultMessage:"Enable microphone access in Settings",description:"Hint to the user to manually enable microphone access for voice mode"},title:{id:"micMessages.title",defaultMessage:"Microphone access required",description:"Title for modal that informs the user that microphone access is required for voice mode"},description_markdown:{id:"micMessages.description_markdown",defaultMessage:"To use voice mode, you'll need to enable your microphone and try again.",description:"Description for modal that informs the user that microphone access is required for voice mode"}},_o=A=>s.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.29289 7.29289C9.68342 6.90237 10.3166 6.90237 10.7071 7.29289L14.7071 11.2929C15.0976 11.6834 15.0976 12.3166 14.7071 12.7071L10.7071 16.7071C10.3166 17.0976 9.68342 17.0976 9.29289 16.7071C8.90237 16.3166 8.90237 15.6834 9.29289 15.2929L12.5858 12L9.29289 8.70711C8.90237 8.31658 8.90237 7.68342 9.29289 7.29289Z",fill:"currentColor"})),Ho=A=>s.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 15.8333V17.1667C4 18.4553 5.04467 19.5 6.33333 19.5C6.70152 19.5 7 19.2015 7 18.8333V14.1667C7 13.7985 6.70152 13.5 6.33333 13.5C5.04467 13.5 4 14.5447 4 15.8333ZM2 12.5C2 6.97715 6.47715 2.5 12 2.5C17.5228 2.5 22 6.97715 22 12.5V17.1667C22 19.5599 20.0599 21.5 17.6667 21.5C16.1939 21.5 15 20.3061 15 18.8333V14.1667C15 12.6939 16.1939 11.5 17.6667 11.5C18.523 11.5 19.3214 11.7484 19.9936 12.1771C19.8242 7.90854 16.3101 4.5 12 4.5C7.68986 4.5 4.17583 7.90854 4.0064 12.1771C4.6786 11.7484 5.47696 11.5 6.33333 11.5C7.80609 11.5 9 12.6939 9 14.1667V18.8333C9 20.3061 7.80609 21.5 6.33333 21.5C3.9401 21.5 2 19.5599 2 17.1667V12.5ZM20 15.8333C20 14.5447 18.9553 13.5 17.6667 13.5C17.2985 13.5 17 13.7985 17 14.1667V18.8333C17 19.2015 17.2985 19.5 17.6667 19.5C18.9553 19.5 20 18.4553 20 17.1667V15.8333Z",fill:"currentColor"}));function zo(A,e,t,a){var o=-1,i=A==null?0:A.length;for(a&&i&&(t=A[++o]);++o<i;)t=e(t,A[o],o,A);return t}var Ko=zo;function $o(A){return function(e){return A?.[e]}}var An=$o,en=An,tn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},on=en(tn),nn=on,sn=nn,an=ie,rn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cn="\\u0300-\\u036f",ln="\\ufe20-\\ufe2f",un="\\u20d0-\\u20ff",dn=cn+ln+un,mn="["+dn+"]",fn=RegExp(mn,"g");function gn(A){return A=an(A),A&&A.replace(rn,sn).replace(fn,"")}var pn=gn,hn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Cn(A){return A.match(hn)||[]}var xn=Cn,vn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function bn(A){return vn.test(A)}var En=bn,ke="\\ud800-\\udfff",kn="\\u0300-\\u036f",Sn="\\ufe20-\\ufe2f",Bn="\\u20d0-\\u20ff",wn=kn+Sn+Bn,Se="\\u2700-\\u27bf",Be="a-z\\xdf-\\xf6\\xf8-\\xff",Mn="\\xac\\xb1\\xd7\\xf7",In="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yn="\\u2000-\\u206f",jn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",we="A-Z\\xc0-\\xd6\\xd8-\\xde",Vn="\\ufe0e\\ufe0f",Me=Mn+In+yn+jn,Ie="['’]",XA="["+Me+"]",Qn="["+wn+"]",ye="\\d+",Rn="["+Se+"]",je="["+Be+"]",Ve="[^"+ke+Me+ye+Se+Be+we+"]",Dn="\\ud83c[\\udffb-\\udfff]",Tn="(?:"+Qn+"|"+Dn+")",Zn="[^"+ke+"]",Qe="(?:\\ud83c[\\udde6-\\uddff]){2}",Re="[\\ud800-\\udbff][\\udc00-\\udfff]",H="["+we+"]",Nn="\\u200d",PA="(?:"+je+"|"+Ve+")",On="(?:"+H+"|"+Ve+")",qA="(?:"+Ie+"(?:d|ll|m|re|s|t|ve))?",_A="(?:"+Ie+"(?:D|LL|M|RE|S|T|VE))?",De=Tn+"?",Te="["+Vn+"]?",Yn="(?:"+Nn+"(?:"+[Zn,Qe,Re].join("|")+")"+Te+De+")*",Fn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ln="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Gn=Te+De+Yn,Jn="(?:"+[Rn,Qe,Re].join("|")+")"+Gn,Wn=RegExp([H+"?"+je+"+"+qA+"(?="+[XA,H,"$"].join("|")+")",On+"+"+_A+"(?="+[XA,H+PA,"$"].join("|")+")",H+"?"+PA+"+"+qA,H+"+"+_A,Ln,Fn,ye,Jn].join("|"),"g");function Un(A){return A.match(Wn)||[]}var Xn=Un,Pn=xn,qn=En,_n=ie,Hn=Xn;function zn(A,e,t){return A=_n(A),e=t?void 0:e,e===void 0?qn(A)?Hn(A):Pn(A):A.match(e)||[]}var Kn=zn,$n=Ko,As=pn,es=Kn,ts="['’]",os=RegExp(ts,"g");function ns(A){return function(e){return $n(es(As(e).replace(os,"")),A,"")}}var ss=ns,as=ss,is=ze,rs=as(function(A,e,t){return A+(t?" ":"")+is(e)}),cs=rs;const ls=$A(cs);function us({conversationId:A}){const e=ft("1426009137")?.value,t=oA(A),a=VA(A),o=z.getCurrentNode(A)?.id,i=ue();return!e||!a?null:n.jsx(U,{conversationId:t??A,parentMessageId:o,status:i})}function U(A){const e=A?.status?.modes,[t,a]=s.useState(!1),[o,i]=s.useState(),c=s.useCallback(d=>{i(d),a(!0)},[]),r=Q(),l=s.useCallback(()=>a(!1),[]);return n.jsxs(n.Fragment,{children:[n.jsx(dt,{contentAlign:"center",triggerButton:n.jsx(U.Trigger,{}),children:e?e.map(d=>{const f=d.default_model_slug;return s.createElement(U.Item,{...A,modelSlug:f,key:d.mode,voiceStatusMode:d,onShowModal:c})}):n.jsx("div",{role:"progressbar","aria-valuetext":r.formatMessage({defaultMessage:"Loading voice modes",id:"voiceModeButton.loadingModes"}),"aria-busy":"true","aria-live":"assertive","aria-valuemin":0,"aria-valuemax":100,children:n.jsx(nA,{"aria-hidden":"true",className:"my-4 min-w-full"})})}),n.jsx(U.Modal,{conversationId:A.conversationId,disabledModeMetadata:o,isOpen:t,onClose:l})]})}U.Modal=function(e){const t=e.disabledModeMetadata?.buttons??[],a=Ee({buttons:t,conversationId:e.conversationId,modelId:gA,onClick:e.onClose}),o=n.jsx(fe,{children:e.disabledModeMetadata?.description_markdown});return n.jsx(se,{title:e.disabledModeMetadata?.title,description:o,isOpen:e.isOpen,onClose:e.onClose,type:"success",primaryButton:a.primary,secondaryButton:a.secondary})};U.Trigger=s.forwardRef(function(e,t){const a=S(o=>o.voiceMode);return n.jsxs(Pt,{ref:t,...e,children:[ls(a)??n.jsx(nA,{}),n.jsx(Ke,{className:"icon-md text-token-text-tertiary"})]})});U.Item=function({conversationId:e,modelSlug:t,parentMessageId:a,voiceStatusMode:o,onShowModal:i}){const{disabled_mode_metadata:c,mode:r}=o,{startVoiceMode:l}=TA(),d=oA(e),f=s.useCallback(async()=>{c?i(c.disabled_message):l(pA({serverThreadId:d,modelSlug:t,parentMessageId:a,isAdvancedMode:r==="advanced"&&!c,eventSource:"voice_mode_picker",clientThreadId:e,gizmoId:z.getGizmoId(e)}))},[e,c,r,t,i,a,d,l]);return n.jsx(mt.Item,{onClick:f,children:n.jsxs("div",{children:[o.display_name,n.jsx("div",{className:"text-xs text-token-text-tertiary",children:o.description})]})})};function ds({conversationId:A}){const e=S(t=>t.voiceSessionId);return n.jsx("div",{className:"relative h-full",children:n.jsx(y.div,{className:"absolute hidden h-full max-w-[500px] overflow-y-hidden rounded-xl border-l border-l-token-sidebar-surface-secondary bg-token-main-surface-secondary pt-4 shadow-inner md:block",initial:{opacity:0,x:520,width:"0px"},animate:{opacity:1,x:0,width:"500px",left:"-520px"},exit:{opacity:0,x:520,width:"0px",left:"0px"},transition:{type:"tween"},children:n.jsx(G,{children:n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex w-full items-center justify-center",children:n.jsx(us,{conversationId:A})}),n.jsx("div",{className:"p-4 py-2 text-sm",children:n.jsx(D,{name:"Voice Session ID",text:e??"n/a"})}),n.jsxs("div",{className:"flex h-full w-full flex-col flex-nowrap gap-4",children:[n.jsx("div",{className:"px-4",children:n.jsxs("div",{className:"flex flex-col flex-nowrap gap-4",children:[n.jsx(ms,{}),n.jsx(gs,{})]})}),n.jsx(fs,{})]})]})})})})}function ms(){const A=S(o=>o.server.messages.filter(i=>i.type===jt.Performance)),e=A[A.length-1],t=s.useCallback(o=>o>=1e3?`${(o/1e3).toFixed(2)}s`:`${o.toFixed(1)}ms`,[]);if(!e)return null;const a=[...e.payload.metrics].sort((o,i)=>o.name.localeCompare(i.name));return n.jsx(Ze,{title:"Performance",children:n.jsx("div",{className:"flex flex-col flex-nowrap gap-1",children:a.map(o=>n.jsx(D,{name:o.name,text:t(o.ms)},o.name))})})}function fs(){const A=S(e=>e.server.messages);return n.jsxs(n.Fragment,{children:[n.jsx("h3",{className:"px-4 py-2 text-lg font-semibold text-token-text-secondary",children:"Messages"}),n.jsx("div",{className:"grow overflow-hidden",children:n.jsx(qt,{children:n.jsx(y.ul,{className:"pointer-events-none flex w-full flex-col gap-4 pb-24 pt-4",initial:"initial",animate:"animate",exit:"exit",variants:Ne,transition:{delayChildren:.25,staggerChildren:.05},children:A.map((e,t)=>n.jsx(Cs,{index:t,message:e},t))})})})]})}function gs(){const A=S(r=>r.server.connectionState),e=S(r=>r.dev.room),[t,a]=s.useState("Unknown"),o=e?.localParticipant,i=e?.numParticipants??"Unknown",c=e?.activeSpeakers??[];return s.useEffect(()=>{if(o){const r=l=>{a(l)};return o.on("connectionQualityChanged",r),()=>{o.off("connectionQualityChanged",r)}}},[o]),n.jsxs(Ze,{title:"Room",open:!1,children:[n.jsx(D,{name:"Connection Quality",text:String(t)}),n.jsx(D,{name:"Connection State",text:String(A)}),n.jsx(D,{name:"Participants",text:i}),n.jsx(D,{name:"Speakers",text:c.length}),n.jsx(ps,{})]})}function ps(){const A=S(f=>f.dev.room),[e,t]=s.useState(null),[a,o]=s.useState(null),[i,c]=s.useState(null),r=A?.getActiveDevice("audioinput"),l=A?.getActiveDevice("audiooutput"),d=A?.getActiveDevice("videoinput");return s.useEffect(()=>{async function f(){const m=await fA.getLocalDevices("audioinput"),u=await fA.getLocalDevices("audiooutput"),g=await fA.getLocalDevices("videoinput"),h=m.find(C=>C.deviceId===r),p=u.find(C=>C.deviceId===l),x=g.find(C=>C.deviceId===d);t(h?.label??"Unknown"),o(p?.label??"Unknown"),c(x?.label??null)}f()},[r,l,d]),n.jsxs(n.Fragment,{children:[n.jsx(hs,{text:"Devices"}),i?n.jsx(D,{icon:$e,name:"Video Input",text:i}):null,n.jsx(D,{icon:At,name:"Audio Input",text:e??"Unknown"}),n.jsx(D,{icon:Ho,name:"Audio Output",text:a??"Unknown"})]})}function Ze({title:A,titleClassName:e,children:t,open:a}){const[o,i]=s.useState(a??!0);return n.jsxs("div",{children:[n.jsxs("h3",{className:tA("flex cursor-pointer items-center py-2 text-lg font-semibold text-token-text-secondary",e),onClick:()=>i(!o),children:[n.jsx("span",{children:A}),n.jsx("span",{className:"ml-2",children:o?n.jsx(te,{className:"h-4 w-4"}):n.jsx(_o,{className:"h-4 w-4"})})]}),n.jsx(G,{initial:!1,children:o&&n.jsx(y.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{height:"auto",opacity:1},collapsed:{height:0,opacity:0}},transition:{duration:.3,ease:"easeInOut"},layout:!0,children:t},"content")})]})}function hs({text:A}){return n.jsx("h4",{className:"py-2 text-sm font-semibold",children:A})}function D(A){return n.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-2",children:[n.jsx("span",{className:"opacity-85",children:A.icon?n.jsx(A.icon,{className:"h-[0.75rem] w-[0.75rem]"}):n.jsxs("span",{className:"text-sm",children:[A.name,":"]})}),A.content??n.jsx("span",{className:"line-clamp-1 rounded-lg bg-token-main-surface-tertiary p-0.5 px-1 font-mono text-xs",children:A.text})]})}function Cs({index:A,message:e}){const[t,a]=s.useState(!1),o=Q();let i=null;switch(e.source){case"remote":i=tt;break;case"local":i=et;break}return n.jsx(y.div,{className:"w-full border-t border-token-main-surface-tertiary p-4",variants:Ne,children:n.jsxs("div",{className:"flex w-full flex-col gap-2 rounded-lg bg-token-main-surface-secondary",children:[n.jsxs("div",{className:"font-mono text-[0.65rem] font-semibold text-token-text-secondary",children:[n.jsxs("div",{className:"flex w-full flex-row flex-nowrap items-center justify-between",children:[n.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[n.jsx(i,{className:"h-3 w-3 text-token-text-secondary"}),n.jsx("span",{children:` | ${A+1} | ${o.formatDate(e.timestamp,{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:2})}`})]}),n.jsx("div",{className:"flex flex-row flex-nowrap items-center gap-2",children:n.jsx(ae,{className:"rounded-full p-0.5",color:"ghost",size:"small",onClick:()=>a(c=>!c),children:n.jsx(te,{className:`transform transition-transform ${t?"rotate-180":""}`})})})]}),n.jsx("div",{className:"mt-1 text-xs font-bold",children:e.type})]}),n.jsx(G,{children:t?n.jsx(y.pre,{initial:{opacity:0,transform:"blur(4px)"},animate:{opacity:1,transform:"blur(0px)"},exit:{opacity:0,transform:"blur(4px)"},className:"overflow-x-auto rounded-md bg-token-main-surface-tertiary p-2 text-xs text-token-text-secondary",children:JSON.stringify(e.payload,null,2)}):null})]})})}const Ne={hidden:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100}};function xs({children:A}){const{isVideoEnabled:e}=RA(),{isScreenshareEnabled:t}=DA(),a=e||t;return n.jsx(G,{mode:"wait",children:a?n.jsx("div",{className:"flex h-full w-full flex-nowrap items-center",children:e?n.jsx(vs,{}):n.jsx(bs,{})}):n.jsx(y.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:A},"children")})}function vs(){const{isVideoEnabled:A,isStartingVideo:e,toggleVideo:t}=RA(),o=sA([W.Source.Camera]).find(c=>c.participant.isLocal),i=A&&!e&&o;return s.useEffect(()=>{const c=o?.publication?.track;if(c){const r=()=>{t("Browser Video Controls")};return c.on("ended",r),()=>{c.off("ended",r)}}},[o,t]),n.jsx(G,{children:i&&n.jsx(Oe,{children:n.jsxs("div",{className:"aspect-w-16 aspect-h-9 group relative max-h-[95%] w-fit max-w-[60%] overflow-hidden rounded-3xl shadow-md",children:[n.jsx("div",{className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-90",children:n.jsx(ZA,{onClick:()=>t("StopButton"),className:"bg-gray-900 bg-opacity-20 backdrop-blur-lg hover:bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-20 dark:backdrop-blur-lg dark:hover:bg-opacity-30"})}),n.jsx(Ce,{className:"h-full w-full object-contain",trackRef:o})]})},"camera-renderer")})}function bs(){const{isScreenshareEnabled:A,isScreenshareStarting:e,toggleScreenShare:t}=DA(),o=sA([W.Source.ScreenShare]).find(c=>c.participant.isLocal),i=A&&!e&&o;return s.useEffect(()=>{const c=o?.publication?.track;if(c){const r=()=>{t("Browser ScreenShare Controls")};return c.on("ended",r),()=>{c.off("ended",r)}}},[o,t]),n.jsx(G,{children:i&&n.jsx(Oe,{children:n.jsxs("div",{className:"aspect-w-16 aspect-h-9 group relative max-h-[95%] w-fit max-w-[60%] overflow-hidden rounded-3xl shadow-md",children:[n.jsx("div",{className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-90",children:n.jsx(ZA,{onClick:()=>t("StopButton"),className:"bg-gray-900 bg-opacity-20 backdrop-blur-lg hover:bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-20 dark:backdrop-blur-lg dark:hover:bg-opacity-30"})}),n.jsx(Ce,{className:"h-full w-full object-contain",trackRef:o})]})},"screenshare-renderer")})}function Oe({children:A,key:e}){return n.jsx(y.div,{className:"flex h-full w-full flex-col items-center justify-center gap-2 bg-token-main-surface-primary",initial:{opacity:0,transform:"blur(12px)",scale:.75},animate:{opacity:1,transform:"blur(0px)",scale:1},exit:{opacity:0,transform:"blur(12px)",scale:.75},transition:{duration:.2},children:A},e)}const uA=(A,e)=>{const[t,a]=s.useState(A===e?performance.now():0),o=s.useRef(e);s.useEffect(()=>{o.current!==e&&A===e&&a(performance.now()),o.current=e},[e,A]);const i=s.useCallback(()=>{a(0)},[]);return[A===e?1:0,t,i]},dA=([A,e,t],a=500)=>{const[o,i]=s.useState(A),c=s.useRef(A),r=s.useRef(void 0),l=s.useCallback((d,f,m)=>{const u=g=>{const h=Math.min((g-d)/a,1),p=f+h*(m-f);i(p),h<1&&(r.current=requestAnimationFrame(u))};r.current=requestAnimationFrame(u)},[a]);return s.useEffect(()=>{if(c.current!==A){c.current=A,r.current&&cancelAnimationFrame(r.current);const d=o,f=A;l(performance.now(),d,f)}},[l,o,A]),[o,e/1e3,t]},HA=A=>{const[e,t]=s.useState({audioData:[0,0,0,0],cumulativeAudioData:[0,0,0,0]}),a=s.useRef([0,0,0,0]),o=s.useRef(void 0),i=s.useRef(performance.now()),{bandMagnitudes:c,cumulativeMagnitude:r}=Zt(A,{bands:3,bins:1,gainMultipliers:[10,1,1]});a.current=[...c,r].flat();const l=s.useCallback(()=>{const d=performance.now(),f=(d-i.current)/1e3;i.current=d;const m=a.current,{audioData:u,cumulativeAudioData:g}=e,h=Nt({deltaTimeS:f,audioDataRaw:m,prevAudioData:u,prevCumulativeAudioData:g});t(h)},[e]);return s.useEffect(()=>(o.current||(o.current=window.setInterval(l,me)),()=>{clearInterval(o.current),o.current=void 0}),[l]),e};function zA({className:A}){return n.jsx(ys,{className:A})}const Es=1.55,ks=1.4,Ss="voice-wav",Bs="shout",ws="User",Ms={bands:4,loPass:0,hiPass:400},KA=[300,300];function Is(){const A=gt(),e=S(g=>g.voiceMode==="advanced"),t=sA([W.Source.Microphone]),a=t.find(g=>g.publication.trackName===Ss),o=t.find(g=>g.publication.trackName===Bs);let i=FA(o?.publication.audioTrack,Ms);i.length===0&&(i=[0,0,0,0]),i.map(g=>g*ks);let c=HA(o?.publication.audioTrack),r=HA(a?.publication.audioTrack);const l=c.audioData.map((g,h)=>{const p=r.audioData[h];return g>0&&p>0?(g+p)/2:g>0?g:p}),d=c.cumulativeAudioData.map((g,h)=>{const p=r.cumulativeAudioData[h];return g>0&&p>0?(g+p)/2:g>0?g:p}),f=S(g=>g.server.remoteState),m=t.find(g=>g.participant.identity===ws),u=(FA(m,{bands:1,loPass:0,hiPass:400})[0]??0)*Es;return{remoteState:f,userVolume:u,isAdvanced:e,avgMag:l,cumulativeAudio:d,isDarkMode:A,standardBloopVolumes:i}}function ys({className:A}){const{remoteState:e,userVolume:t,isAdvanced:a,avgMag:o,cumulativeAudio:i,isDarkMode:c,standardBloopVolumes:r}=Is(),[l,d]=s.useState(KA),{canvasSizeRef:f,handleCanvasSizeUpdate:m}=ot(KA),u=s.useRef(void 0),g=s.useCallback(I=>{d([I.width,I.height])},[]),h=s.useRef([0,0,0,0]);s.useEffect(()=>{e===L.Connecting&&(h.current=[0,0,0,0])},[e]);const p=s.useRef(performance.now());s.useEffect(()=>{const I=performance.now();e===L.Speaking&&I-p.current>50&&(p.current=I,h.current=h.current.map(($,AA)=>$+o[AA]))},[e,o]);const[x,C]=dA(uA(L.Listening,e)),[j,w]=dA(uA(L.Speaking,e)),[E,M]=dA(uA(L.Thinking,e)),[b,k]=dA(uA(L.Halted,e)),[B,Z]=s.useState(performance.now()/1e3);s.useEffect(()=>{const I=setInterval(()=>{Z(performance.now()/1e3)},me);return()=>clearInterval(I)},[]);const R=s.useMemo(()=>performance.now()/1e3,[]),[iA,X]=s.useState(1e5),P=s.useRef(e);s.useEffect(()=>{e===L.Connecting?X(1e5):P.current===L.Connecting&&X(B),P.current=e},[e,B]);const J=Ot(a),N=a?o:r,K=x===1||j===1,rA=Yt({viewport:l,canvasSize:f.current,shouldMeasurePerf:K,source:"VoiceMode"}),hA=Ft({shouldCalibrate:K,viewport:l,initialScale:1});return u.current={time:B-R,micLevel:t,stateListen:x,listenTimestamp:Math.max(C-R,0),stateThink:E,thinkTimestamp:Math.max(M-R,0),stateSpeak:j,speakTimestamp:Math.max(w-R,0),readyTimestamp:iA-R,stateHalt:b,haltTimestamp:Math.max(k-R,0),touchDownTimestamp:0,touchUpTimestamp:0,stateFailedToConnect:0,failedToConnectTimestamp:0,avgMag:N,cumulativeAudio:i??h.current,isNewBloop:!0,isAdvancedBloop:a,bloopColorMain:Array.from(J.bloopColorMain),bloopColorLow:Array.from(J.bloopColorLow),bloopColorMid:Array.from(J.bloopColorMid),bloopColorHigh:Array.from(J.bloopColorHigh),isDarkMode:c,screenScaleFactor:window.devicePixelRatio,viewport:l,silenceAmount:0,silenceTimestamp:0,fadeBloopWhileListening:!1},n.jsx(Lt,{className:tA("flex items-center justify-center",A),variablesRef:u,onViewportUpdate:g,textureImage:Gt,textureName:"uTextureNoise",onGlAvailable:rA,onCanvasSizeUpdate:m,scale:hA,GLUniformsSetter:Jt,vert:Wt,frag:Ut})}const js=A=>s.createElement("svg",{width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},s.createElement("path",{d:"M13.9167 2.83333C12.628 2.83333 11.5833 3.878 11.5833 5.16667C11.5833 6.45533 12.628 7.5 13.9167 7.5C15.2053 7.5 16.25 6.45533 16.25 5.16667C16.25 3.878 15.2053 2.83333 13.9167 2.83333ZM9.39702 4C9.91507 1.98723 11.7422 0.5 13.9167 0.5C16.0911 0.5 17.9183 1.98723 18.4363 4H20.3333C20.9777 4 21.5 4.52233 21.5 5.16667C21.5 5.811 20.9777 6.33333 20.3333 6.33333H18.4363C17.9183 8.3461 16.0911 9.83333 13.9167 9.83333C11.7422 9.83333 9.91507 8.3461 9.39702 6.33333H1.66667C1.02233 6.33333 0.5 5.811 0.5 5.16667C0.5 4.52233 1.02233 4 1.66667 4H9.39702ZM8.08333 14.5C6.79467 14.5 5.75 15.5447 5.75 16.8333C5.75 18.122 6.79467 19.1667 8.08333 19.1667C9.372 19.1667 10.4167 18.122 10.4167 16.8333C10.4167 15.5447 9.372 14.5 8.08333 14.5ZM3.56369 15.6667C4.08174 13.6539 5.90885 12.1667 8.08333 12.1667C10.2578 12.1667 12.0849 13.6539 12.603 15.6667H20.3333C20.9777 15.6667 21.5 16.189 21.5 16.8333C21.5 17.4777 20.9777 18 20.3333 18H12.603C12.0849 20.0128 10.2578 21.5 8.08333 21.5C5.90885 21.5 4.08174 20.0128 3.56369 18H1.66667C1.02233 18 0.5 17.4777 0.5 16.8333C0.5 16.189 1.02233 15.6667 1.66667 15.6667H3.56369Z",fill:"currentColor"})),Vs=({conversationId:A})=>{const e=sA(),[t,a]=s.useState(!1),[o,i]=s.useState(!1),{voiceName:c}=ee(),r=s.useCallback(()=>{e&&e.length>0&&e.forEach(m=>{const{publication:u}=m;u.audioTrack instanceof yA?(i(u.audioTrack.isMuted),u.audioTrack.mute()):u.audioTrack instanceof IA&&u.audioTrack.setMuted(!0)})},[e]),l=s.useCallback(()=>{e&&e.length>0&&e.forEach(m=>{const{publication:u}=m;u.audioTrack instanceof yA?o||u.audioTrack.unmute():u.audioTrack instanceof IA&&u.audioTrack.setMuted(!1)})},[e,o]),d=()=>{T.voiceSelectionShown.click({voice:c}),r(),a(!0)},f=()=>{l(),a(!1)};return n.jsxs("div",{className:"relative h-[40px] w-[40px]",children:[n.jsx(aA,{onClick:d,icon:js,iconColor:"text-token-text-secondary",className:"h-[40px] w-[40px] bg-transparent hover:bg-black/10 active:bg-black/20 dark:bg-transparent dark:hover:bg-white/5 dark:active:bg-white/10",iconSize:"icon-md"}),t&&n.jsx(Xt,{conversationId:A,onClose:f})]})};class Qs extends Worker{constructor(e,t){const a=String(e);super(a.includes("://")&&!a.startsWith(location.origin)?URL.createObjectURL(new Blob([`import("${a}")`],{type:"text/javascript"})):e,t)}}function Rs(A={}){const[e,t]=s.useState(!1),[a,o]=s.useState(!1),[i,c]=s.useState(!1);let r=Vt().microphoneTrack;const[l,d]=s.useState();A.trackRef&&(r=A.trackRef.publication);const f=s.useCallback(async m=>{if(m){const{KrispNoiseFilter:u,isKrispNoiseFilterSupported:g}=await pt(async()=>{const{KrispNoiseFilter:h,isKrispNoiseFilterSupported:p}=await import("./gzssobpk1wy3vqrp.js");return{KrispNoiseFilter:h,isKrispNoiseFilterSupported:p}},[]);if(!g()){console.warn("Krisp noise filter is not supported in this browser");return}l||d(u(A.filterOptions))}t(u=>(u!==m&&o(!0),m))},[]);return s.useEffect(()=>{var m;if(r&&r.track instanceof yA&&l){const u=r.track.getProcessor();u&&u.name==="livekit-noise-filter"?(o(!0),u.setEnabled(e).finally(()=>{o(!1),c(e)})):!u&&e&&(o(!0),(m=r?.track)==null||m.setProcessor(l).then(()=>l.setEnabled(e)).then(()=>{c(!0)}).catch(g=>{c(!1),console.error(g)}).finally(()=>{o(!1)}))}},[e,r,l]),{setNoiseFilterEnabled:f,isNoiseFilterEnabled:i,isNoiseFilterPending:a,processor:l}}const Ds=s.memo(function(){const e=ht("989226566").value,{setNoiseFilterEnabled:t}=Rs();return s.useEffect(()=>{t(e)},[e,t]),null}),Ts=new Qs(new URL("{{.assetPrefix}}/assets/livekit-client.e2ee.worker-DK0iMXIf.js",import.meta.url),{type:"module"}),Zs=s.memo(function({children:e}){const t=s.useRef({keyProvider:new Qt}).current,[a,o]=s.useState(!1),{token:i,url:c,e2eeKey:r}=S(m=>m.credentials),l=_t(),d=S(m=>m.isVoiceModeActive),f=S(m=>m.audioInputDevice?.deviceId);return s.useEffect(()=>{const m=i&&c&&r;!a&&m?t.keyProvider.setKey(r).then(()=>{o(!0)}):a&&!m&&o(!1)},[i,c,r,a,t]),d?n.jsxs(Ao,{...l,connect:!0,token:i??void 0,serverUrl:c??void 0,audio:{deviceId:{ideal:f,exact:f},noiseSuppression:!0,echoCancellation:!0},options:{e2ee:{keyProvider:t.keyProvider,worker:Ts}},children:[e,a&&i&&c&&n.jsx(Rt,{}),a&&i&&c&&n.jsx(Mo,{}),a&&i&&c&&n.jsx(Ds,{})]}):null});function ea({conversationId:A,currentModelId:e,isActiveWindow:t}){const[a,o]=s.useState(!1),i=S(u=>u.isVoiceModeActive),c=S(u=>u.server.voiceConnectionQuality),r=nt(),l=S(u=>u.screenshare!=null),d=S(u=>u.video!=null),f=Q(),m=xe({conversationId:A});return Ct(m),s.useEffect(()=>{if(!t)return;const u=new Ro;return i?u.enable():u.disable(),()=>{u.disable()}},[i,t]),t&&n.jsxs(Zs,{children:[n.jsx(G,{children:i?n.jsx(y.div,{className:"fixed left-0 top-0 z-50 flex h-full w-full flex-col bg-token-main-surface-primary",initial:"hidden",animate:"visible",exit:"hidden",variants:mA,children:n.jsxs(y.div,{className:"relative h-full w-full",variants:mA,children:[n.jsxs(y.div,{variants:mA,className:"flex h-full w-full flex-col justify-between gap-6",children:[n.jsxs(y.div,{className:"relative mt-6 flex w-full justify-center",children:[n.jsx("div",{className:"flex w-full items-center justify-center",children:(l||d)&&n.jsx(zA,{className:"h-16 w-16"})}),n.jsx("div",{className:"mr-4",children:n.jsx(Vs,{conversationId:A})})]}),n.jsxs("div",{className:"flex h-full min-h-0 items-center justify-center",children:[n.jsx(xs,{children:n.jsx(zA,{className:"h-max min-h-bloop w-max min-w-bloop"})}),n.jsx(G,{children:a?n.jsx(ds,{conversationId:A}):null})]}),n.jsx(y.div,{className:"mb-6 flex justify-center",children:n.jsx(Jo,{conversationId:A,currentModelId:e})})]}),n.jsx(y.div,{className:"absolute bottom-0 right-0 flex w-auto items-center justify-end p-4",variants:mA,children:r?n.jsx(st,{onClick:()=>o(u=>!u),icon:at}):null})]})}):null}),c===de.Poor&&n.jsx("div",{className:"absolute left-1/2 top-6 z-50 -translate-x-1/2 transform",children:n.jsx("div",{className:"inline-flex flex-col items-center rounded-full border border-token-border-light bg-token-main-surface-primary px-6 py-3",children:n.jsx("span",{className:"text-token-text-secondary",children:f.formatMessage({id:"YE2Eng",defaultMessage:"Poor connection"})})})})]})}const mA={hidden:{opacity:0,transform:"blur(4px)"},visible:{transform:"blur(0px)",opacity:1},exit:{opacity:0,transform:"blur(4px)"}};export{ea as VoiceModeLayout};
//# sourceMappingURL=hcfj5b2tlm29kua7.js.map
