import{j as e,M as r,d as X,r as S,ac as k,e as G,ad as V,R as N}from"./i8w88cc8b3gds516.js";import{aW as v,P as g,bn as U,dd as W,dp as Y,an as x,cD as Z,cE as q,cw as K,cy as J,f as Q,ds as $,bm as m,bU as ee,e6 as ae,e4 as p,ar as w}from"./eh26o1l35t2fnjj4.js";import{eM as te,bd as B,be as se,fU as j,U as d,L as ne,eK as ie,fV as M,a1 as re,fW as oe,fX as le,at as de,fY as ce,A as ue,fZ as fe,ft as ge,p as xe,R as he}from"./jg63sxiyqeyvfv9f.js";import{U as be}from"./53nax822pkd7iwth.js";import{N as A,e as me}from"./dyuarriie396ezxd.js";function Ee({onClick:t,className:s,...a}){return e.jsx(me,{onClick:t,className:x(s,"flex-grow overflow-hidden"),...a})}function Pe({onNewChatButtonClick:t}){const{isUnauthenticated:s,isLoading:a}=v();return a||!s?null:e.jsx(A,{className:"mr-3",onClick:()=>{g.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function ze({onNewChatButtonClick:t}){const{isUnauthenticated:s,isLoading:a}=v(),n=te();return a?null:s?n?e.jsx(Se,{}):e.jsx(pe,{}):e.jsx(A,{onClick:()=>{g.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function pe(){const t=B(),s=se(R.signUpButtonText);return e.jsx(U,{as:"button",size:"small",color:"primary",onClick:()=>{t({authType:"signup",callback:a=>{g.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:a})}})},children:e.jsx(r,{...s})})}function Se(){const t=B();return e.jsx(U,{as:"button",size:"small",color:"primary",onClick:()=>{t({authType:"login",callback:s=>{g.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:s})}})},"data-testid":"mobile-login-button",children:e.jsx(r,{...W.logInButtonText})})}function ve({onClick:t}){return e.jsxs("button",{type:"button",className:"inline-flex rounded-md hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:t,"data-testid":"open-sidebar-button",children:[e.jsx("span",{className:"sr-only",children:e.jsx(r,{...R.openSidebar})}),e.jsx(ne,{className:"icon-lg mx-2 text-token-text-secondary"})]})}const je=({onClickOpenSidebar:t,children:s,showNavSidebar:a,leftContent:n,rightContent:c,bottomContent:u})=>{const f=j(l=>l.activeSidebar),o=X(),h=o.pathname+o.search+o.hash;return S.useEffect(()=>{f==="popover-nav"&&d.setActiveSidebar(!1)},[h]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"draggable sticky top-0 z-10 flex min-h-[60px] items-center justify-center border-transparent bg-token-main-surface-primary pl-0 md:hidden",children:[(a||n)&&e.jsxs("div",{className:"no-draggable absolute bottom-0 left-0 top-0 ml-3 inline-flex items-center justify-center",children:[a&&e.jsx(ve,{onClick:t}),n]}),e.jsx("div",{className:"no-draggable",children:s}),c&&e.jsx("div",{className:"no-draggable absolute bottom-0 right-0 top-0 mr-3 inline-flex items-center justify-center",children:c})]}),u&&e.jsx("div",{className:"no-draggable flex w-full items-center justify-center bg-token-main-surface-primary md:hidden",children:u})]})};function ye({isPopoverOnDesktop:t=!1,isExpanded:s=!1,children:a}){const n=Y();return e.jsxs(e.Fragment,{children:[!n||t?e.jsx(Ne,{children:a}):null,e.jsx(Ce,{isExpanded:!t&&s,children:a})]})}function Ce({isExpanded:t,children:s}){const a=S.useRef(null);return e.jsx(k.div,{className:x("z-[21] flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary max-md:!w-0"),ref:a,initial:!1,animate:{width:t?"260px":0,transition:{type:"spring",bounce:.12,duration:.64}},onAnimationStart:()=>{a.current&&(a.current.style.visibility="visible")},onAnimationComplete:()=>{a.current&&(t||(a.current.style.visibility="hidden"))},children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col",children:s})})})}function Ne({children:t}){const s=j(a=>a.activeSidebar);return e.jsx(Z,{open:s==="popover-nav",onOpenChange:a=>{a||d.setActiveSidebar(!1)},children:e.jsxs(q,{children:[e.jsx(K,{className:"fixed inset-0 z-10 bg-gray-50/50 radix-state-open:animate-show dark:bg-black/50"}),e.jsx(J,{className:"fixed left-0 top-0 z-50 h-full max-w-xs border-r border-gray-200 bg-token-sidebar-surface-primary shadow-[0_0_64px_0_rgba(0,0,0,0.07)] focus:outline-none radix-state-closed:animate-sidebarHide radix-state-open:animate-sidebarShow dark:border-gray-800",children:t})]})})}const R=Q({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}}),we=()=>{const{openSettings:t}=ie(),s=ee("3376455464")?.value,a=G();return e.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[e.jsx(M,{icon:re,onClick:()=>{oe(a),d.closeActiveSidebar()},children:e.jsx(r,{id:"0FupYP",defaultMessage:"New chat"})}),e.jsx("div",{className:"flex grow items-center justify-center",children:e.jsx(be,{})}),e.jsxs($,{contentClassName:"w-[298px]",triggerButton:e.jsx(M,{icon:le,children:e.jsx(r,{id:"y4Lkp7",defaultMessage:"Settings and more"})}),children:[e.jsx(m.Item,{onClick:()=>t(),icon:de,children:e.jsx(r,{id:"HrRLkZ",defaultMessage:"Settings"})}),s&&e.jsx(m.Item,{icon:ce,onClick:()=>{d.openModal(ue.ReportConversation)},children:e.jsx(r,{id:"thread.report.0",defaultMessage:"Report illegal content"})}),e.jsx(m.Separator,{}),e.jsx(fe,{})]})]})};function Me({isExpanded:t,children:s}){const a=S.useRef(null);return e.jsx(V,{children:e.jsx(k.div,{className:"z-[1] flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary max-md:!w-0",ref:a,initial:!1,animate:{width:t?"400px":0,transition:{type:"spring",bounce:.12,duration:.3}},onAnimationStart:()=>{a.current&&(a.current.style.visibility="visible")},onAnimationComplete:()=>{a.current&&(t||(a.current.style.visibility="hidden"))},children:e.jsx("div",{className:x("absolute h-full w-[400px]",!t&&"pointer-events-none"),children:e.jsx("div",{className:"flex h-full flex-col",children:s})})})})}function T({children:t,hideNavigation:s=!1,mobileHeaderContent:a,mobileHeaderLeftContent:n,mobileHeaderRightContent:c,mobileHeaderBottomContent:u,sidebar:f,threadFlyout:o,forceOpenDesktopSidebar:h=!1}){const{isUnauthenticated:l}=v(),[L,E]=j(i=>[i.activeStageSidebar,i.activeSidebar]),P=ae(),z=p("searchSources"),I=p("summarizer"),H=p("retrievalResults"),O=ge(),y=[];let C=null;N.Children.forEach(t,i=>{N.isValidElement(i)&&(i.type===T.Sidebars?C=i:y.push(i))});const b=!l&&!s&&f!=null,F=!s&&(b||l),D=xe()&&!!I,_=P&&(!!z||D||!!H);return e.jsxs("div",{className:x("relative flex h-full w-full overflow-hidden transition-colors",E!=="popover-nav"&&"z-0"),children:[b&&e.jsx(ye,{isExpanded:h||!O,isPopoverOnDesktop:L,children:l?e.jsx(we,{}):f}),e.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[F&&e.jsxs(w,{children:[e.jsx(he,{}),e.jsx(je,{onClickOpenSidebar:()=>d.togglePopoverNavSidebar(),showNavSidebar:b,leftContent:n,rightContent:c,bottomContent:u,children:a})]}),e.jsx("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:y})]}),e.jsx(w,{children:e.jsx(Me,{isExpanded:_,children:o})}),C]})}function ke({children:t}){return e.jsx(e.Fragment,{children:t})}T.Sidebars=ke;export{T as S,Pe as a,ze as b,Ee as c};
//# sourceMappingURL=cty1v3jstgrcswrf.js.map
