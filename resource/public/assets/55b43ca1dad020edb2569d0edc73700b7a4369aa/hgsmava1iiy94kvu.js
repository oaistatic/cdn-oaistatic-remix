import{r as d,c as E,j as e,ac as j,ad as Y,u as ie,M}from"./i8w88cc8b3gds516.js";import{ai as $,X as re,dv as I,S as b,P as _,j as w,co as le,bn as v,f$ as ce,y as de,fk as ue,W as pe,K as ge,Y as me,B as fe,$ as he,f as xe,aa as z,bT as ye,h as H,eD as be,r as _e}from"./eh26o1l35t2fnjj4.js";import{bV as we,bW as G,n as K,bX as X,bY as Se,Y as Me,bZ as ve,b_ as ke,b$ as V,c0 as je,c1 as Ee,I as Ce,bp as Ne,a8 as Te,c2 as Pe,c3 as De,c4 as Ie,X as Ue,c5 as Le,c6 as Ae}from"./jg63sxiyqeyvfv9f.js";import{a as Fe}from"./dyuarriie396ezxd.js";import{C as qe}from"./csvcabmbpwfvn88d.js";import"./ln72qaf6x6k87xpg.js";import"./ctlsvvj6folqh10x.js";import"./hlm6hsp0qis3d7zg.js";import"./j14akxnqigsmgi7w.js";import"./h5ki4u1sjcr6cdl0.js";import"./e7ldcb1pybd2xac9.js";import"./ft5z2r2wosrho43b.js";import"./jzhplvlpjjzcf6w8.js";function Oe(t,o){const{data:i,isLoading:r,isSuccess:p,isError:g}=ie({queryKey:["onboardingSteps",t,o],queryFn:()=>z.createOnboardingSteps(void 0,t,o)});return{steps:i?.steps??[],isLoading:r,isSuccess:p,isError:g}}function C({children:t,className:o}){return e.jsx(j.div,{className:o,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.25},exit:{opacity:0,y:-10},children:t})}function We({isFirstStep:t,userName:o}){return e.jsx(C,{children:e.jsx("h1",{className:"mb-2 text-3xl font-medium leading-9 text-token-text-primary",children:e.jsx(M,{...t?a.preparingOnboardingExperience:a.allSetLetMeShowYouAroundWithoutName,values:{name:o,nextLine:i=>e.jsx("span",{className:"block",children:i})}})})})}function Re({setIsInWelcomePage:t}){const o=G();return d.useEffect(()=>{o&&setTimeout(()=>{t(!1)},2500)},[o,t]),o?e.jsx(C,{children:e.jsx("h1",{className:"mb-2 text-3xl font-medium leading-9 text-token-text-primary",children:e.jsx(M,{...a.imChaggptNiceToMeetYou})})}):null}function He(t){const o=X(),i=E(),r=de(),p=Se(t);let g=Me(t);const x=ve(p,g),s=ke(p,g);return d.useCallback(async l=>{const m="text/plain",n=new Blob([l],{type:m}),f=new File([n],"My_File.txt",{type:m});return V.uploadFile(o,je(f),f,Ee.Retrieval,s,i,r,void 0,x?.attachments)},[o,i,r,s,x?.attachments])}function it({clientThreadId:t,setClientThreadId:o}){const[i,r]=d.useState(!0),{isOpen:p,setIsOpen:g,markAsViewed:x}=we(),[s,l]=d.useState(0),[m,n]=d.useState(new Set(["usage_question"])),[f,k]=d.useState([]),[y,N]=d.useState(),[U,L]=d.useState(!1),{steps:h,isLoading:T,isError:P}=Oe(U?f:[],U?y:void 0),Z=G(),A=$e({clientThreadId:t,setClientThreadId:o}),F=He(t),{createNewThread:q}=K({clientThreadId:t,setClientThreadId:o}),J=$(t),O=re(t,J),{layer:ee}=I("717266490"),te=ee.get("keep_onboarding_after_dismiss",!1),W=E();d.useEffect(()=>{p&&(b.logEvent("chatgpt_onboarding_flow_shown"),_.logEvent(w.onboardingShown))},[p]),d.useEffect(()=>{P&&(x(),b.logEvent("chatgpt_onboarding_flow_error"),_.logEvent(w.onboardingError))},[P,x]),d.useEffect(()=>{if(!(T||!h[s])&&!m.has(h[s].step_type)){n(S=>new Set([...S,h[s].step_type]));const u=h[s].step_prompt;u&&(A({stepPrompt:u}),h[s].step_type==="file_upload"&&h[s].additional_info&&F(h[s].additional_info))}},[s,T,m,A,h,F]);const c=h[s];if(d.useEffect(()=>{const u=c?.step_type;(u==="usage_question"||u==="self_description")&&O&&(q(),n(S=>new Set(Array.from(S).filter(R=>R==="usage_question"||R==="self_description"))))},[c?.step_type,q,O]),d.useEffect(()=>{c?.step_type&&(b.logEvent("chatgpt_onboarding_step_shown",null,{step_type:c?.step_type,step_index:s.toString()}),_.logEvent(w.onboardingStepShown,{step_type:c?.step_type,step_index:s.toString()}))},[s,c?.step_type]),P)return null;const D=u=>{g(!1),s===h.length-1?(b.logEvent("chatgpt_onboarding_flow_finished"),_.logEvent(w.onboardingFinished)):(b.logEvent("chatgpt_onboarding_flow_dismissed",null,{step_type:c?.step_type,step_index:s.toString()}),_.logEvent(w.onboardingDismissed,{step_type:c?.step_type,step_index:s.toString()})),u&&!te&&x()},se=u=>{k(u),h.find(S=>S.step_type==="self_description")||L(!0),l(S=>S+1),b.logEvent("chatgpt_onboarding_usage_question_selected",null,{main_usages:u.join(", ")}),_.logEvent(w.onboardingUsageQuestionSelected,{main_usages:u.join(", ")})},ne=u=>{N(u),L(!0),l(S=>S+1),b.logEvent("chatgpt_onboarding_self_description_entered",null,{main_usages:f.join(", ")}),_.logEvent(w.onboardingSelfDescriptionEntered,{main_usages:f.join(", ")})},oe=()=>{b.logEvent("chatgpt_onboarding_usage_question_skipped",null,{step_type:c?.step_type,step_index:s.toString()}),_.logEvent(w.onboardingUsageQuestionSkipped,{step_type:c?.step_type,step_index:s.toString()}),l(u=>u+1)},ae=()=>{b.logEvent("chatgpt_onboarding_go_back",null,{step_type:c?.step_type,step_index:s.toString()}),_.logEvent(w.onboardingGoBack,{step_type:c?.step_type,step_index:s.toString()}),l(u=>u-1)};return e.jsx(le,{isOpen:p,onClose:()=>D(!1),type:"success",size:"fullscreen",noPadding:!0,className:"w-full",children:e.jsx(Fe,{clientThreadId:t,children:e.jsxs("div",{className:"flex h-full max-h-full flex-col bg-gradient-to-b from-brand-blue-800/15 to-gray-50 dark:from-brand-blue-800/15 dark:to-token-main-surface-primary",children:[e.jsxs("div",{className:"absolute left-0 top-0 z-10 flex w-full items-center justify-between bg-none px-4",style:{minHeight:"var(--screen-thread-header-min-height,60px)"},children:[h&&h.length>0&&e.jsx("div",{className:"absolute left-0 top-0 h-2 w-full",children:e.jsx(j.div,{className:"h-1.5 bg-token-main-surface-primary-inverse",initial:{width:"0%",opacity:0},animate:{width:`${(s+1)/h.length*100}%`,opacity:1},transition:{duration:.3}})}),s>0?e.jsx(v,{onClick:ae,color:"ghost",className:"border-none",icon:ce}):e.jsx("div",{}),c?.step_type==="usage_question"||c?.step_type==="self_description"?e.jsx(v,{onClick:oe,color:"ghost",className:"border-none",children:W.formatMessage(a.skip)}):e.jsx(v,{onClick:()=>D(!0),color:"ghost",className:"border-none",children:W.formatMessage(a.close)})]}),e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center overflow-hidden",children:e.jsx(Y,{mode:"wait",children:i?e.jsx(Re,{setIsInWelcomePage:r},"welcome"):T?e.jsx(We,{isFirstStep:s<1,userName:Z?.name},"loading"):c?.step_type==="usage_question"?e.jsx(Qe,{mainUsagesProp:f,onSelectMainUsages:se},"usage-question"):c?.step_type==="self_description"?e.jsx(Be,{mainUsages:f,selfDescriptionProp:y,onEnterSelfDescription:ne},"self-description"):["dalle","file_upload","canvas","voice"].includes(c?.step_type)?e.jsx(Ye,{step:c,gotoStep:l,stepIndex:s,totalSteps:h.length,endOnboarding:D,clientThreadId:t},"tools-onboarding"):null})})]})})})}function Qe({mainUsagesProp:t,onSelectMainUsages:o}){const{layer:i}=I("717266490"),[r,p]=d.useState(new Set(t)),[g,x]=d.useState(void 0),s=E(),l=()=>{const n=new Set(r);n.has("other")&&g&&(n.add(g),n.delete("other")),o(Array.from(n))},m=["school","work","personalTasks","funAndEntertainment"];return i.get("onboarding_show_other_option",!1)&&m.push("other"),e.jsxs(C,{children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2 text-3xl font-medium leading-9 text-token-text-primary",children:e.jsx(M,{...a.tellMeWhyHere})}),e.jsx("p",{className:"mb-6 text-base text-token-text-secondary",children:e.jsx(M,{...a.suggestUsefulIdeas})})]}),e.jsxs("div",{className:"flex flex-col items-start justify-start gap-5",children:[m.map(n=>e.jsx(Ce,{id:`main-usage-${n}`,checked:r.has(n),onChange:f=>p(k=>{const y=new Set(k);return f.target.checked?y.add(n):y.delete(n),y}),label:e.jsx("span",{className:"cursor-pointer",children:s.formatMessage(a[n])})},n)),r.has("other")&&e.jsx(Ne,{ariaLabel:s.formatMessage(a.tellMeWhyHere),name:"other",placeholder:s.formatMessage(a.tellMeWhyHere),onChange:n=>x(n.target.value),maxLength:100,className:"ml-6 min-w-64 bg-token-main-surface-primary"})]}),e.jsx(v,{size:"medium",color:"primary",onClick:l,className:"mt-10",disabled:r.size===0,children:e.jsx(M,{...a.next})})]})}function Be({mainUsages:t,selfDescriptionProp:o,onEnterSelfDescription:i}){const[r,p]=d.useState(o),g=E(),x=d.useMemo(()=>t.includes("school")?a.exampleSchoolSelfDescription:t.includes("work")?a.exampleWorkSelfDescription:t.includes("funAndEntertainment")?a.exampleFunAndEntertainmentSelfDescription:a.examplePersonalTasksSelfDescription,[t]),{layer:s}=I("717266490"),l=s.get("write_custom_instructions_in_onboarding",!1),m=async()=>{i(r),l&&r&&z.createOrUpdateUserSystemMessage({aboutUserMessage:r,aboutModelMessage:"",disabledTools:[],enabled:!0}).catch(()=>{})};return e.jsxs(C,{className:"flex w-[640px] flex-col items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-4 text-3xl font-medium leading-9 text-token-text-primary",children:e.jsx(M,{...a.anythingElseYouWantMeToKnow})}),e.jsx("p",{className:"text-base text-token-text-secondary",children:e.jsx(M,{...l?a.selfDescriptionReasonSaveToCustomInstructions:a.selfDescriptionReason,values:{customInstructions:n=>e.jsx("a",{href:Te,className:"underline",target:"_blank",rel:"noreferrer",children:n})}})})]}),e.jsx(Pe,{className:"!dark:bg-white/5 mt-10 rounded border border-token-border-light !bg-black/5 p-5 !text-base placeholder-token-text-tertiary",placeholder:g.formatMessage(x),rows:4,value:r,onChange:n=>p(n.target.value),autoFocus:!0}),e.jsx(v,{size:"medium",color:"primary",onClick:m,className:"mt-10",children:e.jsx(M,{...a.next})})]})}function Ye({step:t,gotoStep:o,stepIndex:i,totalSteps:r,endOnboarding:p,clientThreadId:g}){const x=ue({clientThreadId:g}),s=De(),l=X(),m=E(),n=i===r-1,f=()=>{i<r-1?(b.logEvent("chatgpt_onboarding_flow_next_clicked",null,{source_step_type:t?.step_type,source_step_index:i.toString()}),_.logEvent(w.onboardingNextClicked,{source_step_type:t?.step_type,source_step_index:i.toString()}),t?.step_type==="file_upload"&&V.reset(l),o(i+1)):(p(!0),s())};return e.jsxs(C,{className:"flex h-full w-full flex-row px-8 md:px-12 lg:px-16 xl:px-24",children:[e.jsx("div",{className:"flex flex-1 flex-col items-center justify-center",children:e.jsxs(j.div,{className:"flex w-[90%] flex-1 flex-col items-start justify-center gap-2 md:w-[85%] lg:w-[80%]",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs(Y,{mode:"wait",children:[e.jsx(j.h1,{className:"mb-2 text-3xl font-medium text-token-text-primary",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.title?t.title:Q[t.step_type]?m.formatMessage(Q[t.step_type]):null},`title-${i}`),e.jsx(j.p,{className:"mb-6 text-base text-token-text-secondary",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},exit:{opacity:0,y:-10},children:t.subtitle?t.subtitle:B[t.step_type]?m.formatMessage(B[t.step_type]):null},`subtitle-${i}`)]}),e.jsx(v,{size:"large",color:"primary",onClick:f,disabled:x&&!n,children:e.jsx(M,{...n?a.tryChatGPT:a.next})})]})}),e.jsx("div",{className:"relative flex h-full min-w-[360px] flex-1 flex-col pb-16 pt-16",children:e.jsx("div",{className:"h-full w-full overflow-auto rounded-[30px] bg-token-main-surface-primary shadow-2xl shadow-token-border-xlight",children:e.jsx(qe,{hideHeader:!0,hideTools:!0,embedded:!0})})})]})}const $e=({clientThreadId:t,setClientThreadId:o})=>{const{data:i}=pe(),{data:r}=ge(),p=Ie(t),g=Ue(i,r),{onThreadCreated:x}=K({clientThreadId:t,setClientThreadId:o}),{onRequestCompletion:s}=Le({clientThreadId:t,currentModelId:p,defaultModelId:g.id,onThreadCreated:x}),l=$(t);return d.useCallback(({stepPrompt:m})=>{const n=new Ae,f=`${l}-nextPrompt`,k=()=>{const y=ye.getTextAsMessage(m,H.User);y.author.metadata=y.author.metadata||{},y.author.metadata.real_author=be.Onboarding,_e.updateTree(t,N=>{N.addNode(f,y,l,H.User,void 0,void 0)})};s({type:me.Next,promptId:f,eventMetadata:{eventSource:"mouse"},cancelActiveRequests:!0,completionMetadata:{conversationMode:fe(he.getConversationMode(t)),isOnboardingConversation:!0},updateTree:k,turnTracker:n})},[t,s,l])},a=xe({skip:{defaultMessage:"Skip",id:"chatgpt.new-onboarding.skip"},close:{defaultMessage:"Close",id:"chatgpt.new-onboarding.close"},submit:{defaultMessage:"Submit",id:"chatgpt.new-onboarding.submit"},next:{defaultMessage:"Next",id:"chatgpt.new-onboarding.next"},finish:{defaultMessage:"Finish",id:"chatgpt.new-onboarding.finish"},tellMeWhyHere:{defaultMessage:"Tell me about why you’re here.",id:"chatgpt.new-onboarding.tell-me-why-here"},suggestUsefulIdeas:{defaultMessage:"I’ll use this information to suggest ideas you might find useful.",id:"chatgpt.new-onboarding.suggest-useful-ideas"},school:{defaultMessage:"School",id:"chatgpt.new-onboarding.school"},work:{defaultMessage:"Work",id:"chatgpt.new-onboarding.work"},personalTasks:{defaultMessage:"Personal tasks",id:"chatgpt.new-onboarding.personal-tasks"},funAndEntertainment:{defaultMessage:"Fun and entertainment",id:"chatgpt.new-onboarding.fun-and-entertainment"},other:{defaultMessage:"Other",id:"chatgpt.new-onboarding.other"},imChaggptNiceToMeetYou:{defaultMessage:"Hi, I’m ChatGPT. It’s nice to meet you!",id:"chatgpt.new-onboarding.im-chatgpt-nice-to-meet-you"},preparingOnboardingExperience:{defaultMessage:"Preparing your onboarding experience...",id:"chatgpt.new-onboarding.preparing-onboarding-experience"},oneLastQuestion:{defaultMessage:"One last question:",id:"chatgpt.new-onboarding.one-last-question-2"},anythingElseYouWantMeToKnow:{defaultMessage:"Is there anything else you’d like me to know?",id:"chatgpt.new-onboarding.anything-else-you-want-me-to-know-2"},oneQuestionAnythingElse:{defaultMessage:"One last question: Is there anything else you’d like me to know?",id:"chatgpt.new-onboarding.one-more-question"},selfDescriptionReason:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant.",id:"chatgpt.new-onboarding.self-description-reason"},allSetLetMeShowYouAroundWithoutName:{defaultMessage:"All set!<nextLine></nextLine>Now, let me show you around...",id:"chatgpt.new-onboarding.all-set-let-me-show-you-around-without-name"},selfDescriptionReasonSaveToCustomInstructions:{defaultMessage:"Details like your job, hobbies, or interests make my responses more relevant. I’ll save this information as <customInstructions>Custom Instructions</customInstructions>, which you can update any time.",id:"chatgpt.new-onboarding.self-description-reason-save-to-custom-instructions"},exampleSchoolSelfDescription:{defaultMessage:"I'm a college student studying computer science, and I love to play the guitar.",id:"chatgpt.new-onboarding.example-school-self-description"},exampleWorkSelfDescription:{defaultMessage:"I'm a graphic designer based in Berlin, and I enjoy painting and attending art exhibitions.",id:"chatgpt.new-onboarding.example-work-self-description"},examplePersonalTasksSelfDescription:{defaultMessage:"I live in Sydney and love cooking new recipes and planning travel itineraries.",id:"chatgpt.new-onboarding.example-personal-tasks-self-description"},exampleFunAndEntertainmentSelfDescription:{defaultMessage:"I'm a music enthusiast based in Nashville, and I can talk for hours about guitar techniques and songwriting.",id:"chatgpt.new-onboarding.example-fun-and-entertainment-self-description"},tryChatGPT:{defaultMessage:"Try ChatGPT",id:"chatgpt.new-onboarding.try-chatgpt"}}),Q={usage_question:a.tellMeWhyHere},B={usage_question:a.suggestUsefulIdeas};export{We as LoadingState,it as default};
//# sourceMappingURL=hgsmava1iiy94kvu.js.map
