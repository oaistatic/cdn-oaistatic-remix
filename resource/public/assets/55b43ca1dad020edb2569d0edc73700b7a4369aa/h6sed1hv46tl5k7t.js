import{r as h,c as y,j as e,M as t,e as D}from"./i8w88cc8b3gds516.js";import{bW as A,cA as P,U as O,cB as E,cC as B,cD as I,cE as R,cF as g,cG as x,cH as b}from"./jg63sxiyqeyvfv9f.js";import{W as T,J as U,y as _,D as L,S as Y,co as H,bO as z,dE as f,aa as j,g4 as F,dL as G,fR as K,g5 as q,f as J,a5 as Q}from"./eh26o1l35t2fnjj4.js";function V(){const o=A(),{data:r}=T(),a=U(r),i=a!=null||r!=null,[n,c]=h.useState(!1),m=r?.accountItems,k=P(a?.id??""),w=a?.id,d=m?.find(l=>l.id===w),M=a?.isOwnerOfAccount()&&a.isTeam()&&!a.hasPaidSubscription(),W=a?.isOwnerOfAccount()&&a.isTeam()&&a.hasPaidSubscription(),u=m?.filter(l=>!l.isDeactivated()),v=y(),S=_();let p=K;a?p=a.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceModal"):(L.addError(new Error("Current account is undefined in DeactivatedWorkspaceModal")),Y.logEvent("chatgpt_undefined_current_account"));const N=h.useCallback(()=>{c(!0),O.setPurchaseWorkspaceData({minimumSeats:Math.max(k,E),billingDetails:{currency:p},existingAccount:d}),c(!1)},[k,d,p]),C=async()=>{c(!0);try{const l=await j.fetchCustomerPortalUrl();location.href=l.url,c(!1)}catch{c(!1),S.warning(v.formatMessage(s.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return a==null||!d||!u?e.jsx(e.Fragment,{}):e.jsx(H,{type:"success",onClose:z,isOpen:i,title:e.jsx("span",{className:"text-lg",children:e.jsx(t,{...s.workspaceDeactivated})}),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4",children:[e.jsx(B,{src:d.data.profilePictureUrl,size:"large"}),e.jsx("div",{className:"font-semibold",children:d.data.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base font-bold",children:e.jsx(t,{...s.workspaceDeactivated})}),e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{className:"mb-1",children:e.jsx(t,{...s.chatHistoryUnavailable})}),e.jsx("li",{children:e.jsx(t,{...s.otherWorkspacesAvailable})})]})]}),M&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{children:e.jsx(t,{...s.purchaseNewSubscription})}),e.jsx(f,{className:"m-auto mt-2 w-full",loading:n,onClick:N,children:e.jsx(t,{...s.purchaseNewSubscriptionButton})})]}),W&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{children:e.jsx(t,{...s.resolveOutstandingInvoice})}),e.jsx(f,{className:"m-auto mt-2 w-full",loading:n,onClick:C,children:e.jsx(t,{...s.manageSubscriptionButton})})]}),e.jsx(I,{}),e.jsx("div",{className:"w-full justify-center",children:u.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2 text-base font-bold",children:e.jsx(t,{...s.selectWorkspace})}),e.jsx(R,{data:u})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-base font-bold",children:e.jsx(t,{...s.createPersonalWorkspace})}),e.jsx(t,{...s.deactivatedWorkspaceReason})]}),e.jsxs("div",{className:"flex w-full items-center gap-4",children:[o&&o.picture&&e.jsx("img",{alt:"Profile",src:o.picture,width:g.workspaceMedium,height:g.workspaceMedium,className:"flex items-center justify-center rounded-sm"}),e.jsx("span",{className:"font-semibold",children:o&&e.jsx("span",{children:o.name})})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(f,{title:v.formatMessage(s.createPersonalWorkspaceButton),loading:n,onClick:async()=>{c(!0),await j.upsertPersonalWorkspace(),F(q),G()},color:"primary",className:"ml-4"})})]})})]})})}const s=J({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},workspaceDeactivatedDesc:{id:"deactivatedWorkspaceModal.workspaceDeactivatedDesc",defaultMessage:"Your workspace has been deactivated."},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},profileAlt:{id:"deactivatedWorkspaceModal.profileAlt",defaultMessage:"Profile"},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}});function ee(){const o=x(b.workspaces),r=Q(),a=x(b.workspaceId),i=o.find(c=>c.id===a),n=D();return h.useEffect(()=>{r?.data&&(!i||!i.deactivated)&&n("/")},[r,i,n]),r?.data&&(!i||!i.deactivated)?e.jsx("div",{}):e.jsx(V,{})}export{ee as default};
//# sourceMappingURL=h6sed1hv46tl5k7t.js.map
